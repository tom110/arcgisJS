// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.18/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/analysis/templates/JoinFeatures.html":'\x3cdiv class\x3d"esriAnalysis"\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" style\x3d"margin-top:0.5em; margin-bottom: 0.5em;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_joinFeaturesToolContentTitle" class\x3d"analysisTitle"\x3e\r\n        \x3ctable class\x3d"esriFormTable" \x3e \r\n          \x3ctr\x3e\r\n            \x3ctd class\x3d"esriToolIconTd"\x3e\x3cdiv class\x3d"joinFeaturesIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd class\x3d"esriAlignLeading esriAnalysisTitle" data-dojo-attach-point\x3d"_toolTitle"\x3e\r\n\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"_titleLbl"\x3e${i18n.joinFeaturesTitle}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\x3cnav class\x3d"breadcrumbs"  data-dojo-attach-point\x3d"_analysisModeLblNode" style\x3d"display:none;"\x3e\r\n\t\t\t\t\t\t\t\t\x3ca href\x3d"#" class\x3d"crumb" style\x3d"font-size:12px;" data-dojo-attach-event\x3d"onclick:_handleModeCrumbClick" data-dojo-attach-point\x3d"_analysisModeCrumb"\x3e\x3c/a\x3e\r\n\t\t\t\t\t\t\t\t\x3ca href\x3d"#" class\x3d"crumb is-active" data-dojo-attach-point\x3d"_analysisTitleCrumb" style\x3d"font-size:16px;"\x3e${i18n.joinFeaturesTitle}\x3c/a\x3e\r\n\t\t\t\t\t\t\t\x3c/nav\x3e \t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n            \x3ctd\x3e\r\n              \x3cdiv class\x3d"esriFloatTrailing" style\x3d"padding:0;"\x3e\r\n                  \x3cdiv class\x3d"esriFloatLeading"\x3e\r\n                    \x3ca href\x3d"#" class\x3d\'esriFloatLeading helpIcon\' esriHelpTopic\x3d"toolDescription"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriFloatTrailing"\x3e\r\n                    \x3ca href\x3d"#" data-dojo-attach-point\x3d"_closeBtn" title\x3d"${i18n.close}" class\x3d"esriAnalysisCloseIcon"\x3e\x3c/a\x3e\r\n                  \x3c/div\x3e              \r\n              \x3c/div\x3e                \r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both; border-bottom: #CCC thin solid; height:1px;width:100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit/form/Form" data-dojo-attach-point\x3d"_form" readOnly\x3d"true"\x3e\r\n\t    \x3ctable class\x3d"esriFormTable" style\x3d"border-collapse:collapse;border-spacing:5px;margin-top:15px;" cellpadding\x3d"5px" cellspacing\x3d"5px" data-dojo-attach-point\x3d"_targetLayerTable"\x3e \r\n\t        \x3ctbody\x3e\r\n\t        \t\x3ctr data-dojo-attach-point\x3d"_targetLayerLabelRow" style\x3d"display: table-row;"\x3e\r\n\t\t            \x3ctd colspan\x3d"3" style\x3d"padding-bottom:1em;"\x3e\r\n\t\t              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.oneLabel}\x3c/label\x3e\r\n\t\t              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.targetLayerLabel}\x3c/label\x3e\r\n\t\t            \x3c/td\x3e\r\n\t\t            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n\t\t              \x3ca href\x3d"#" class\x3d"esriFloatTrailing helpIcon" esrihelptopic\x3d"targetLayer"\x3e\x3c/a\x3e\r\n\t\t            \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e\r\n\t          \t\x3ctr data-dojo-attach-point\x3d"_targetLayerRow"  style\x3d"display: table-row;"\x3e\r\n\t\t            \x3ctd style\x3d"padding-top: 0px; padding-bottom: 1em;" \x3e\r\n\t\t              \t\x3cselect class\x3d"esriLeadingMargin1 esriTrailingMargin025 longInput esriLongLabel" data-dojo-attach-point\x3d"_targetLayerSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"overflow:hidden!important;" data-dojo-attach-event\x3d"onChange:_handleTargetLayerChange" required\x3d"true"\x3e\r\n\t \t              \t\x3c/select\x3e\r\n\t\t            \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e\r\n\t        \x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t    \x3ctable class\x3d"esriFormTable" style\x3d"border-collapse:collapse;border-spacing:5px;margin-top:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px" data-dojo-attach-point\x3d"_joinLayerTable"\x3e \r\n\t        \x3ctbody\x3e\r\n\t        \t\x3ctr data-dojo-attach-point\x3d"_joinLayerLabelRow" style\x3d"display: table-row;"\x3e\r\n\t\t            \x3ctd colspan\x3d"3" style\x3d"padding-bottom:1em;"\x3e\r\n\t\t              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.twoLabel}\x3c/label\x3e\r\n\t\t              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.joinLayerLabel}\x3c/label\x3e\r\n\t\t            \x3c/td\x3e\r\n\t\t            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n\t\t              \x3ca href\x3d"#" class\x3d"esriFloatTrailing helpIcon" esrihelptopic\x3d"joinLayer"\x3e\x3c/a\x3e\r\n\t\t            \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e\r\n\t          \t\x3ctr data-dojo-attach-point\x3d"_joinLayerRow" style\x3d"display: table-row;"\x3e\r\n\t\t            \x3ctd style\x3d"padding-top: 0px; padding-bottom: 1em;"\x3e\r\n\t\t              \t\x3cselect class\x3d"esriLeadingMargin1 esriTrailingMargin025 longInput esriLongLabel" data-dojo-attach-point\x3d"_joinLayerSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"overflow:hidden!important;" data-dojo-attach-event\x3d"onChange:_handleJoinLayerChange" required\x3d"true"\x3e\x3c/select\x3e\r\n\t\t            \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e\r\n\t        \x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t    \x3ctable class\x3d"esriFormTable" style\x3d"border-collapse:collapse;border-spacing:5px;margin-top:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px" data-dojo-attach-point\x3d"_joinOperationTable"\x3e \r\n\t        \x3ctbody\x3e\r\n\t        \t\x3ctr data-dojo-attach-point\x3d"_joinOperationLabelRow" style\x3d"display: table-row;"\x3e\r\n\t\t            \x3ctd colspan\x3d"3" style\x3d"padding-bottom:1em;"\x3e\r\n\t\t              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.threeLabel}\x3c/label\x3e\r\n\t\t              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.joinTypeLabel}\x3c/label\x3e\r\n\t\t            \x3c/td\x3e\r\n\t\t            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n\t\t              \x3ca href\x3d"#" class\x3d"esriFloatTrailing helpIcon" esrihelptopic\x3d"joinOperation"\x3e\x3c/a\x3e\r\n\t\t            \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e\r\n\t          \t\x3ctr data-dojo-attach-point\x3d"_joinOperationRow" style\x3d"display: table-row;"\x3e\r\n\t\t            \x3ctd style\x3d"padding-top: 0px; padding-bottom: 1em;"\x3e\r\n\t\t              \t\x3cselect class\x3d"esriLeadingMargin1 esriTrailingMargin025 longInput esriLongLabel" style\x3d"overflow:hidden!important;" data-dojo-attach-point\x3d"_joinOperation" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleJoinOperationChange"\x3e\r\n\r\n\t\t              \t\x3c/select\x3e\r\n\t\t            \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e\r\n\t        \x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t    \x3ctable class\x3d"esriFormTable" style\x3d"border-collapse:collapse;border-spacing:5px;margin-top:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n\t        \x3ctbody\x3e\r\n\t        \t\x3ctr data-dojo-attach-point\x3d"_JoinOptionsLabelRow"\x3e\r\n\t\t            \x3ctd colspan\x3d"3" style\x3d"padding-bottom:1em;"\x3e\r\n\t\t              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.fourLabel}\x3c/label\x3e\r\n\t\t              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.joinOptionsLabel}\x3c/label\x3e\r\n\t\t            \x3c/td\x3e\r\n\t\t            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n\t\t              \x3ca href\x3d"#" class\x3d"esriFloatTrailing helpIcon" esrihelptopic\x3d"joinOptions"\x3e\x3c/a\x3e\r\n\t\t            \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e\r\n\t        \x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t    \x3ctable class\x3d"esriFormTable" style\x3d"border-collapse:collapse;border-spacing:5px;margin-top:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n\t        \x3ctbody\x3e\r\n\t          \t\x3ctr\x3e\r\n\t\t            \x3ctd colspan\x3d"3" style\x3d"padding-top: 0px;"\x3e\r\n\t\t            \t\x3clabel class\x3d"esriSelectLabel esriExtentLabel esriLeadingMargin2 esriTrailingMargin025 hide" style\x3d"display:none;padding-top: 0px; padding-bottom: 1em;"\x3e\r\n\t\t\t\t\t     \t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_spatialCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:false"  data-dojo-attach-event\x3d"onChange:_handleSpatialCheckChange" required\x3d"true"/\x3e${i18n.spatialJoinLabel}\r\n\t\t\t\t\t   \t\x3c/label\x3e\r\n\t\t\t\t\t\t\t    \x3cdiv style\x3d"width:80%;" class\x3d"esriFloatTrailing padTop1"\x3e\x3clabel class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_spatialJoinLabel"\x3e ${i18n.chooseSpatialJoin}\x3c/label\x3e\x3c/div\x3e\r\n\t\t\t        \t  \x3cdiv class\x3d"esriLeadingMargin2 bufferSelector iconSelector" data-dojo-attach-point\x3d"_spatialJoin"\x3e\r\n                     \x3cdiv class\x3d"bufferIcon spatialJoinIcon"\x3e\x3c/div\x3e\r\n                     \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel hide"\x3e${i18n.spatialJoinLabel}\x3c/label\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n\t\t\t\t\t    \x3c/td\x3e\r\n\t\t\t\t\t\t  \x3ctd class\x3d"shortTextInput" style\x3d"vertical-align:inherit;"\x3e\r\n\t\t\t            \x3ca href\x3d"#" class\x3d"esriFloatTrailing helpIcon" esrihelptopic\x3d"spatialRelationship"\x3e\x3c/a\x3e\r\n\t\t\t        \x3c/td\x3e\r\n\t\t\t    \x3c/tr\x3e\r\n\t        \t\x3ctr\x3e\r\n\t        \t\t\x3ctd colspan\x3d"4" style\x3d"padding:1em;"\x3e\r\n\t\t              \t\x3cspan data-dojo-attach-point\x3d"_spatialRelationshipRow" class\x3d"hide"\x3e\r\n\t\t\t              \t\x3cselect class\x3d"esriLeadingMargin1 esriTrailingMargin025 longInput esriLongLabel" data-dojo-attach-point\x3d"_spatialRelationshipSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleSpatialRelationshipChange"\x3e\x3c/select\x3e\r\n\t\t\t            \x3c/span\x3e\r\n\t\t\t        \x3c/td\x3e\r\n\t\t        \x3c/tr\x3e\r\n\t\t\t    \x3ctr data-dojo-attach-point\x3d"_spatialDistanceRow" class\x3d"hide"\x3e\r\n\t\t\t    \t\x3ctd colspan\x3d"4" style\x3d"padding:1em;"\x3e\r\n\t\t              \t\x3cinput class\x3d"esriLeadingMargin1 esriTrailingMargin05" style\x3d"width:40%;overflow:hidden!important;" placeholder\x3d"Number of units in" data-dojo-attach-point\x3d"_spatialDistanceInput" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-event\x3d"onChange:_handleSpatialDistanceChange"\x3e\x3c/input\x3e\r\n\t\t              \t\x3cselect class\x3d"esriLeadingMargin025" style\x3d"width:41.2%;overflow:hidden!important;" data-dojo-attach-point\x3d"_spatialUnitSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleSpatialUnitChange"\x3e\x3c/select\x3e\r\n\t\t\t        \x3c/td\x3e\r\n\t\t\t      \t\x3c/tr\x3e\r\n\t    \t\x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t    \x3ctable class\x3d"esriFormTable" style\x3d"border-collapse:collapse;border-spacing:5px;margin-top:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n\t        \x3ctbody\x3e\r\n\t          \t\x3ctr\x3e\r\n\t\t            \x3ctd colspan\x3d"3" style\x3d"padding-top: 0px;"\x3e\r\n\t\t            \t\x3clabel class\x3d"esriSelectLabel esriExtentLabel esriLeadingMargin2 esriTrailingMargin025 hide" style\x3d"display:none;padding-top: 0px; padding-bottom: 1em;"\x3e\r\n\t\t\t\t\t     \t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_temporalCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:false"  data-dojo-attach-event\x3d"onChange:_handleTemporalCheckChange" required\x3d"true"/\x3e${i18n.temporalJoinLabel}\r\n\t\t\t\t\t   \t\x3c/label\x3e\r\n\t\t\t\t\t\t\t    \x3cdiv style\x3d"width:80%;" class\x3d"esriFloatTrailing padTop1"\x3e\x3clabel class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_temporalJoinLabel"\x3e ${i18n.chooseTemporalJoin}\x3c/label\x3e\x3c/div\x3e\r\n\t\t\t            \x3cdiv class\x3d"esriLeadingMargin2 bufferSelector iconSelector" data-dojo-attach-point\x3d"_temporalJoin"\x3e\r\n                     \x3cdiv class\x3d"bufferIcon temporalJoinIcon"\x3e\x3c/div\x3e\r\n                     \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel hide"\x3e${i18n.temporalJoinLabel}\x3c/label\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\t\t\t\t\t\t\t\t\t\r\n\t\t          \x3c/td\x3e\r\n\t\t\t        \x3ctd class\x3d"shortTextInput" style\x3d"vertical-align:inherit;"\x3e\r\n\t\t\t            \x3ca href\x3d"#" class\x3d"esriFloatTrailing helpIcon" esrihelptopic\x3d"temporalRelationship"\x3e\x3c/a\x3e\r\n\t\t\t        \x3c/td\x3e\r\n\t\t\t    \x3c/tr\x3e\r\n\t        \t\x3ctr\x3e\r\n\t        \t\t\x3ctd colspan\x3d"4" style\x3d"padding:1em;"\x3e\r\n\t\t              \t\x3cspan data-dojo-attach-point\x3d"_temporalRelationshipRow" class\x3d"hide"\x3e\r\n\t\t\t              \t\x3cselect class\x3d"esriLeadingMargin1 esriTrailingMargin025 longInput esriLongLabel" data-dojo-attach-point\x3d"_temporalRelationshipSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleTemporalRelationshipChange"\x3e\x3c/select\x3e\r\n\t\t\t            \x3c/span\x3e\r\n\t\t\t        \x3c/td\x3e\r\n\t\t\t      \x3c/tr\x3e\r\n\t\t\t    \x3ctr data-dojo-attach-point\x3d"_temporalDistanceRow" class\x3d"hide"\x3e\r\n\t\t\t    \t\x3ctd colspan\x3d"4" style\x3d"padding:1em;"\x3e\r\n\t\t              \t\x3cinput class\x3d"esriLeadingMargin1 esriTrailingMargin05" style\x3d"width:40%;overflow:hidden!important;" placeholder\x3d"Number of units in" data-dojo-attach-point\x3d"_temporalDistanceInput" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-event\x3d"onChange:_handleTemporalDistanceChange"\x3e\x3c/input\x3e\r\n\t\t              \t\x3cselect class\x3d"esriLeadingMargin025" style\x3d"width:41.2%;overflow:hidden!important;" data-dojo-attach-point\x3d"_temporalUnitSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"onChange:_handleTemporalUnitChange"\x3e\x3c/select\x3e\r\n\t\t\t        \x3c/td\x3e\r\n\t    \t\x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t    \x3ctable class\x3d"esriFormTable" style\x3d"border-collapse:collapse;border-spacing:5px;margin-top:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n\t        \x3ctbody\x3e\r\n\t          \t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd colspan\x3d"3" style\x3d"padding-top: 0px;"\x3e\r\n\t\t            \t\x3clabel class\x3d"esriSelectLabel esriExtentLabel esriLeadingMargin2 esriTrailingMargin025 hide" style\x3d"display:none;padding-top: 0px;"\x3e\r\n\t\t\t\t\t     \t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_attributeCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:false"  data-dojo-attach-event\x3d"onChange:_handleAttributeCheckChange" required\x3d"true"/\x3e${i18n.attributeJoinLabel}\r\n\t\t\t\t\t   \t\x3c/label\x3e\r\n\t\t\t\t\t\t\t      \x3cdiv style\x3d"width:80%;" class\x3d"esriFloatTrailing padTop1"\x3e\x3clabel class\x3d"esriLeadingMargin1" data-dojo-attach-point\x3d"_attrJoinLabel"\x3e ${i18n.chooseAttrJoin}\x3c/label\x3e\x3c/div\x3e\r\n\t\t\t        \r\n\t\t                \x3cdiv class\x3d"esriLeadingMargin2 bufferSelector iconSelector" data-dojo-attach-point\x3d"_attributeJoin"\x3e\r\n                     \x3cdiv class\x3d"bufferIcon attributeJoinIcon"\x3e\x3c/div\x3e\r\n                     \x3cdiv\x3e\x3clabel class\x3d"esriSelectLabel hide"\x3e${i18n.attributeJoinLabel}\x3c/label\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\t\t\t\t\t\t\t\t\r\n\t\t            \x3c/td\x3e\r\n\t\t\t\t       \x3ctd class\x3d"shortTextInput" style\x3d"vertical-align:inherit;"\x3e\r\n\t       \t            \x3ca href\x3d"#" class\x3d"esriFloatTrailing helpIcon" esrihelptopic\x3d"attributeRelationship"\x3e\x3c/a\x3e\r\n\t\t\t        \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e\r\n\t    \t\x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t    \x3ctable class\x3d"esriFormTable esriLeadingMargin1" style\x3d"border-collapse:collapse;border-spacing:5px;margin-top:10px;" cellpadding\x3d"5px" cellspacing\x3d"5px"\x3e \r\n\t        \x3ctbody\x3e\r\n\t\t      \t\x3ctr data-dojo-attach-point\x3d"_attributeRelationshipRow" class\x3d"hide longInput"\x3e\r\n\t\t          \t\r\n\t\t        \x3c/tr\x3e\r\n\t        \x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t    \x3ctable class\x3d"esriFormTable" style\x3d"border-collapse:collapse;border-spacing:5px; margin-top:10px;margin-bottom:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px" data-dojo-attach-point\x3d"_summaryStatisticTable"\x3e \r\n\t        \x3ctbody\x3e\r\n\t        \t\x3ctr data-dojo-attach-point\x3d"_summaryStatisticLabelRow" style\x3d"display: table-row;"\x3e\r\n\t\t            \x3ctd colspan\x3d"3"\x3e\r\n\t\t              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.fiveLabel}\x3c/label\x3e\r\n\t\t              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.statisticsLabel}\x3c/label\x3e\r\n\t\t            \x3c/td\x3e\r\n\t\t            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n\t\t              \x3ca href\x3d"#" class\x3d"esriFloatTrailing helpIcon" esrihelptopic\x3d"summaryFields"\x3e\x3c/a\x3e\r\n\t\t            \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e\r\n\t          \t\x3ctr data-dojo-attach-point\x3d"_summaryStatisticRow" \x3e\r\n\t          \t\x3c/tr\x3e\r\n\t        \x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t    \x3ctable class\x3d"esriFormTable" style\x3d"border-collapse:collapse;border-spacing:5px;margin-top:5px;" cellpadding\x3d"5px" cellspacing\x3d"5px" data-dojo-attach-point\x3d"_summaryStatisticTable"\x3e \r\n\t        \x3ctbody\x3e\r\n\t          \t\x3c!-- \x3ctr data-dojo-attach-point\x3d"_srLabelRow" style\x3d"display: table-row;height: 50px;"\x3e\r\n\t\t            \x3ctd colspan\x3d"3"\x3e\r\n\t\t              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel" data-dojo-attach-point\x3d"_spatialRefLabel"\x3e${i18n.sixLabel}\x3c/label\x3e\r\n\t\t              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.spatialReference}\x3c/label\x3e\r\n\t\t            \x3c/td\x3e\r\n\t\t            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n\t\t              \x3ca href\x3d"#" class\x3d"esriFloatTrailing helpIcon" esriHelpTopic\x3d"spatialReference"\x3e\x3c/a\x3e\r\n\t\t            \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e \r\n\t\t\u00a0 \u00a0 \u00a0 \u00a0 \x3ctr data-dojo-attach-point\x3d"_srInputRow"\x3e\r\n\t\t\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \x3ctd \u00a0colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n\t\t\t\t\t\x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" class\x3d"esriLeadingMargin1 longInput" data-dojo-props\x3d"trim:true" data-dojo-attach-point\x3d"_spatialRefInput" value\x3d""\x3e\x3c/input\x3e\r\n\t\t\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \x3c/td\x3e\r\n\t\t\u00a0 \u00a0 \u00a0 \u00a0 \x3c/tr\x3e --\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"_datastoreLabelRow" style\x3d"display: table-row; height: 50px;"\x3e\r\n\t\t            \x3ctd colspan\x3d"3"\x3e\r\n\t\t              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel" data-dojo-attach-point\x3d"_datastoreLabel"\x3e${i18n.sixLabel}\x3c/label\x3e\r\n\t\t              \x3clabel class\x3d"esriAnalysisStepsLabel"\x3e${i18n.datastoreLabel}\x3c/label\x3e\r\n\t\t            \x3c/td\x3e\r\n\t\t            \x3ctd class\x3d"shortTextInput" style\x3d"padding-bottom:0;"\x3e\r\n\t\t              \x3ca href\x3d"#" class\x3d"esriFloatTrailing helpIcon" esriHelpTopic\x3d"dataStore"\x3e\x3c/a\x3e\r\n\t\t            \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e\r\n\t\t\u00a0 \u00a0 \u00a0 \u00a0 \x3ctr data-dojo-attach-point\x3d"_selectDataStore"\x3e\r\n\t\t\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \x3ctd \u00a0colspan\x3d"3" style\x3d"padding-top:0;"\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"esriLeadingMargin1 longInput esriLongLabel" \u00a0style\x3d"margin-top:1.0em;" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"_datastoreSelect"\x3e\r\n\t\t\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \x3coption value\x3d"relational"\x3e${i18n.relationalDS}\x3c/option\x3e\r\n\t\t\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \x3coption value\x3d"spatialtemporal" selected\x3d"true"\x3e${i18n.spatialDS}\x3c/option\x3e\r\n\t\t\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \x3c/select\x3e\r\n\t\t\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \x3c/td\x3e\r\n\t\t\u00a0 \u00a0 \u00a0 \u00a0 \x3c/tr\x3e\r\n\r\n\t        \x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t    \x3ctable class\x3d"esriFormTable" style\x3d"border-collapse:collapse;border-spacing:5px;margin-top:15px;" cellpadding\x3d"5px" cellspacing\x3d"5px" data-dojo-attach-point\x3d"_outputNameTable"\x3e \r\n\t        \x3ctbody\x3e\r\n\t          \t\x3ctr\x3e\r\n\t\t            \x3ctd colspan\x3d"3" style\x3d"border-collapse:collapse;border-spacing:5px;"\x3e\r\n\t\t              \x3clabel class\x3d"esriFloatLeading esriTrailingMargin025 esriAnalysisNumberLabel"\x3e${i18n.sevenLabel}\x3c/label\x3e\r\n\t\t              \x3clabel class\x3d"longTextInput esriAnalysisStepsLabel"\x3e${i18n.resultLabel}\x3c/label\x3e\r\n\t\t            \x3c/td\x3e\r\n\t\t            \x3ctd class\x3d"shortTextInput"\x3e\r\n\t\t              \x3ca href\x3d"#" class\x3d\'esriFloatTrailing helpIcon\' esriHelpTopic\x3d"outputName"\x3e\x3c/a\x3e \r\n\t\t            \x3c/td\x3e             \r\n\t            \x3c/tr\x3e\r\n\t          \t\x3ctr\x3e\r\n\t\t\t        \x3ctd colspan\x3d"3" style\x3d"border-collapse:collapse;border-spacing:5px;"\x3e\r\n\t\t\t          \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true" class\x3d"esriOutputText esriLeadingMargin1 longInput" data-dojo-attach-point\x3d"_outputName"\x3e\x3c/input\x3e\r\n\t\t\t        \x3c/td\x3e                \r\n\t\t        \x3c/tr\x3e\r\n\t        \x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t    \x3ctable class\x3d"esriFormTable" style\x3d"border-collapse:collapse;border-spacing:5px;margin-top:15px;" cellpadding\x3d"5px" cellspacing\x3d"5px" data-dojo-attach-point\x3d"_outputNameTable"\x3e \r\n\t        \x3ctbody\x3e\r\n\t          \t\x3ctr\x3e\r\n\t\t            \x3ctd colspan\x3d"3" style\x3d"border-collapse:collapse;border-spacing:5px;"\x3e\r\n\t\t              \x3cdiv class\x3d"esriLeadingMargin1 attrSelect" data-dojo-attach-point\x3d"_chooseFolderRow"\x3e\r\n\t\t                \x3clabel style\x3d"width:9px;font-size:smaller;"\x3e${i18n.saveResultIn}\x3c/label\x3e\r\n\t\t                \x3cinput class\x3d"longInput esriFolderSelect" data-dojo-attach-point\x3d"_webMapFolderSelect" dojotype\x3d"dijit/form/FilteringSelect" trim\x3d"true"\x3e\x3c/input\x3e\r\n\t\t              \x3c/div\x3e              \r\n\t\t            \x3c/td\x3e\r\n\t          \t\x3c/tr\x3e   \r\n\t        \x3c/tbody\x3e\r\n\t    \x3c/table\x3e\r\n\t\x3c/div\x3e\r\n  \t\x3cdiv style\x3d"padding:5px;margin-top:5px;border-top:solid 1px #BBB;"\x3e\r\n      \t\x3cdiv class\x3d"esriExtentCreditsCtr"\x3e\r\n        \x3ca class\x3d"esriFloatTrailing esriSmallFont"  href\x3d"#" data-dojo-attach-point\x3d"_showCreditsLink" data-dojo-attach-event\x3d"onclick:_handleShowCreditsClick"\x3e${i18n.showCredits}\x3c/a\x3e\r\n       \t\x3clabel data-dojo-attach-point\x3d"_chooseExtentDiv" class\x3d"esriSelectLabel esriExtentLabel"\x3e\r\n         \t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"_useExtentCheck" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" name\x3d"extent" value\x3d"true"/\x3e\r\n           \t${i18n.useMapExtent}\r\n       \t\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFormWarning esriRoundedBox" data-dojo-attach-point\x3d"_errorMessagePane" style\x3d"display:none;"\x3e\r\n        \x3ca href\x3d"#" title\x3d"${i18n.close}" class\x3d"esriFloatTrailing esriAnalysisCloseIcon" title\x3d\'${i18n.close}\' data-dojo-attach-event\x3d"onclick:_handleCloseMsg"\x3e\x3c/a\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_bodyNode"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"_saveBtn" class\x3d"esriLeadingMargin4 esriAnalysisSubmitButton" data-dojo-attach-event\x3d"onClick:_handleSaveBtnClick"\x3e\r\n          ${i18n.runAnalysis}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/Dialog" title\x3d"${i18n.creditTitle}" data-dojo-attach-point\x3d"_usageDialog" style\x3d"width:40em;"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/analysis/CreditEstimator"  data-dojo-attach-point\x3d"_usageForm"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e    \r\n  \t\r\n\x3c/div\x3e'}});
define("esri/dijit/analysis/JoinFeatures","esri/layers/FeatureLayer require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/on dojo/json dojo/string dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/store/Memory dojo/_base/fx dojo/fx/easing dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/layout/AccordionContainer dijit/TitlePane dijit/form/FilteringSelect dijit/form/Select dijit/form/TextBox dijit/Dialog ../../kernel ../../lang ./utils ./AnalysisBase ./CreditEstimator ./_AnalysisOptions dojo/i18n!../../nls/jsapi dojo/text!./templates/JoinFeatures.html".split(" "),
function(r,v,z,f,k,p,s,A,u,M,N,m,B,g,C,c,O,w,x,D,E,F,G,H,t,P,Q,R,q,S,T,I,e,l,J,U,K,y,L){r=z([D,E,F,G,H,K,J],{declaredClass:"esri.dijit.analysis.JoinFeatures",templateString:L,widgetsInTemplate:!0,showGeoAnalyticsParams:!0,i18n:null,toolName:"JoinFeatures",helpFileName:"JoinFeatures",resultParameter:"output",constructor:function(a,b){this.targetLayers=[];this.joinLayers=[];this._pbConnects=[];this._statsRows=[];this._attrJoinRows=[];a.containerNode&&(this.container=a.containerNode)},postCreate:function(){this.inherited(arguments);
this._buildUI()},postMixInProperties:function(){this.inherited(arguments);this.i18n={};f.mixin(this.i18n,y.common);f.mixin(this.i18n,y.joinFeaturesTool);this.joinOperation=this.i18n.oneToOneLabel;this.joinOperationTypes=[{value:"JoinOneToOne",label:this.i18n.oneToOneLabel},{value:"JoinOneToMany",label:this.i18n.oneToManyLabel}];this.spatialDistance=0;this.spatialUnit=this.i18n.feet;this.spatialUnitTypes=[{value:"Feet",label:this.i18n.feet},{value:"Yards",label:this.i18n.yards},{value:"Miles",label:this.i18n.miles},
{value:"Meters",label:this.i18n.meters},{value:"Kilometers",label:this.i18n.kilometers},{value:"NauticalMiles",label:this.i18n.nautMiles}];this.temporalDistance=0;this.temporalUnit=this.i18n.years;this.temporalUnitTypes=[{value:"Years",label:this.i18n.years},{value:"Months",label:this.i18n.months},{value:"Weeks",label:this.i18n.weeks},{value:"Days",label:this.i18n.days},{value:"Hours",label:this.i18n.hours},{value:"Minutes",label:this.i18n.minutes},{value:"Seconds",label:this.i18n.seconds},{value:"Milliseconds",
label:this.i18n.milliseconds}];this.attributeRelationshipCheck=null;this.attributeRelationship=this.i18n.equalSign;this.attributeType=[{value:"Equal",label:this.i18n.equalSign}]},startup:function(){},_buildUI:function(){var a;this.signInPromise.then(f.hitch(this,l.initHelpLinks,this.domNode,this.showHelp,{analysisGpServer:this.analysisGpServer}));k.forEach(this.joinOperationTypes,function(a,d){this._joinOperation.addOption({value:a.value,label:a.label})},this);k.forEach(this.spatialUnitTypes,function(a,
d){this._spatialUnitSelect.addOption({value:a.value,label:a.label})},this);k.forEach(this.temporalUnitTypes,function(a,d){this._temporalUnitSelect.addOption({value:a.value,label:a.label})},this);e.isDefined(this.targetLayer)&&(a=k.indexOf(this.targetLayers,this.targetLayer),-1!==a?this._targetLayerSelect.addOption({value:this._toString(a),label:this.targetLayer.name}):(this._targetLayerSelect.addOption({value:this._toString(this.targetLayers.length-1),label:this.targetLayer.name}),this.targetLayers.push(this.targetLayer)));
e.isDefined(this.joinLayer)&&(a=k.indexOf(this.joinLayers,this.joinLayer),-1!==a?this._joinLayerSelect.addOption({value:this._toString(a),label:this.joinLayer.name}):(this._joinLayerSelect.addOption({value:this._toString(this.joinLayers.length-1),label:this.joinLayer.name}),this.joinLayers.push(this.joinLayer)));e.isDefined(this.targetLayers)&&0<this.targetLayers.length?k.forEach(this.targetLayers,function(a,d){this.targetLayer!==a&&this._targetLayerSelect.addOption({value:this._toString(d),label:a.name});
!e.isDefined(this.targetLayer)&&e.isDefined(this.targetLayers[d])&&this.set("targetLayer",this.targetLayers[d])},this):console.log("Please input an array of targetLayers, or set a specific targetLayer.");e.isDefined(this.joinLayers)&&0<this.joinLayers.length?k.forEach(this.joinLayers,function(a,d){this.joinLayer!==a&&this._joinLayerSelect.addOption({value:this._toString(d),label:a.name});!e.isDefined(this.joinLayer)&&e.isDefined(this.joinLayers[d])&&this.set("joinLayer",this.joinLayers[d])},this):
console.log("Please input an array of joinLayers, or set a specific joinLayer.");l.addReadyToUseLayerOption(this,[this._targetLayerSelect,this._joinLayerSelect]);m.set(this._chooseFolderRow,"display",!0===this.showSelectFolder?"block":"none");this.showSelectFolder&&this.getFolderStore().then(f.hitch(this,function(a){this.folderStore=a;l.setupFoldersUI({folderStore:this.folderStore,folderId:this.folderId,folderName:this.folderName,folderSelect:this._webMapFolderSelect,username:this.portalUser?this.portalUser.username:
""})}));m.set(this._showCreditsLink,"display",!0===this.showCredits?"block":"none");this._loadConnections();this._updateAnalysisLayerUI()},_handleTargetLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=!0,this._browsedlg.show()):"browselayers"===a?(this.showGeoAnalyticsParams&&(a=this._browseLyrsdlg.browseItems.get("query"),a.types.push('type:"Big Data File Share"'),
this._browseLyrsdlg.browseItems.set("query",a)),this._isAnalysisSelect=!0,this._browseLyrsdlg.show()):(this.set("targetLayer",this.targetLayers[a]),console.log(this.targetLayers),console.log(a),this._updateAnalysisLayerUI())},_toString:function(a){return a+""},_handleJoinLayerChange:function(a){"browse"===a?(this._analysisquery||(this._analysisquery=this._browsedlg.browseItems.get("query")),this._browsedlg.browseItems.set("query",this._analysisquery),this._isAnalysisSelect=!1,this._browsedlg.show()):
"browselayers"===a?(this.showGeoAnalyticsParams&&(a=this._browseLyrsdlg.browseItems.get("query"),a.types.push('type:"Big Data File Share"'),this._browseLyrsdlg.browseItems.set("query",a)),this._isAnalysisSelect=!1,this._browseLyrsdlg.show()):(this.set("joinLayer",this.joinLayers[a-1]),this._updateAnalysisLayerUI())},_handleJoinOperationChange:function(a){this._removeStatsRows();"JoinOneToOne"===a&&e.isDefined(this.joinLayer)&&e.isDefined(this.targetLayer)&&"_NOVALUE_"!==this._joinLayerSelect.get("value")?
(this._createStatsRow(),c.remove(this._summaryStatisticRow,"hide")):c.add(this._summaryStatisticRow,"hide");this.joinOperation=a},_handleSpatialCheckChange:function(a){c.toggle(this._spatialJoin,"selected");this.spatialJoin=c.contains(this._spatialJoin,"selected");e.isDefined(this.targetLayer)&&e.isDefined(this.joinLayer)&&this._repopulateSpatialTypes(this.targetLayer.geometryType,this.joinLayer.geometryType);this.spatialJoin||c.add(this._spatialDistanceRow,"hide");c.toggle(this._spatialRelationshipRow,
"hide");c.contains(this._spatialRelationshipRow,"hide")&&this._spatialDistanceInput.set("required",!1)},_handleSpatialRelationshipChange:function(a){this.spatialRelationship=a;"Near"===a?(this._spatialDistanceInput.set("required",!0),c.remove(this._spatialDistanceRow,"hide")):(c.add(this._spatialDistanceRow,"hide"),this._spatialDistanceInput.set("required",!1))},_handleSpatialDistanceChange:function(a){this.spatialDistance=a},_handleSpatialUnitChange:function(a){this.spatialUnit=a},_repopulateSpatialTypes:function(a,
b){this._spatialRelationshipSelect.removeOption(this._spatialRelationshipSelect.getOptions());var d;d={value:"Equals",label:this.i18n.equalsLabel};var c={value:"Intersects",label:this.i18n.intersectsLabel},h={value:"Contains",label:this.i18n.containsLabel},f={value:"Within",label:this.i18n.withinLabel},g={value:"Crosses",label:this.i18n.crossesLabel},e={value:"Touches",label:this.i18n.touchesLabel},l={value:"Overlaps",label:this.i18n.overlapsLabel},n={value:"Near",label:this.i18n.near};d={esriGeometryPoint:{esriGeometryPoint:[d,
c,h,f,l,n],esriGeometryPolyline:[c,f,e,n],esriGeometryPolygon:[c,f,e,n]},esriGeometryPolyline:{esriGeometryPoint:[c,h,e,n],esriGeometryPolyline:[d,c,h,f,g,e,l,n],esriGeometryPolygon:[c,f,g,e,n]},esriGeometryPolygon:{esriGeometryPoint:[c,h,e,n],esriGeometryPolyline:[c,h,g,e,n],esriGeometryPolygon:[d,c,h,f,e,l,n]}};this.spatialRelationship=d[a][b][0].value;k.forEach(d[a][b],function(a,b){this._spatialRelationshipSelect.addOption({value:a.value,label:a.label})},this)},_handleTemporalCheckChange:function(a){c.toggle(this._temporalJoin,
"selected");this.temporalJoin=c.contains(this._temporalJoin,"selected");if(e.isDefined(this.targetLayer)&&e.isDefined(this.joinLayer)){var b,d;b=l.isTimeInstantLayer(this.targetLayer)?"TimeInstant":"TimeInterval";d=l.isTimeInstantLayer(this.joinLayer)?"TimeInstant":"TimeInterval";this._repopulateTemporalTypes(b,d)}a||c.add(this._temporalDistanceRow,"hide");c.toggle(this._temporalRelationshipRow,"hide");c.contains(this._temporalRelationshipRow,"hide")&&this._temporalDistanceInput.set("required",!1)},
_handleTemporalRelationshipChange:function(a){this.temporalRelationship=a;"Near"===a?(this._temporalDistanceInput.set("required",!0),c.remove(this._temporalDistanceRow,"hide")):(c.add(this._temporalDistanceRow,"hide"),this._temporalDistanceInput.set("required",!1))},_handleTemporalDistanceChange:function(a){this.temporalDistance=a},_handleTemporalUnitChange:function(a){this.temporalUnit=a},_repopulateTemporalTypes:function(a,b){this._temporalRelationshipSelect.removeOption(this._temporalRelationshipSelect.getOptions());
var d,c={value:"Equals",label:this.i18n.equalsLabel},h={value:"Intersects",label:this.i18n.intersectsLabel},f={value:"During",label:this.i18n.duringLabel},e={value:"Contains",label:this.i18n.containsLabel},g={value:"Finishes",label:this.i18n.finishesLabel},l={value:"Finished By",label:this.i18n.finishedByLabel},n={value:"Meets",label:this.i18n.meetsLabel},m={value:"Met By",label:this.i18n.metByLabel},p={value:"Near",label:this.i18n.near},s={value:"Overlaps",label:this.i18n.overlapsLabel},t={value:"Overlapped By",
label:this.i18n.overlappedByLabel},q={value:"Starts",label:this.i18n.startsLabel},r={value:"Started By",label:this.i18n.startedByLabel};a&&b&&(d={TimeInstant:{TimeInstant:[c,h,p],TimeInterval:[h,f,g,q,p]},TimeInterval:{TimeInstant:[h,e,l,r,p],TimeInterval:[c,h,f,e,g,l,n,m,s,t,q,r,p]}});this.temporalRelationship=d[a][b][0].value;k.forEach(d[a][b],function(a,b){this._temporalRelationshipSelect.addOption({value:a.value,label:a.label})},this)},_handleAttributeCheckChange:function(a){c.toggle(this._attributeJoin,
"selected");this.attributeJoin=c.contains(this._attributeJoin,"selected");c.toggle(this._attributeRelationshipRow,"hide");!0===this.attributeJoin?this._createAttrJoinRow():this._removeAttrJoinRows()},_createAttrJoinRow:function(){var a,b,d,c,h;a=g.create("tr",{style:{height:"40px"}},this._attributeRelationshipRow,"before");d=g.create("td",{style:{width:"39%"}},a);c=g.create("td",{style:{width:"8%"}},a);b=g.create("td",{style:{width:"39%"}},a);h=new q({maxHeight:200,"class":"esriLeadingMargin1 esriTrailingMargin1 mediumInput esriVeryShortlabel",
style:{width:"90%",overflow:"hidden",tableLayout:"fixed"}},g.create("select",null,d));h.addOption({value:"",label:this.i18n.selectTargetField});k.forEach(this.targetLayer.fields,function(a,b){h.addOption({value:this._toString(b+1),label:a.name})},this);this.set("attributes",{selectWidget:h});h.set("targetLayer",this.targetLayer);h.set("joinLayer",this.joinLayer);c.innerHTML="\x3d";m.set(c,"text-align","center");b=new q({"class":"mediumInput esriLeadingMargin05 esriVeryShortlabel",style:{width:"90%",
overflow:"hidden",tableLayout:"fixed"}},g.create("select",null,b));b.addOption({value:"",label:this.i18n.selectJoinField});h.set("statisticSelect",b);p.connect(h,"onChange",this._handleAttrTargetChange);d=g.create("td",{"class":"shortTextInput removeTd",style:{display:"none",width:"10%",paddingTop:"1em"}},a);c=g.create("a",{title:this.i18n.remove,"class":"closeIcon statsRemove",innerHTML:"\x3cimg src\x3d'"+v.toUrl("./images/close.gif")+"' border\x3d'0''/\x3e"},d);p.connect(c,"onclick",f.hitch(this,
this._removeAttrJoinRow,a));this._attrJoinRows.push(a);1===this._attrJoinRows.length&&(h.set("required","true"),b.set("required","true"));a=g.create("td",{style:{width:"10%",display:"block"}},a);b.set("attributeSelect",h);b.set("removeTd",d);b.set("stylingTd",a);b.set("isnewRowAdded",!1);b.set("referenceWidget",this);b.watch("value",this._handleAttrJoinUpdate);this._currentJoinSelect=b;this._currentTargetSelect=h;return!0},_removeAttrJoinRow:function(a){k.forEach(t.findWidgets(a),function(a){a.destroyRecursive()});
g.destroy(a)},_removeAttrJoinRows:function(){k.forEach(this._attrJoinRows,this._removeAttrJoinRow,this);this._attrJoinRows=[]},_handleAttrTargetChange:function(a){var b,d,c;b=this.get("statisticSelect");k.forEach(b.options,function(a){""!==a.value&&b.removeOption(a)},this);""!==a&&(d=this.get("targetLayer").fields[a-1].type,k.forEach(this.get("joinLayer").fields,function(a,c){a.type===d&&b.addOption({value:c+1+"",label:a.name})},this),""!==b.get("value")&&!b.get("isnewRowAdded")&&(a=b.get("removeTd"),
c=b.get("stylingTd"),m.set(a,"display","block"),m.set(c,"display","none"),a=b.get("referenceWidget"),f.hitch(a,a._createAttrJoinRow()),b.set("isnewRowAdded",!0)))},_handleAttrJoinUpdate:function(a,b,d){this.get("attributeSelect")&&(a=this.get("attributeSelect"),""!==a.get("value")&&""!==d&&!this.get("isnewRowAdded")&&(d=this.get("removeTd"),m.set(d,"display","block"),d=this.get("referenceWidget"),f.hitch(d,d._createAttrJoinRow()),this.set("isnewRowAdded",!0)))},_createStatsRow:function(){var a,b,
d,c,h;a=g.create("tr",{style:{height:"40px"}},this._summaryStatisticRow,"before");b=g.create("td",{style:{width:"65%"}},a);d=new q({maxHeight:200,"class":"esriLeadingMargin1 mediumInput esriTrailingMargin025 attrSelect",style:{tableLayout:"fixed",overflowX:"hidden",width:"45%"}},g.create("select",null,b));l.addAttributeOptions({selectWidget:d,layer:this.joinLayer,allowStringType:!0});this.set("attributes",{selectWidget:d,joinLayer:this.joinLayer});b=new q({"class":"esriLeadingMargin1 mediumInput statsSelect",
style:{tableLayout:"fixed",overflowX:"hidden",width:"45%"}},g.create("select",null,b));l.addStatisticsOptions({selectWidget:b,showGeoAnalyticsParams:this.showGeoAnalyticsParams});d.set("statisticSelect",b);d.set("featureLayer",this.joinLayer);p.connect(d,"onChange",this._handleAttrSelectChange);h=g.create("td",{"class":"shortTextInput removeTd",style:{visibility:"hidden",maxWidth:"12px",paddingTop:"1em"}},a);c=g.create("a",{title:this.i18n.remove,"class":"closeIcon statsRemove",innerHTML:"\x3cimg src\x3d'"+
v.toUrl("./images/close.gif")+"' border\x3d'0''/\x3e"},h);p.connect(c,"onclick",f.hitch(this,this._removeStatsRow,a));this._statsRows.push(a);b.set("attributeSelect",d);b.set("removeTd",h);b.set("isnewRowAdded",!1);b.set("referenceWidget",this);b.addOption([{value:"0",label:this.i18n.statistic}]);b.watch("value",this._handleStatsValueUpdate);this._currentStatsSelect=b;this._currentAttrSelect=d;return!0},_removeStatsRow:function(a){k.forEach(t.findWidgets(a),function(a){a.destroyRecursive()});g.destroy(a)},
_removeStatsRows:function(){k.forEach(this._statsRows,this._removeStatsRow,this);this._statsRows=[]},_handleAttrSelectChange:function(a){var b;"0"!==a&&(b=this.get("statisticSelect"),b.get("referenceWidget"),(a=this.getOptions(a))&&a.type&&l.addStatisticsOptions({selectWidget:b,type:a.type,showGeoAnalyticsParams:!0}),!b.get("isnewRowAdded")&&("0"!==b.get("value")&&""!==b.get("value")&&"0"!==this.get("value")&&""!==this.get("value"))&&(a=b.get("removeTd"),m.set(a,"visibility","visible"),a=b.get("referenceWidget"),
f.hitch(a,a._createStatsRow()),b.set("isnewRowAdded",!0)))},_handleStatsValueUpdate:function(a,b,d){this.get("attributeSelect")&&(a=this.get("attributeSelect"),"0"!==a.get("value")&&("0"!==d&&""!==d&&""!==a.get("value"))&&!this.get("isnewRowAdded")&&(d=this.get("removeTd"),m.set(d,"visibility","visible"),d=this.get("referenceWidget"),f.hitch(d,d._createStatsRow()),this.set("isnewRowAdded",!0)))},_handleShowCreditsClick:function(a){var b={};a.preventDefault();this._form.validate()&&(b=this._buildJobParams(),
b.InputLayers=s.toJson(b.InputLayers),this.getCreditsEstimate(this.toolName,b).then(f.hitch(this,function(a){this._usageForm.set("content",a);this._usageDialog.show()})))},_buildJobParams:function(){var a={};a.targetLayer=l.constructAnalysisInputLyrObj(this.targetLayer,!0);a.joinLayer=l.constructAnalysisInputLyrObj(this.joinLayer,!0);a.joinOperation=this.get("joinOperation");this.spatialJoin&&(a.spatialRelationship=this._spatialRelationshipSelect.get("value"),"Near"===this._spatialRelationshipSelect.get("value")&&
(a.spatialNearDistance=parseFloat(this.get("spatialDistance")),a.spatialNearDistanceUnit=this._spatialUnitSelect.get("value")));this.temporalJoin&&(a.temporalRelationship=this._temporalRelationshipSelect.get("value"),"Near"===this._temporalRelationshipSelect.get("value")&&(a.temporalNearDistance=parseFloat(this.get("temporalDistance")),a.temporalNearDistanceUnit=this._temporalUnitSelect.get("value")));if(this.attributeJoin){var b="",d=0;k.forEach(this._attrJoinRows,function(a,c,f){var e="",g=0;k.forEach(a.children,
function(a,b){if(3>b){if(1!==b)var d=t.byNode(a.children[0]).get("value");0===b&&""!==d&&(g++,e+="target."+a.textContent);1===b&&(g++,e+=" "+a.textContent+" ");2===b&&""!==d&&(g++,e+="join."+a.textContent)}},this);3===g&&(0!==d&&(b+=" and "),b+=e,d++)},this);a.attributeRelationship=b}"JoinOneToOne"===this._joinOperation.get("value")&&2<=this._statsRows.length&&(a.summaryFields=[],a.summaryFields=s.toJson(this.get("summaryFields")));a.OutputName=s.toJson({serviceProperties:{name:this._outputName.get("value")}});
return a},_handleSaveBtnClick:function(){var a={},b={};this._form.validate()&&("_NOVALUE_"===this._joinLayerSelect.get("value")?this._showMessages(this.i18n.joinLayerErrorMsg):"_NOVALUE_"===this._joinOperation.get("value")?this._showMessages(this.i18n.joinOpErrorMsg):!this.attributeJoin&&!this.temporalJoin&&!this.spatialJoin?this._showMessages(this.i18n.joinTypesErrorMsg):(this._handleCloseMsg(),this._saveBtn.set("disabled",!0),a=this._buildJobParams(),b.jobParams=a,b.itemParams={description:this.i18n.itemDescription,
tags:this.i18n.itemTags,snippet:this.i18n.itemSnippet},this.showSelectFolder&&(b.itemParams.folder=this.get("folderId")),this.showChooseExtent&&this._useExtentCheck.get("checked")&&(a.Context=s.toJson({extent:this.map.extent._normalize(!0)})),this.showGeoAnalyticsParams&&this._datastoreSelect&&(b.isSpatioTemporalDataStore="spatialtemporal"===this._datastoreSelect.get("value")),console.log(b),this.execute(b)))},_setTargetLayerAttr:function(a){this._set("targetLayer",a||null)},_setTargetLayersAttr:function(a){this._set("targetLayers",
a||[])},_setJoinLayerAttr:function(a){this._set("joinLayer",a||null)},_setJoinLayersAttr:function(a){this._set("joinLayers",a||[])},_handleBrowseItemsSelect:function(a){a&&a.selection&&l.addAnalysisReadyLayer({item:a.selection,layers:this._isAnalysisSelect?this.targetLayers:this.joinLayers,layersSelect:this._isAnalysisSelect?this._targetLayerSelect:this._joinLayerSelect,posIncrement:this._isAnalysisSelect?0:1,browseDialog:a.dialog||this._browsedlg,widget:this}).always(this._isAnalysisSelect?this._handleTargetLayerChange(this._targetLayerSelect.get("value")):
this._handleJoinLayerChange(this._joinLayerSelect.get("value")))},_save:function(){},_onClose:function(a){a&&(this._save(),this.emit("save",{save:!0}));this.emit("close",{save:a})},_loadConnections:function(){this.on("start",f.hitch(this,"_onClose",!0));this._connect(this._closeBtn,"onclick",f.hitch(this,"_onClose",!1));this.showGeoAnalyticsParams&&(this._spatialJoinHandle=u.pausable(this._spatialJoin,"click",f.hitch(this,this._handleSpatialCheckChange)),this._temporalJoinHandle=u.pausable(this._temporalJoin,
"click",f.hitch(this,this._handleTemporalCheckChange)),this._attributeJoinHandle=u.pausable(this._attributeJoin,"click",f.hitch(this,this._handleAttributeCheckChange)),this.own(this._spatialJoinHandle,this._temporalJoinHandle,this._attributeJoinHandle))},_connect:function(a,b,d){this._pbConnects.push(p.connect(a,b,d))},_updateAnalysisLayerUI:function(a){if(this.targetLayer){a=this._joinLayerSelect.getOptions();var b=!1,b=!1;this._isAnalysisSelect&&(b=k.some(a,function(a,b){return a.label===this.targetLayer.title},
this),b||(b=this.showBrowseLayers&&this.showReadyToUseLayers?3:!this.showBrowseLayers&&this.showReadyToUseLayers?2:this.showBrowseLayers&&!this.showReadyToUseLayers?2:0,a=a.splice(a.length-b,b),b=k.some(this.joinLayers,function(a){return a&&a.analysisReady&&this.targetLayer.analysisReady&&a.itemId===this.targetLayer.itemId},this),b||(0===this.joinLayers.length&&(this.joinLayer=this.targetLayer),this.joinLayers.push(this.targetLayer)),a.unshift({value:this.joinLayers.length,label:this.targetLayer.title}),
this._joinLayerSelect.addOption(a)))}this.temporalJoin=this.attributeJoin=this.spatialJoin=!1;this._removeStatsRows();this._removeAttrJoinRows();c.contains(this._spatialJoin,"selected")&&(c.remove(this._spatialJoin,"selected"),c.add(this._spatialDistanceRow,"hide"),c.add(this._spatialRelationshipRow,"hide"),this._spatialRelationshipSelect.reset(),this._spatialDistanceInput.set("required",!1));c.contains(this._temporalJoin,"selected")&&(c.remove(this._temporalJoin,"selected"),c.add(this._temporalRelationshipRow,
"hide"),c.add(this._temporalDistanceRow,"hide"),this._temporalDistanceInput.set("required",!1));c.contains(this._attributeJoin,"selected")&&(c.remove(this._attributeJoin,"selected"),c.add(this._attributeRelationshipRow,"hide"));e.isDefined(this.targetLayer)&&e.isDefined(this.joinLayer)&&"_NOVALUE_"!==this._joinLayerSelect.get("value")?("JoinOneToOne"===this._joinOperation.value&&this._createStatsRow(),a=!(l.isTimeEnabled(this.joinLayer)&&l.isTimeEnabled(this.targetLayer)),c.remove(this._spatialJoin,
"disabled"),c.remove(this._attributeJoin,"disabled"),c.toggle(this._temporalJoin,"disabled",a),c.remove(this._spatialJoinLabel,"esriAnalysisTextDisabled"),c.remove(this._attrJoinLabel,"esriAnalysisTextDisabled"),c.toggle(this._temporalJoinLabel,"esriAnalysisTextDisabled",a),this._attributeJoinHandle.resume(),this._spatialJoinHandle.resume(),a?this._temporalJoinHandle.pause():this._temporalJoinHandle.resume()):(c.add(this._spatialJoin,"disabled"),c.add(this._attributeJoin,"disabled"),c.add(this._temporalJoin,
"disabled"),c.add(this._spatialJoinLabel,"esriAnalysisTextDisabled"),c.add(this._attrJoinLabel,"esriAnalysisTextDisabled"),c.add(this._temporalJoinLabel,"esriAnalysisTextDisabled"),this._attributeJoinHandle.pause(),this._spatialJoinHandle.pause(),this._temporalJoinHandle.pause())},_setSummaryFieldsAttr:function(a){this.summaryFields=a},_getSummaryFieldsAttr:function(){var a=[],b,d;C(".statsSelect",this.domNode).forEach(function(c,e){b=t.byNode(c);d=b.get("attributeSelect");if("0"!==d.get("value")&&
"0"!==b.get("value")&&""!==d.get("value")&&""!==b.get("value")){var f={};f.statisticType=b.get("value");f.onStatisticField=d.get("value");a.push(f)}});return a},_setAnalysisGpServerAttr:function(a){a&&(this.analysisGpServer=a,this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName))},_showMessages:function(a){B.set(this._bodyNode,"innerHTML",a);w.fadeIn({node:this._errorMessagePane,easing:x.quadIn,onEnd:f.hitch(this,function(){m.set(this._errorMessagePane,{display:""})})}).play()},_handleCloseMsg:function(a){a&&
a.preventDefault();w.fadeOut({node:this._errorMessagePane,easing:x.quadOut,onEnd:f.hitch(this,function(){m.set(this._errorMessagePane,{display:"none"})})}).play()}});A("extend-esri")&&f.setObject("dijit.analysis.JoinFeatures",r,I);return r});