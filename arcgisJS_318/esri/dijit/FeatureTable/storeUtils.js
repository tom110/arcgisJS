// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.18/esri/copyright.txt for details.
//>>built
define("esri/dijit/FeatureTable/storeUtils","dojo/_base/array dojo/_base/lang dojo/store/Cache dojo/store/Memory dojo/store/Observable dojo/store/util/QueryResults ../FeatureLayerQueryStore".split(" "),function(n,v,p,m,q,r,s){return{generateMemoryStore:function(a){var c=a.idProperty;a=n.map(a.features,function(a){return a.attributes});return new q(new m({data:a,idProperty:c}))},generateCacheStore:function(a){var c=a.grid,h=a.layer,b=a.ids||null,c=b&&b.length?b.length:c.featureCount,l=a.orderByFields,
k=a.where||null,t=a.batchCount,u=a.getAttachments||!1,g=a.getRelatedRecords||!1;a=new m;h=new s({layer:h,objectIds:b,totalCount:c,batchCount:t,where:k||"1\x3d1",orderByFields:l,getAttachments:u,getRelatedRecords:g});return new p(h,a)},generateSort:function(a,c,h,b){var l=function(){return function(b,c){var g=k[0],d=parseInt(g.columnId,10),f=g.attribute,e;("esriAttachments"===f||"esriRelatedRecords"===g.fieldType)&&"undefined"!==typeof d?(e=a.columns[d].get(b),d=a.columns[d].get(c)):(e=b[f]&&b[f].toLowerCase?
b[f].toLowerCase():b[f],d=c[f]&&c[f].toLowerCase?c[f].toLowerCase():c[f]);e=null!==e?e.valueOf():e;d=null!==d?d.valueOf():d;return null===e&&null!==d?g.descending?-1:1:null!==e&&null===d?g.descending?1:-1:e===d?0:(e>d?1:-1)*(g.descending?-1:1)}},k=b&&b.sort;k&&"function"!==typeof k&&(b.sort=l());return new r(c.queryEngine(h,b)(c.data))}}});