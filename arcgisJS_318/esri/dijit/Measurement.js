// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.18/esri/copyright.txt for details.
//>>built
require({cache:{"dojo/debounce":function(){define([],function(){return function(q,n){var k;return function(){k&&clearTimeout(k);var m=this,d=arguments;k=setTimeout(function(){q.apply(m,d)},n)}}})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(q,n,k,m,d,f,g,c,a,h,e,x,l){function y(){}
function t(b){return function(p,a,e,h){return p&&"string"==typeof a&&p[a]==y?p.on(a.substring(2).toLowerCase(),g.hitch(e,h)):b.apply(k,arguments)}}q.around(k,"connect",t);f.connect&&q.around(f,"connect",t);q=m("dijit._Widget",[e,x,l],{onClick:y,onDblClick:y,onKeyDown:y,onKeyPress:y,onKeyUp:y,onMouseDown:y,onMouseMove:y,onMouseOut:y,onMouseOver:y,onMouseLeave:y,onMouseEnter:y,onMouseUp:y,constructor:function(b){this._toConnect={};for(var p in b)this[p]===y&&(this._toConnect[p.replace(/^on/,"").toLowerCase()]=
b[p],delete b[p])},postCreate:function(){this.inherited(arguments);for(var b in this._toConnect)this.on(b,this._toConnect[b]);delete this._toConnect},on:function(b,p){return this[this._onMap(b)]===y?k.connect(this.domNode,b.toLowerCase(),this,p):this.inherited(arguments)},_setFocusedAttr:function(b){this._focused=b;this._set("focused",b)},setAttribute:function(b,p){f.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(b,p)},attr:function(b,
p){return 2<=arguments.length||"object"===typeof b?this.set.apply(this,arguments):this.get(b)},getDescendants:function(){f.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?c("[widgetId]",this.containerNode).map(h.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});d("dijit-legacy-requires")&&a(0,function(){require(["dijit/_base"])});return q})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(q,n,k,m,d,f,g,c,a,h,e,x,l,y,t,b,p,w,u,s,v,H,r){function K(b){return function(p){c[p?"set":"remove"](this.domNode,b,p);this._set(b,p)}}l.add("dijit-legacy-requires",!y.isAsync);l.add("dojo-bidi",!1);l("dijit-legacy-requires")&&p(0,function(){q(["dijit/_base/manager"])});var E={};m=f("dijit._WidgetBase",[w,v],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:K("lang"),dir:"",_setDirAttr:K("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(b){this._set("ownerDocument",b)},attributeMap:{},_blankGif:m.blankGif||q.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var b=this.constructor;if(!b._setterAttrs){var p=b.prototype,a=b._setterAttrs=[],b=b._onMap={},e;for(e in p.attributeMap)a.push(e);for(e in p)/^on/.test(e)&&(b[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+
e.substr(5,e.length-9),(!p.attributeMap||!(e in p.attributeMap))&&a.push(e))}},postscript:function(b,p){this.create(b,p)},create:function(b,p){this._introspect();this.srcNodeRef=g.byId(p);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&(this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id)&&(this.id=this.srcNodeRef.id);b&&(this.params=b,t.mixin(this,b));this.postMixInProperties();this.id||(this.id=r.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);
this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=s.body(this.ownerDocument);r.add(this);this.buildRendering();var a;if(this.domNode){this._applyAttributes();var e=this.srcNodeRef;e&&(e.parentNode&&this.domNode!==e)&&(e.parentNode.replaceChild(this.domNode,e),a=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();a&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var b={},p;for(p in this.params||
{})b[p]=this._get(p);n.forEach(this.constructor._setterAttrs,function(p){if(!(p in b)){var a=this._get(p);a&&this.set(p,a)}},this);for(p in b)this.set(p,b[p])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var b=this.baseClass.split(" ");this.isLeftToRight()||(b=b.concat(n.map(b,function(b){return b+"Rtl"})));a.add(this.domNode,b)}},postCreate:function(){},startup:function(){this._started||
(this._started=!0,n.forEach(this.getChildren(),function(b){!b._started&&(!b._destroyed&&t.isFunction(b.startup))&&(b.startup(),b._started=!0)}))},destroyRecursive:function(b){this._beingDestroyed=!0;this.destroyDescendants(b);this.destroy(b)},destroy:function(b){function p(a){a.destroyRecursive?a.destroyRecursive(b):a.destroy&&a.destroy(b)}this._beingDestroyed=!0;this.uninitialize();n.forEach(this._connects,t.hitch(this,"disconnect"));n.forEach(this._supportingWidgets,p);this.domNode&&n.forEach(r.findWidgets(this.domNode,
this.containerNode),p);this.destroyRendering(b);r.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?c.remove(this.domNode,"widgetId"):h.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||h.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(b){n.forEach(this.getChildren(),function(p){p.destroyRecursive&&p.destroyRecursive(b)})},uninitialize:function(){return!1},_setStyleAttr:function(b){var p=
this.domNode;t.isObject(b)?x.set(p,b):p.style.cssText=p.style.cssText?p.style.cssText+("; "+b):b;this._set("style",b)},_attrToDom:function(b,p,e){e=3<=arguments.length?e:this.attributeMap[b];n.forEach(t.isArray(e)?e:[e],function(e){var w=this[e.node||e||"domNode"];switch(e.type||"attribute"){case "attribute":t.isFunction(p)&&(p=t.hitch(this,p));e=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(b)?b.toLowerCase():b;w.tagName?c.set(w,e,p):w.set(e,p);break;case "innerText":w.innerHTML="";w.appendChild(this.ownerDocument.createTextNode(p));
break;case "innerHTML":w.innerHTML=p;break;case "class":a.replace(w,p,this[b]);break;case "toggleClass":a.toggle(w,e.className||b,p)}},this)},get:function(b){var p=this._getAttrNames(b);return this[p.g]?this[p.g]():this._get(b)},set:function(b,p){if("object"===typeof b){for(var a in b)this.set(a,b[a]);return this}a=this._getAttrNames(b);var e=this[a.s];if(t.isFunction(e))var w=e.apply(this,Array.prototype.slice.call(arguments,1));else{var e=this.focusNode&&!t.isFunction(this.focusNode)?"focusNode":
"domNode",u=this[e]&&this[e].tagName,h;if(h=u)if(!(h=E[u])){h=this[e];var l={},c;for(c in h)l[c.toLowerCase()]=!0;h=E[u]=l}c=h;a=b in this.attributeMap?this.attributeMap[b]:a.s in this?this[a.s]:c&&a.l in c&&"function"!=typeof p||/^aria-|^data-|^role$/.test(b)?e:null;null!=a&&this._attrToDom(b,p,a);this._set(b,p)}return w||this},_attrPairNames:{},_getAttrNames:function(b){var p=this._attrPairNames;if(p[b])return p[b];var a=b.replace(/^[a-z]|-[a-zA-Z]/g,function(b){return b.charAt(b.length-1).toUpperCase()});
return p[b]={n:b+"Node",s:"_set"+a+"Attr",g:"_get"+a+"Attr",l:a.toLowerCase()}},_set:function(b,p){var a=this[b];this[b]=p;if(this._created&&!(a===p||a!==a&&p!==p))this._watchCallbacks&&this._watchCallbacks(b,a,p),this.emit("attrmodified-"+b,{detail:{prevValue:a,newValue:p}})},_get:function(b){return this[b]},emit:function(p,a,e){a=a||{};void 0===a.bubbles&&(a.bubbles=!0);void 0===a.cancelable&&(a.cancelable=!0);a.detail||(a.detail={});a.detail.widget=this;var w,u=this["on"+p];u&&(w=u.apply(this,
e?e:[a]));this._started&&!this._beingDestroyed&&b.emit(this.domNode,p.toLowerCase(),a);return w},on:function(p,a){var e=this._onMap(p);return e?k.after(this,e,a,!0):this.own(b(this.domNode,p,a))[0]},_onMap:function(b){var p=this.constructor,a=p._onMap;if(!a){var a=p._onMap={},e;for(e in p.prototype)/^on/.test(e)&&(a[e.replace(/^on/,"").toLowerCase()]=e)}return a["string"==typeof b&&b.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?
r.findWidgets(this.containerNode):[]},getParent:function(){return r.getEnclosingWidget(this.domNode.parentNode)},connect:function(b,p,a){return this.own(d.connect(b,p,this,a))[0]},disconnect:function(b){b.remove()},subscribe:function(b,p){return this.own(u.subscribe(b,t.hitch(this,p)))[0]},unsubscribe:function(b){b.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():e.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=x.get(this.domNode,"display")},
placeAt:function(b,p){var a=!b.tagName&&r.byId(b);a&&a.addChild&&(!p||"number"===typeof p)?a.addChild(this,p):(a=a&&"domNode"in a?a.containerNode&&!/after|before|replace/.test(p||"")?a.containerNode:a.domNode:g.byId(b,this.ownerDocument),h.place(this.domNode,a,p),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(b,p){var a=setTimeout(t.hitch(this,function(){a&&(a=null,this._destroyed||t.hitch(this,b)())}),p||0);return{remove:function(){a&&(clearTimeout(a),
a=null);return null}}}});l("dojo-bidi")&&m.extend(H);return m})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(q,n,k){return k("dijit.Destroyable",null,{destroy:function(m){this._destroyed=!0},own:function(){var m=["destroyRecursive","destroy","remove"];q.forEach(arguments,function(d){function f(){c.remove();q.forEach(a,function(a){a.remove()})}var g,c=n.before(this,"destroy",function(a){d[g](a)}),a=[];d.then?(g="cancel",d.then(f,f)):q.forEach(m,
function(h){"function"===typeof d[h]&&(g||(g=h),a.push(n.after(d,h,f,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(q,n,k,m,d,f){q=m("dijit._OnDijitClickMixin",null,{connect:function(d,c,a){return this.inherited(arguments,[d,"ondijitclick"==c?f:c,a])}});q.a11yclick=f;return q})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],
function(q,n,k,m){m.extend(n,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return k("dijit._FocusMixin",null,{_focusManager:q})})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(q,n,k,m){k(function(){n("highcontrast")&&q.add(m.body(),"dijit_a11y")});return n})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),
function(q,n,k,m,d,f,g){d.add("highcontrast",function(){var c=g.doc.createElement("div");try{c.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(n.blankGif||q.toUrl("./resources/blank.gif"))+'");';g.body().appendChild(c);var a=m.getComputedStyle(c),h=a.backgroundImage;return a.borderTopColor==a.borderRightColor||h&&("none"==h||"url(invalid-url:)"==h)}catch(e){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+
e.toString()),!1}finally{8>=d("ie")?c.outerHTML="":g.body().removeChild(c)}});f(function(){d("highcontrast")&&k.add(g.body(),"dj_a11y")});return d})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(q,n,k,m,d,f,g,c,a,h,e,x,l,y,t,b){e("dijit-legacy-requires")&&b(0,function(){q(["dijit/MenuItem",
"dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return k("dijit.Menu",t,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):n.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(b){return l.get(this._iframeContentDocument(b))||this._iframeContentDocument(b).__parent__||
b.name&&document.frames[b.name]||null},_iframeContentDocument:function(b){return b.contentDocument||b.contentWindow&&b.contentWindow.document||b.name&&document.frames[b.name]&&document.frames[b.name].document||null},bindDomNode:function(b){b=m.byId(b,this.ownerDocument);var e;if("iframe"==b.tagName.toLowerCase()){var u=b;e=this._iframeContentWindow(u);e=x.body(e.document)}else e=b==x.body(this.ownerDocument)?this.ownerDocument.documentElement:b;var l={node:b,iframe:u};d.set(b,"_dijitMenu"+this.id,
this._bindings.push(l));var v=a.hitch(this,function(b){var p=this.selector,a=p?function(b){return h.selector(p,b)}:function(b){return b},e=this;return[h(b,a(this.leftClickToOpen?"click":"contextmenu"),function(b){b.stopPropagation();b.preventDefault();(new Date).getTime()<e._lastKeyDown+500||e._scheduleOpen(this,u,{x:b.pageX,y:b.pageY},b.target)}),h(b,a("keydown"),function(b){if(93==b.keyCode||b.shiftKey&&b.keyCode==c.F10||e.leftClickToOpen&&b.keyCode==c.SPACE)b.stopPropagation(),b.preventDefault(),
e._scheduleOpen(this,u,null,b.target),e._lastKeyDown=(new Date).getTime()})]});l.connects=e?v(e):[];u&&(l.onloadHandler=a.hitch(this,function(){var b=this._iframeContentWindow(u),b=x.body(b.document);l.connects=v(b)}),u.addEventListener?u.addEventListener("load",l.onloadHandler,!1):u.attachEvent("onload",l.onloadHandler))},unBindDomNode:function(b){var a;try{a=m.byId(b,this.ownerDocument)}catch(e){return}b="_dijitMenu"+this.id;if(a&&d.has(a,b)){for(var l=d.get(a,b)-1,h=this._bindings[l],c;c=h.connects.pop();)c.remove();
(c=h.iframe)&&(c.removeEventListener?c.removeEventListener("load",h.onloadHandler,!1):c.detachEvent("onload",h.onloadHandler));d.remove(a,b);delete this._bindings[l]}},_scheduleOpen:function(b,a,e,l){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:l,delegatedTarget:b,iframe:a,coords:e})},1))},_openMyself:function(b){function a(){k.refocus&&n&&n.focus();y.close(k)}var u=b.target,l=b.iframe,h=b.coords,c=!h;this.currentTarget=b.delegatedTarget;
if(h){if(l){b=f.position(l,!0);var u=this._iframeContentWindow(l),u=f.docScroll(u.document),r=g.getComputedStyle(l),d=g.toPixelValue,x=(e("ie")&&e("quirks")?0:d(l,r.paddingLeft))+(e("ie")&&e("quirks")?d(l,r.borderLeftWidth):0),l=(e("ie")&&e("quirks")?0:d(l,r.paddingTop))+(e("ie")&&e("quirks")?d(l,r.borderTopWidth):0);h.x+=b.x+x-u.x;h.y+=b.y+l-u.y}}else h=f.position(u,!0),h.x+=10,h.y+=10;var k=this,l=this._focusManager.get("prevNode");b=this._focusManager.get("curNode");var n=!b||m.isDescendant(b,
this.domNode)?l:b;y.open({popup:this,x:h.x,y:h.y,onExecute:a,onCancel:a,orient:this.isLeftToRight()?"L":"R"});this.focus();c||this.defer(function(){this._cleanUp(!0)});this._onBlur=function(){this.inherited("_onBlur",arguments);y.close(this)}},destroy:function(){n.forEach(this._bindings,function(b){b&&this.unBindDomNode(b.node)},this);this.inherited(arguments)}})})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),
function(q,n,k,m,d,f,g,c,a,h,e,x,l,y,t,b){function p(){this._popupWrapper&&(f.destroy(this._popupWrapper),delete this._popupWrapper)}k=k(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var b=this._firstAroundPosition,a=g.position(this._firstAroundNode,!0),p=a.x-b.x,b=a.y-b.y;if(p||b){this._firstAroundPosition=a;for(a=0;a<this._stack.length;a++){var l=this._stack[a].wrapper.style;l.top=parseFloat(l.top)+b+"px";"auto"==l.right?l.left=parseFloat(l.left)+
p+"px":l.right=parseFloat(l.right)-p+"px"}}this._aroundMoveListener=setTimeout(e.hitch(this,"_repositionAll"),p||b?10:50)}},_createWrapper:function(b){var a=b._popupWrapper,e=b.domNode;a||(a=f.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":b["aria-label"]||b.label||b.name||b.id},b.ownerDocumentBody),a.appendChild(e),e=e.style,e.display="",e.visibility="",e.position="",e.top="0px",b._popupWrapper=a,n.after(b,"destroy",p,!0),"ontouchend"in document&&x(a,"touchend",
function(b){/^(input|button|textarea)$/i.test(b.target.tagName)||b.preventDefault()}),a.dojoClick=!0);return a},moveOffScreen:function(b){var a=this._createWrapper(b);b=g.isBodyLtr(b.ownerDocument);var p={visibility:"hidden",top:"-9999px",display:""};p[b?"left":"right"]="-9999px";p[b?"right":"left"]="auto";c.set(a,p);return a},hide:function(b){var a=this._createWrapper(b);c.set(a,{display:"none",height:"auto",overflowY:"visible",border:""});b=b.domNode;"_originalStyle"in b&&(b.style.cssText=b._originalStyle)},
getTopPopup:function(){for(var b=this._stack,a=b.length-1;0<a&&b[a].parent===b[a-1].widget;a--);return b[a]},open:function(b){for(var p=this._stack,s=b.popup,v=s.domNode,H=b.orient||["below","below-alt","above","above-alt"],r=b.parent?b.parent.isLeftToRight():g.isBodyLtr(s.ownerDocument),f=b.around,k=b.around&&b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;p.length&&(!b.parent||!m.isDescendant(b.parent.domNode,p[p.length-1].widget.domNode));)this.close(p[p.length-1].widget);var n=this.moveOffScreen(s);
s.startup&&!s._started&&s.startup();var q,L=g.position(v);if("maxHeight"in b&&-1!=b.maxHeight)q=b.maxHeight||Infinity;else{q=t.getEffectiveBox(this.ownerDocument);var O=f?g.position(f,!1):{y:b.y-(b.padding||0),h:2*(b.padding||0)};q=Math.floor(Math.max(O.y,q.h-(O.y+O.h)))}L.h>q&&(L=c.getComputedStyle(v),c.set(n,{overflowY:"scroll",height:q+"px",border:L.borderLeftWidth+" "+L.borderLeftStyle+" "+L.borderLeftColor}),v._originalStyle=v.style.cssText,v.style.border="none");d.set(n,{id:k,style:{zIndex:this._beginZIndex+
p.length},"class":"dijitPopup "+(s.baseClass||s["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:b.parent?b.parent.id:""});0==p.length&&f&&(this._firstAroundNode=f,this._firstAroundPosition=g.position(f,!0),this._aroundMoveListener=setTimeout(e.hitch(this,"_repositionAll"),50));a("config-bgIframe")&&!s.bgIframe&&(s.bgIframe=new y(n));k=s.orient?e.hitch(s,"orient"):null;H=f?l.around(n,f,H,r,k):l.at(n,b,"R"==H?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],b.padding,k);n.style.visibility="visible";
v.style.visibility="visible";v=[];v.push(x(n,"keydown",e.hitch(this,function(a){if(a.keyCode==h.ESCAPE&&b.onCancel)a.stopPropagation(),a.preventDefault(),b.onCancel();else if(a.keyCode==h.TAB&&(a.stopPropagation(),a.preventDefault(),(a=this.getTopPopup())&&a.onCancel))a.onCancel()})));s.onCancel&&b.onCancel&&v.push(s.on("cancel",b.onCancel));v.push(s.on(s.onExecute?"execute":"change",e.hitch(this,function(){var b=this.getTopPopup();if(b&&b.onExecute)b.onExecute()})));p.push({widget:s,wrapper:n,parent:b.parent,
onExecute:b.onExecute,onCancel:b.onCancel,onClose:b.onClose,handlers:v});if(s.onOpen)s.onOpen(H);return H},close:function(b){for(var a=this._stack;b&&q.some(a,function(a){return a.widget==b})||!b&&a.length;){var p=a.pop(),e=p.widget,l=p.onClose;e.bgIframe&&(e.bgIframe.destroy(),delete e.bgIframe);if(e.onClose)e.onClose();for(var h;h=p.handlers.pop();)h.remove();e&&e.domNode&&this.hide(e);l&&l()}0==a.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=
this._aroundMoveListener=null)}});return b.popup=new k})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(q,n,k,m,d,f,g){function c(a,e,c,l){var g=f.getEffectiveBox(a.ownerDocument);(!a.parentNode||"body"!=String(a.parentNode.tagName).toLowerCase())&&d.body(a.ownerDocument).appendChild(a);var m=null;q.some(e,function(b){var p=b.corner,e=b.pos,d=0,f={w:{L:g.l+g.w-e.x,R:e.x-g.l,M:g.w}[p.charAt(1)],
h:{T:g.t+g.h-e.y,B:e.y-g.t,M:g.h}[p.charAt(0)]},r=a.style;r.left=r.right="auto";c&&(d=c(a,b.aroundCorner,p,f,l),d="undefined"==typeof d?0:d);var k=a.style,q=k.display,J=k.visibility;"none"==k.display&&(k.visibility="hidden",k.display="");r=n.position(a);k.display=q;k.visibility=J;q={L:e.x,R:e.x-r.w,M:Math.max(g.l,Math.min(g.l+g.w,e.x+(r.w>>1))-r.w)}[p.charAt(1)];J={T:e.y,B:e.y-r.h,M:Math.max(g.t,Math.min(g.t+g.h,e.y+(r.h>>1))-r.h)}[p.charAt(0)];e=Math.max(g.l,q);k=Math.max(g.t,J);q=Math.min(g.l+g.w,
q+r.w);J=Math.min(g.t+g.h,J+r.h);q-=e;J-=k;d+=r.w-q+(r.h-J);if(null==m||d<m.overflow)m={corner:p,aroundCorner:b.aroundCorner,x:e,y:k,w:q,h:J,overflow:d,spaceAvailable:f};return!d});m.overflow&&c&&c(a,m.aroundCorner,m.corner,m.spaceAvailable,l);e=m.y;var b=m.x,p=d.body(a.ownerDocument);/relative|absolute/.test(k.get(p,"position"))&&(e-=k.get(p,"marginTop"),b-=k.get(p,"marginLeft"));p=a.style;p.top=e+"px";p.left=b+"px";p.right="auto";return m}var a={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return g.place={at:function(h,
e,d,l,g){d=q.map(d,function(h){var b={corner:h,aroundCorner:a[h],pos:{x:e.x,y:e.y}};l&&(b.pos.x+="L"==h.charAt(1)?l.x:-l.x,b.pos.y+="T"==h.charAt(0)?l.y:-l.y);return b});return c(h,d,g)},around:function(a,e,d,l,g){function f(b,a){J.push({aroundCorner:b,corner:a,pos:{x:{L:H,R:H+K,M:H+(K>>1)}[b.charAt(1)],y:{T:r,B:r+E,M:r+(E>>1)}[b.charAt(0)]}})}var b;if("string"==typeof e||"offsetWidth"in e||"ownerSVGElement"in e){if(b=n.position(e,!0),/^(above|below)/.test(d[0])){var p=n.getBorderExtents(e),w=e.firstChild?
n.getBorderExtents(e.firstChild):{t:0,l:0,b:0,r:0},u=n.getBorderExtents(a),s=a.firstChild?n.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0};b.y+=Math.min(p.t+w.t,u.t+s.t);b.h-=Math.min(p.t+w.t,u.t+s.t)+Math.min(p.b+w.b,u.b+s.b)}}else b=e;if(e.parentNode){p="absolute"==k.getComputedStyle(e).position;for(e=e.parentNode;e&&1==e.nodeType&&"BODY"!=e.nodeName;){w=n.position(e,!0);u=k.getComputedStyle(e);/relative|absolute/.test(u.position)&&(p=!1);if(!p&&/hidden|auto|scroll/.test(u.overflow)){var s=Math.min(b.y+
b.h,w.y+w.h),v=Math.min(b.x+b.w,w.x+w.w);b.x=Math.max(b.x,w.x);b.y=Math.max(b.y,w.y);b.h=s-b.y;b.w=v-b.x}"absolute"==u.position&&(p=!0);e=e.parentNode}}var H=b.x,r=b.y,K="w"in b?b.w:b.w=b.width,E="h"in b?b.h:(m.deprecated("place.around: dijit/place.__Rectangle: { x:"+H+", y:"+r+", height:"+b.height+", width:"+K+" } has been deprecated.  Please use { x:"+H+", y:"+r+", h:"+b.height+", w:"+K+" }","","2.0"),b.h=b.height),J=[];q.forEach(d,function(b){var a=l;switch(b){case "above-centered":f("TM","BM");
break;case "below-centered":f("BM","TM");break;case "after-centered":a=!a;case "before-centered":f(a?"ML":"MR",a?"MR":"ML");break;case "after":a=!a;case "before":f(a?"TL":"TR",a?"TR":"TL");f(a?"BL":"BR",a?"BR":"BL");break;case "below-alt":a=!a;case "below":f(a?"BL":"BR",a?"TL":"TR");f(a?"BR":"BL",a?"TR":"TL");break;case "above-alt":a=!a;case "above":f(a?"TL":"TR",a?"BL":"BR");f(a?"TR":"TL",a?"BR":"BL");break;default:f(b.aroundCorner,b.corner)}});a=c(a,J,g,{w:K,h:E});a.aroundNodePos=b;return a}}})},
"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(q,n,k,m,d){var f=new q,g;k(function(){var c=d.getBox();f._rlh=n(window,"resize",function(){var a=d.getBox();c.h==a.h&&c.w==a.w||(c=a,f.emit("resize"))});if(8==m("ie")){var a=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=a&&(a=screen.deviceXDPI,f.emit("resize"))},500)}m("ios")&&(n(document,"focusin",function(a){g=a.target}),n(document,"focusout",function(a){g=null}))});f.getEffectiveBox=
function(c){c=d.getBox(c);var a=g&&g.tagName&&g.tagName.toLowerCase();if(m("ios")&&g&&!g.readOnly&&("textarea"==a||"input"==a&&/^(color|email|number|password|search|tel|text|url)$/.test(g.type)))c.h*=0==orientation||180==orientation?0.66:0.4,a=g.getBoundingClientRect(),c.h=Math.max(c.h,a.top+a.height);return c};return f})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(q,n,k,m,d,
f,g,c){c.add("config-bgIframe",c("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||c("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var a=new function(){var a=[];this.pop=function(){var e;a.length?(e=a.pop(),e.style.display=""):(9>c("ie")?(e="\x3ciframe src\x3d'"+(k.dojoBlankHtmlUrl||q.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e",e=document.createElement(e)):
(e=m.create("iframe"),e.src='javascript:""',e.className="dijitBackgroundIframe",e.setAttribute("role","presentation"),d.set(e,"opacity",0.1)),e.tabIndex=-1);return e};this.push=function(e){e.style.display="none";a.push(e)}};n.BackgroundIframe=function(h){if(!h.id)throw Error("no id");if(c("config-bgIframe")){var e=this.iframe=a.pop();h.appendChild(e);7>c("ie")||c("quirks")?(this.resize(h),this._conn=g(h,"resize",f.hitch(this,"resize",h))):d.set(e,{width:"100%",height:"100%"})}};f.extend(n.BackgroundIframe,
{resize:function(a){this.iframe&&d.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),a.push(this.iframe),delete this.iframe)}});return n.BackgroundIframe})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(q,n,k,m){return q("dijit.DropDownMenu",m,{templateString:k,baseClass:"dijitMenu",
_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(d){this._moveToPopup(d);d.stopPropagation();d.preventDefault()},_onLeftArrow:function(d){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else d.stopPropagation(),d.preventDefault()}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(q,n,k,m,d,f,g,c,a,h,e,x,l,y,t){return n("dijit._MenuBase",[x,t,y,l],{selected:null,_setSelectedAttr:function(b){this.selected!=b&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),b&&b._setSelected(!0),this._set("selected",b))},activated:!1,_setActivatedAttr:function(b){d.toggle(this.domNode,"dijitMenuActive",b);d.toggle(this.domNode,"dijitMenuPassive",!b);this._set("activated",b)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,
childSelector:function(b){var a=e.byNode(b);return b.parentNode==this.containerNode&&a&&a.focus},postCreate:function(){var b=this,a="string"==typeof this.childSelector?this.childSelector:f.hitch(this,"childSelector");this.own(c(this.containerNode,c.selector(a,g.enter),function(){b.onItemHover(e.byNode(this))}),c(this.containerNode,c.selector(a,g.leave),function(){b.onItemUnhover(e.byNode(this))}),c(this.containerNode,c.selector(a,h),function(a){b.onItemClick(e.byNode(this),a);a.stopPropagation()}),
c(this.containerNode,c.selector(a,"focusin"),function(){b._onItemFocus(e.byNode(this))}));this.inherited(arguments)},onKeyboardSearch:function(b,a,e,l){this.inherited(arguments);if(b&&(-1==l||b.popup&&1==l))this.onItemClick(b,a)},_keyboardSearchCompare:function(b,a){return b.shortcutKey?a==b.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(b){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,
b);else(b=this._getTopMenu())&&b._isMenuBar&&b.focusNext()},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(b){this.activated?(this.set("selected",b),b.popup&&(!b.disabled&&!this.hover_timer)&&(this.hover_timer=this.defer(function(){this._openItemPopup(b)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(b,
{type:"click"})},this.passivePopupDelay));this._hoveredChild=b;b._set("hovering",!0)},_onChildDeselect:function(b){this._stopPopupTimer();this.currentPopupItem==b&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;b._closePopup()},this.popupDelay))},onItemUnhover:function(b){this._hoveredChild==b&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);b._set("hovering",
!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var b=this;b.parentMenu;b=b.parentMenu);return b},onItemClick:function(b,a){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(b);if(b.disabled)return!1;if(b.popup){this.set("selected",b);this.set("activated",!0);var e=/^key/.test(a._origType||
a.type)||0==a.clientX&&0==a.clientY;this._openItemPopup(b,e)}else this.onExecute(),b._onClick?b._onClick(a):b.onClick(a)},_openItemPopup:function(b,a){if(b!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var e=b.popup;e.parentMenu=this;this.own(this._mouseoverHandle=c.once(e.domNode,"mouseover",f.hitch(this,"_onPopupHover")));var l=this;b._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){a&&
l.focusChild(b);l._cleanUp()},onExecute:f.hitch(this,"_cleanUp",!0),onClose:function(){l._mouseoverHandle&&(l._mouseoverHandle.remove(),delete l._mouseoverHandle)}},a);this.currentPopupItem=b}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(m.set(this.selected.focusNode,"tabIndex",this.tabIndex),
this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(b){if(this._hoveredChild&&this._hoveredChild!=b)this.onItemUnhover(this._hoveredChild);this.set("selected",b)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(b){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);b&&this.set("selected",null)}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),
function(q,n,k,m,d,f,g,c,a,h,e,x){n=n("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);q.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,f.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(b){e=e.concat(q.map(e,function(a){return a+b}),"dijit"+b)}var e=this.baseClass.split(" ");
this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var c=this.stateNode||this.domNode,b={};q.forEach(c.className.split(" "),function(a){b[a]=!0});"_stateClasses"in this&&q.forEach(this._stateClasses,function(a){delete b[a]});q.forEach(e,
function(a){b[a]=!0});var p=[],h;for(h in b)p.push(h);c.className=p.join(" ");this._stateClasses=e},_subnodeCssMouseEvent:function(a,e,c){function b(b){m.toggle(a,e+"Active",b)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":case "MSPointerOver":case "pointerover":m.toggle(a,e+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":m.toggle(a,e+"Hover",!1);b(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":b(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":b(!1);break;case "focus":case "focusin":m.toggle(a,e+"Focused",!0);break;case "blur":case "focusout":m.toggle(a,e+"Focused",!1)}},_trackMouseState:function(a,e){a._cssState=e}});c(function(){function l(b,a,e){if(!e||!k.isDescendant(e,a))for(;a&&a!=e;a=a.parentNode)if(a._cssState){var c=x.getEnclosingWidget(a);c&&(a==c.domNode?c._cssMouseEvent(b):c._subnodeCssMouseEvent(a,a._cssState,b))}}var c=h.body(),d;g(c,
a.over,function(b){l(b,b.target,b.relatedTarget)});g(c,a.out,function(b){l(b,b.target,b.relatedTarget)});g(c,e.press,function(b){d=b.target;l(b,d)});g(c,e.release,function(b){l(b,d);d=null});g(c,"focusin, focusout",function(b){var a=b.target;if(a._cssState&&!a.getAttribute("widgetId")){var e=x.getEnclosingWidget(a);e&&e._subnodeCssMouseEvent(a,a._cssState,b)}})});return n})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),
function(q,n,k,m,d,f,g,c,a,h){return n("dijit._KeyNavContainer",[a,h,c],{connectKeyNavHandlers:function(a,c){var l=this._keyNavCodes={},h=f.hitch(this,"focusPrev"),g=f.hitch(this,"focusNext");q.forEach(a,function(b){l[b]=h});q.forEach(c,function(b){l[b]=g});l[d.HOME]=f.hitch(this,"focusFirstChild");l[d.END]=f.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){m.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);q.forEach(this.getChildren(),
f.hitch(this,"_startupChild"))},addChild:function(a,c){this.inherited(arguments);this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(a){return(a=
g.byNode(a))&&a.getParent()==this}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(q,n,k,m){return n("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(d,f){var g=this.containerNode;if(0<f){for(g=g.firstChild;0<f;)1==g.nodeType&&f--,g=g.nextSibling;g?f="before":(g=this.containerNode,f="last")}k.place(d.domNode,g,f);
this._started&&!d._started&&d.startup()},removeChild:function(d){"number"==typeof d&&(d=this.getChildren()[d]);d&&(d=d.domNode)&&d.parentNode&&d.parentNode.removeChild(d)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(d,f){var g=this.getChildren(),c=q.indexOf(g,d);return g[c+f]},getIndexOfChild:function(d){return q.indexOf(this.getChildren(),d)}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),
function(q,n,k,m,d,f,g,c){return n("dijit._KeyNavMixin",c,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);k.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var a=this._keyNavCodes={};a[m.HOME]=d.hitch(this,"focusFirstChild");a[m.END]=d.hitch(this,"focusLastChild");a[this.isLeftToRight()?m.LEFT_ARROW:m.RIGHT_ARROW]=d.hitch(this,"_onLeftArrow");a[this.isLeftToRight()?m.RIGHT_ARROW:m.LEFT_ARROW]=d.hitch(this,"_onRightArrow");a[m.UP_ARROW]=d.hitch(this,
"_onUpArrow");a[m.DOWN_ARROW]=d.hitch(this,"_onDownArrow")}var c=this,a="string"==typeof this.childSelector?this.childSelector:d.hitch(this,"childSelector");this.own(f(this.domNode,"keypress",d.hitch(this,"_onContainerKeypress")),f(this.domNode,"keydown",d.hitch(this,"_onContainerKeydown")),f(this.domNode,"focus",d.hitch(this,"_onContainerFocus")),f(this.containerNode,f.selector(a,"focusin"),function(a){c._onChildFocus(g.getEnclosingWidget(this),a)}))},_onLeftArrow:function(){},_onRightArrow:function(){},
_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(a,c){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),
a.set("tabIndex",this.tabIndex),a.focus(c?"end":"start"))},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){k.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(a){k.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(a){a&&a!=this.focusedChild&&
(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),a.set("tabIndex",this.tabIndex),this.lastFocused=a,this._set("focusedChild",a))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(a,c,e,d){a&&this.focusChild(a)},_keyboardSearchCompare:function(a,c){var e=a.domNode,e=(a.label||(e.focusNode?e.focusNode.label:"")||e.innerText||e.textContent||"").replace(/^\s+/,"").substr(0,c.length).toLowerCase();return c.length&&e==c?-1:0},_isFormElement:function(a){return"INPUT"===
a.tagName||"TEXTAREA"===a.tagName||"SELECT"===a.tagName||"BUTTON"===a.tagName},_onContainerKeydown:function(a){if(!this._isFormElement(document.activeElement)){var c=this._keyNavCodes[a.keyCode];c?(c(a,this.focusedChild),a.stopPropagation(),a.preventDefault(),this._searchString=""):a.keyCode==m.SPACE&&(this._searchTimer&&!a.ctrlKey&&!a.altKey&&!a.metaKey)&&(a.stopImmediatePropagation(),a.preventDefault(),this._keyboardSearch(a," "))}},_onContainerKeypress:function(a){if(!this._isFormElement(document.activeElement)&&
!(a.charCode<=m.SPACE||a.ctrlKey||a.altKey||a.metaKey))a.preventDefault(),a.stopPropagation(),this._keyboardSearch(a,String.fromCharCode(a.charCode).toLowerCase())},_keyboardSearch:function(a,c){var e=null,g,l=0;d.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=c;var a=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;g=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);
var d=this.focusedChild||null;if(1==a||!d)if(d=this._getNextFocusableChild(d,1),!d)return;a=d;do{var b=this._keyboardSearchCompare(d,g);b&&0==l++&&(e=d);if(-1==b){l=-1;break}d=this._getNextFocusableChild(d,1)}while(d&&d!=a)})();this.onKeyboardSearch(e,a,g,l)},_onChildBlur:function(){},_getNextFocusableChild:function(a,c){var e=a;do{if(a)a=this._getNext(a,c);else if(a=this[0<c?"_getFirst":"_getLast"](),!a)break;if(null!=a&&a!=e&&a.isFocusable())return a}while(a!=e);return null},_getFirst:function(){return null},
_getLast:function(){return null},_getNext:function(a,c){if(a)for(a=a.domNode;a;)if((a=a[0>c?"previousSibling":"nextSibling"])&&"getAttribute"in a){var e=g.byNode(a);if(e)return e}return null}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(q,n,k,m,d,f,g,c){var a=n("dijit._TemplatedMixin",c,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,
_stringRepl:function(a){var e=this.declaredClass,c=this;return g.substitute(a,this,function(a,d){"!"==d.charAt(0)&&(a=m.getObject(d.substr(1),!1,c));if("undefined"==typeof a)throw Error(e+" template:"+d);return null==a?"":"!"==d.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||
(this.templateString=q(this.templatePath,{sanitize:!0}));var c=a.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),e;if(m.isString(c)){if(e=k.toDom(this._stringRepl(c),this.ownerDocument),1!=e.nodeType)throw Error("Invalid template: "+c);}else e=c.cloneNode(!0);this.domNode=e}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var e=this.containerNode;if(a&&e)for(;a.hasChildNodes();)e.appendChild(a.firstChild)}});
a._templateCache={};a.getCachedTemplate=function(c,e,d){var l=a._templateCache,f=c,m=l[f];if(m){try{if(!m.ownerDocument||m.ownerDocument==(d||document))return m}catch(b){}k.destroy(m)}c=g.trim(c);if(e||c.match(/\$\{([^\}]+)\}/g))return l[f]=c;e=k.toDom(c,d);if(1!=e.nodeType)throw Error("Invalid template: "+c);return l[f]=e};f("ie")&&d(window,"unload",function(){var c=a._templateCache,e;for(e in c){var d=c[e];"object"==typeof d&&k.destroy(d);delete c[e]}});return a})},"dojo/cache":function(){define(["./_base/kernel",
"./text"],function(q){return q.cache})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(q,n,k,m,d,f,g,c,a){var h=d.delegate(c,{mouseenter:f.enter,mouseleave:f.leave,keypress:k._keypress}),e;k=m("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);
this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var e=a;;)if(1==e.nodeType&&(this._processTemplateNode(e,function(a,e){return a.getAttribute(e)},this._attach)||this.searchContainerNode)&&e.firstChild)e=e.firstChild;else{if(e==a)break;for(;!e.nextSibling;)if(e=e.parentNode,e==a)return;e=e.nextSibling}},_processTemplateNode:function(a,e,c){var h=!0,b=this.attachScope||this,p=e(a,"dojoAttachPoint")||e(a,"data-dojo-attach-point");if(p)for(var g=p.split(/\s*,\s*/);p=
g.shift();)d.isArray(b[p])?b[p].push(a):b[p]=a,h="containerNode"!=p,this._attachPoints.push(p);if(e=e(a,"dojoAttachEvent")||e(a,"data-dojo-attach-event")){p=e.split(/\s*,\s*/);for(g=d.trim;e=p.shift();)if(e){var u=null;-1!=e.indexOf(":")?(u=e.split(":"),e=g(u[0]),u=g(u[1])):e=g(e);u||(u=e);this._attachEvents.push(c(a,e,d.hitch(b,u)))}}return h},_attach:function(a,c,d){c=c.replace(/^on/,"").toLowerCase();c="dijitclick"==c?e||(e=q("./a11yclick")):h[c]||c;return g(a,c,d)},_detachTemplateNodes:function(){var a=
this.attachScope||this;n.forEach(this._attachPoints,function(e){delete a[e]});this._attachPoints=[];n.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});d.extend(a,{dojoAttachEvent:"",dojoAttachPoint:""});return k})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),
function(q,n,k,m,d,f,g,c,a,h,e,x){g=q("dijit.MenuItem"+(f("dojo-bidi")?"_NoBidi":""),[c,a,h,e],{templateString:x,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",a);var e="",c;c=a.search(/{\S}/);if(0<=c){var e=a.charAt(c+1),b=a.substr(0,c);a=a.substr(c+3);c=b+e+a;a=b+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+e+"\x3c/span\x3e"+a}else c=a;this.domNode.setAttribute("aria-label",c+" "+this.accelKey);this.containerNode.innerHTML=a;this._set("shortcutKey",e)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);k.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&k.set(this.accelKeyNode,"id",this.id+"_accel");n.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==f("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_setSelected:function(a){m.toggle(this.domNode,
"dijitMenuItemSelected",a)},setLabel:function(a){d.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){d.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode&&(this.accelKeyNode.style.display=
a?"":"none",this.accelKeyNode.innerHTML=a,k.set(this.containerNode,"colSpan",a?"1":"2"));this._set("accelKey",a)}});f("dojo-bidi")&&(g=q("dijit.MenuItem",g,{_setLabelAttr:function(a){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return g})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(q,n){return q("dijit._Contained",null,{_getSibling:function(k){var m=this.getParent();return m&&m._getSiblingOfChild&&m._getSiblingOfChild(this,
"previous"==k?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var k=this.getParent();return!k||!k.getIndexOfChild?-1:k.getIndexOfChild(this)}})})},"esri/tasks/AreasAndLengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(q,n,k,m,d,f){q=q(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",
polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var d=k.map(this.polygons,function(a){return a.toJson()}),c={};c.polygons=m.toJson(d);d=this.polygons[0].spatialReference;c.sr=d.wkid?d.wkid:m.toJson(d.toJson());this.lengthUnit&&(c.lengthUnit=this.lengthUnit);this.areaUnit&&(n.isString(this.areaUnit)?c.areaUnit=m.toJson({areaUnit:this.areaUnit}):c.areaUnit=this.areaUnit);this.calculationType&&(c.calculationType=this.calculationType);return c}});d("extend-esri")&&n.setObject("tasks.AreasAndLengthsParameters",
q,f);return q})},"esri/tasks/LengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel".split(" "),function(q,n,k,m,d,f){q=q(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var d=k.map(this.polylines,function(a){return a.toJson()}),c={};c.polylines=m.toJson(d);d=this.polylines[0].spatialReference;c.sr=d.wkid?d.wkid:m.toJson(d.toJson());this.lengthUnit&&
(c.lengthUnit=this.lengthUnit);this.geodesic&&(c.geodesic=this.geodesic);this.calculationType&&(c.calculationType=this.calculationType);return c}});d("extend-esri")&&n.setObject("tasks.LengthsParameters",q,f);return q})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(q,n,k,m,d,f,g,c,a,h,e,x,l,y,t){q=q(h,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(a){a=n.hitch;this._projectHandler=a(this,this._projectHandler);this._simplifyHandler=a(this,this._simplifyHandler);this._bufferHandler=a(this,this._bufferHandler);this._areasAndLengthsHandler=a(this,this._areasAndLengthsHandler);this._lengthsHandler=
a(this,this._lengthsHandler);this._labelPointsHandler=a(this,this._labelPointsHandler);this._relationHandler=a(this,this._relationHandler);this._convexHullHandler=a(this,this._convexHullHandler);this._unionHandler=a(this,this._unionHandler);this._autoCompleteHandler=a(this,this._autoCompleteHandler);this._reshapeHandler=a(this,this._reshapeHandler);this._cutHandler=a(this,this._cutHandler);this._intersectHandler=a(this,this._intersectHandler);this._differenceHandler=a(this,this._differenceHandler);
this._trimExtendHandler=a(this,this._trimExtendHandler);this._densifyHandler=a(this,this._densifyHandler);this._generalizeHandler=a(this,this._densifyHandler);this._offsetHandler=a(this,this._offsetHandler);this._distanceHandler=a(this,this._distanceHandler);this._toGeoCoordinateHandler=a(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=a(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(a){var e=[],c,d=a.length;for(c=0;c<d;c++)e.push(a[c].toJson());
return{geometryType:t.getJsonType(a[0]),geometries:e}},_decodeGeometries:function(a,e,c){var d=t.getGeometryType(e);a=a.geometries;var h=[],g={spatialReference:c.toJson()},f=n.mixin;k.forEach(a,function(a,b){h[b]=new d(f(a,g))});return h},_toProjectGeometry:function(a){var p=a.spatialReference.toJson();return a instanceof e?new l({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:p}):new x({paths:[[].concat(a.points)],spatialReference:p})},
_fromProjectedGeometry:function(a,p,c){return"esriGeometryEnvelope"===p?(a=a.rings[0],new e(a[0][0],a[0][1],a[2][0],a[2][1],c)):new y({points:a.paths[0],spatialReference:c.toJson()})},project:function(b,e,h,g){var f=n.mixin({},this._url.query,{f:"json"}),l;b.geometries?(g=h,h=e,e=b.outSR,l=b.geometries[0],f=n.mixin(f,b.toJson())):(l=b[0],f=n.mixin(f,{outSR:e.wkid||m.toJson(e.toJson()),inSR:l.spatialReference.wkid||m.toJson(l.spatialReference.toJson()),geometries:m.toJson(this._encodeGeometries(b))}));
var k=t.getJsonType(l),r=this._projectHandler,q=this._errorHandler,x=new d(a._dfdCanceller);x._pendingDfd=c({url:this._url.path+"/project",content:f,callbackParamName:"callback",load:function(a,b){r(a,b,k,e,h,g,x)},error:function(a){q(a,g,x)}});return x},_projectHandler:function(a,e,c,d,h,f,g){try{var r=this._decodeGeometries(a,c,d);this._successHandler([r],"onProjectComplete",h,g)}catch(l){this._errorHandler(l,f,g)}},onProjectComplete:function(){},simplify:function(b,e,h){var f=b[0].spatialReference,
g=n.mixin({},this._url.query,{f:"json",sr:f.wkid?f.wkid:m.toJson(f.toJson()),geometries:m.toJson(this._encodeGeometries(b))}),l=t.getJsonType(b[0]),k=this._simplifyHandler,r=this._errorHandler,q=new d(a._dfdCanceller);q._pendingDfd=c({url:this._url.path+"/simplify",content:g,callbackParamName:"callback",load:function(a,b){k(a,b,l,f,e,h,q)},error:function(a){r(a,h,q)}});return q},_simplifyHandler:function(a,e,c,d,h,f,g){try{var r=this._decodeGeometries(a,c,d);this._successHandler([r],"onSimplifyComplete",
h,g)}catch(l){this._errorHandler(l,f,g)}},onSimplifyComplete:function(){},convexHull:function(b,e,h){var f=b[0].spatialReference;b=n.mixin({},this._url.query,{f:"json",sr:m.toJson(f.toJson()),geometries:m.toJson(this._encodeGeometries(b))});var g=this._convexHullHandler,l=this._errorHandler,k=new d(a._dfdCanceller);k._pendingDfd=c({url:this._url.path+"/convexHull",content:b,callbackParamName:"callback",load:function(a,b){g(a,b,f,e,h,k)},error:function(a){l(a,h,k)}});return k},_convexHullHandler:function(a,
e,c,d,h,f){try{var g=t.fromJson(a.geometry).setSpatialReference(c);this._successHandler([g],"onConvexHullComplete",d,f)}catch(r){this._errorHandler(r,h,f)}},onConvexHullComplete:function(){},union:function(b,e,h){var f=b[0].spatialReference;b=n.mixin({},this._url.query,{f:"json",sr:m.toJson(f.toJson()),geometries:m.toJson(this._encodeGeometries(b))});var g=this._unionHandler,l=this._errorHandler,k=new d(a._dfdCanceller);k._pendingDfd=c({url:this._url.path+"/union",content:b,callbackParamName:"callback",
load:function(a,b){g(a,b,f,e,h,k)},error:function(a){l(a,h,k)}});return k},_unionHandler:function(a,e,c,d,h,f){try{var g=t.fromJson(a.geometry).setSpatialReference(c);this._successHandler([g],"onUnionComplete",d,f)}catch(r){this._errorHandler(r,h,f)}},onUnionComplete:function(){},autoComplete:function(b,e,h,f){var g=b[0].spatialReference;b=n.mixin({},this._url.query,{f:"json",sr:m.toJson(g.toJson()),polygons:m.toJson(this._encodeGeometries(b).geometries),polylines:m.toJson(this._encodeGeometries(e).geometries)});
var l=this._autoCompleteHandler,k=this._errorHandler,r=new d(a._dfdCanceller);r._pendingDfd=c({url:this._url.path+"/autoComplete",content:b,callbackParamName:"callback",load:function(a,b){l(a,b,g,h,f,r)},error:function(a){k(a,f,r)}});return r},_autoCompleteHandler:function(a,e,c,d,h,f){try{var g=a.geometries;a=[];var r,k=g.length;for(r=0;r<k;r++)a[r]=new l({spatialReference:c,rings:g[r].rings});this._successHandler([a],"onAutoCompleteComplete",d,f)}catch(m){this._errorHandler(m,h,f)}},onAutoCompleteComplete:function(){},
reshape:function(b,e,h,f){var g=b.spatialReference;b=n.mixin({},this._url.query,{f:"json",sr:m.toJson(g.toJson()),target:m.toJson({geometryType:t.getJsonType(b),geometry:b.toJson()}),reshaper:m.toJson(e.toJson())});var l=this._reshapeHandler,k=this._errorHandler,r=new d(a._dfdCanceller);r._pendingDfd=c({url:this._url.path+"/reshape",content:b,callbackParamName:"callback",load:function(a,b){l(a,b,g,h,f,r)},error:function(a){k(a,f,r)}});return r},_reshapeHandler:function(a,e,c,d,h,f){try{var g=t.fromJson(a.geometry).setSpatialReference(c);
this._successHandler([g],"onReshapeComplete",d,f)}catch(r){this._errorHandler(r,h,f)}},onReshapeComplete:function(){},cut:function(b,e,h,f){var g=b[0].spatialReference,l=k.map(b,function(a){return a.toJson()});b=n.mixin({},this._url.query,{f:"json",sr:m.toJson(g.toJson()),target:m.toJson({geometryType:t.getJsonType(b[0]),geometries:l}),cutter:m.toJson(e.toJson())});var q=this._cutHandler,r=this._errorHandler,x=new d(a._dfdCanceller);x._pendingDfd=c({url:this._url.path+"/cut",content:b,callbackParamName:"callback",
load:function(a,b){q(a,b,g,h,f,x)},error:function(a){r(a,f,x)}});return x},_cutHandler:function(a,e,c,d,h,f){try{var g=a.geometries,r={};r.cutIndexes=a.cutIndexes;r.geometries=[];k.forEach(g,function(a){r.geometries.push(t.fromJson(a).setSpatialReference(c))});this._successHandler([r],"onCutComplete",d,f)}catch(l){this._errorHandler(l,h,f)}},onCutComplete:function(){},intersect:function(b,e,h,f){var g=b[0].spatialReference;b=n.mixin({},this._url.query,{f:"json",sr:m.toJson(g.toJson()),geometries:m.toJson(this._encodeGeometries(b)),
geometry:m.toJson({geometryType:t.getJsonType(e),geometry:e.toJson()})});var l=this._intersectHandler,k=this._errorHandler,r=new d(a._dfdCanceller);r._pendingDfd=c({url:this._url.path+"/intersect",content:b,callbackParamName:"callback",load:function(a,b){l(a,b,g,h,f,r)},error:function(a){k(a,f,r)}});return r},_intersectHandler:function(a,e,c,d,h,f){try{var g=[];k.forEach(a.geometries,function(a){g.push(t.fromJson(a).setSpatialReference(c))});this._successHandler([g],"onIntersectComplete",d,f)}catch(r){this._errorHandler(r,
h,f)}},onIntersectComplete:function(){},difference:function(b,e,f,h){var g=b[0].spatialReference;b=n.mixin({},this._url.query,{f:"json",sr:m.toJson(g.toJson()),geometries:m.toJson(this._encodeGeometries(b)),geometry:m.toJson({geometryType:t.getJsonType(e),geometry:e.toJson()})});var l=this._differenceHandler,k=this._errorHandler,r=new d(a._dfdCanceller);r._pendingDfd=c({url:this._url.path+"/difference",content:b,callbackParamName:"callback",load:function(a,b){l(a,b,g,f,h,r)},error:function(a){k(a,
h,r)}});return r},_differenceHandler:function(a,e,c,d,h,f){try{var g=[];k.forEach(a.geometries,function(a){g.push(t.fromJson(a).setSpatialReference(c))});this._successHandler([g],"onDifferenceComplete",d,f)}catch(r){this._errorHandler(r,h,f)}},onDifferenceComplete:function(){},buffer:function(b,e,f){var h=n.mixin({},this._url.query,{f:"json"},b.toJson()),g=b.outSpatialReference||b.geometries[0].spatialReference,l=this._bufferHandler,k=this._errorHandler,r=new d(a._dfdCanceller);r._pendingDfd=c({url:this._url.path+
"/buffer",content:h,callbackParamName:"callback",load:function(a,b){l(a,b,g,e,f,r)},error:function(a){k(a,f,r)}});return r},_bufferHandler:function(a,e,c,d,f,h){try{var g=a.geometries;a=[];var r,k=g.length;for(r=0;r<k;r++)a[r]=new l({spatialReference:c,rings:g[r].rings});this._successHandler([a],"onBufferComplete",d,h)}catch(m){this._errorHandler(m,f,h)}},onBufferComplete:function(){},areasAndLengths:function(b,e,f){b=n.mixin({},this._url.query,{f:"json"},b.toJson());var h=this._areasAndLengthsHandler,
g=this._errorHandler,l=new d(a._dfdCanceller);l._pendingDfd=c({url:this._url.path+"/areasAndLengths",content:b,callbackParamName:"callback",load:function(a,b){h(a,b,e,f,l)},error:function(a){g(a,f,l)}});return l},_areasAndLengthsHandler:function(a,e,c,d,f){try{this._successHandler([a],"onAreasAndLengthsComplete",c,f)}catch(h){this._errorHandler(h,d,f)}},onAreasAndLengthsComplete:function(){},lengths:function(b,e,f){b=n.mixin({},this._url.query,{f:"json"},b.toJson());var h=this._lengthsHandler,g=this._errorHandler,
l=new d(a._dfdCanceller);l._pendingDfd=c({url:this._url.path+"/lengths",content:b,callbackParamName:"callback",load:function(a,b){h(a,b,e,f,l)},error:function(a){g(a,f,l)}});return l},_lengthsHandler:function(a,e,c,d,f){try{this._successHandler([a],"onLengthsComplete",c,f)}catch(h){this._errorHandler(h,d,f)}},onLengthsComplete:function(){},labelPoints:function(b,e,f){var h=k.map(b,function(a){return a.toJson()}),g=b[0].spatialReference,h=n.mixin({},this._url.query,{f:"json",sr:g.wkid?g.wkid:m.toJson(g.toJson()),
polygons:m.toJson(h)}),l=this._labelPointsHandler,q=this._errorHandler,r=new d(a._dfdCanceller);r._pendingDfd=c({url:this._url.path+"/labelPoints",content:h,callbackParamName:"callback",load:function(a,c){l(a,c,b,g,e,f,r)},error:function(a){q(a,f,r)}});return r},_labelPointsHandler:function(a,e,c,d,f,h,g){try{var l=[];k.forEach(a.labelPoints,function(a){l.push(t.fromJson(a).setSpatialReference(d))});this._successHandler([l],"onLabelPointsComplete",f,g)}catch(m){this._errorHandler(m,h,g)}},onLabelPointsComplete:function(){},
relation:function(b,e,f){b=n.mixin({},this._url.query,{f:"json"},b.toJson());var h=this._relationHandler,g=this._errorHandler,l=new d(a._dfdCanceller);l._pendingDfd=c({url:this._url.path+"/relation",content:b,callbackParamName:"callback",load:function(a,b){h(a,b,e,f,l)},error:function(a){g(a,f,l)}});return l},_relationHandler:function(a,e,c,d,f){try{this._successHandler([a.relations],"onRelationComplete",c,f)}catch(h){this._errorHandler(h,d,f)}},onRelationComplete:function(){},trimExtend:function(b,
e,f){var h=n.mixin({},this._url.query,{f:"json"},b.toJson()),g=b.sr,l=this._trimExtendHandler,k=this._errorHandler,r=new d(a._dfdCanceller);r._pendingDfd=c({url:this._url.path+"/trimExtend",content:h,callbackParamName:"callback",load:function(a,b){l(a,b,g,e,f,r)},error:function(a){k(a,f,r)}});return r},_trimExtendHandler:function(a,e,c,d,f,h){try{var g=a.geometries;a=[];var l,k=g.length;for(l=0;l<k;l++)a[l]=new x({spatialReference:c,paths:g[l].paths});this._successHandler([a],"onTrimExtendComplete",
d,h)}catch(m){this._errorHandler(m,f,h)}},onTrimExtendComplete:function(){},densify:function(b,e,f){var h=n.mixin({},this._url.query,{f:"json"},b.toJson()),g=b.geometries[0].spatialReference,l=this._densifyHandler,k=this._errorHandler,r=new d(a._dfdCanceller);r._pendingDfd=c({url:this._url.path+"/densify",content:h,callbackParamName:"callback",load:function(a,b){l(a,b,g,e,f,r)},error:function(a){k(a,f,r)}});return r},_densifyHandler:function(a,e,c,d,f,h){try{var g=[];k.forEach(a.geometries,function(a){g.push(t.fromJson(a).setSpatialReference(c))});
this._successHandler([g],"onDensifyComplete",d,h)}catch(l){this._errorHandler(l,f,h)}},onDensifyComplete:function(){},generalize:function(b,e,f){var h=n.mixin({},this._url.query,{f:"json"},b.toJson()),g=b.geometries[0].spatialReference,l=this._generalizeHandler,k=this._errorHandler,r=new d(a._dfdCanceller);r._pendingDfd=c({url:this._url.path+"/generalize",content:h,callbackParamName:"callback",load:function(a,b){l(a,b,g,e,f,r)},error:function(a){k(a,f,r)}});return r},_generalizeHandler:function(a,
e,c,d,f,h){try{var g=[];k.forEach(a.geometries,function(a){g.push(t.fromJson(a).setSpatialReference(c))});this._successHandler([g],"onGeneralizeComplete",d,h)}catch(l){this._errorHandler(l,f,h)}},onGeneralizeComplete:function(){},offset:function(b,e,f){var h=n.mixin({},this._url.query,{f:"json"},b.toJson()),g=b.geometries[0].spatialReference,l=this._offsetHandler,k=this._errorHandler,r=new d(a._dfdCanceller);r._pendingDfd=c({url:this._url.path+"/offset",content:h,callbackParamName:"callback",load:function(a,
b){l(a,b,g,e,f,r)},error:function(a){k(a,f,r)}});return r},_offsetHandler:function(a,e,c,d,f,h){try{var g=[];k.forEach(a.geometries,function(a){g.push(t.fromJson(a).setSpatialReference(c))});this._successHandler([g],"onOffsetComplete",d,h)}catch(l){this._errorHandler(l,f,h)}},onOffsetComplete:function(){},distance:function(b,e,f){var h=n.mixin({},this._url.query,{f:"json"},b.toJson()),g=b.geometry1.spatialReference,l=this._distanceHandler,k=this._errorHandler,r=new d(a._dfdCanceller);r._pendingDfd=
c({url:this._url.path+"/distance",content:h,callbackParamName:"callback",load:function(a,b){l(a,b,g,e,f,r)},error:function(a){k(a,f,r)}});return r},_distanceHandler:function(a,e,c,d,f,h){try{a=a&&a.distance,this._successHandler([a],"onDistanceComplete",d,h)}catch(g){this._errorHandler(g,f,h)}},onDistanceComplete:function(){},toGeoCoordinateString:function(b,e,f){var h={};n.isObject(b.sr)?h.sr=b.sr.wkid||m.toJson(b.sr.toJson()):h.sr=b.sr;h.coordinates=m.toJson(b.coordinates);h.conversionType=b.conversionType||
"MGRS";h.conversionMode=b.conversionMode;h.numOfDigits=b.numOfDigits;h.rounding=b.rounding;h.addSpaces=b.addSpaces;b=n.mixin({},this._url.query,{f:"json"},h);var g=this._toGeoCoordinateHandler,l=this._errorHandler,k=new d(a._dfdCanceller);k._pendingDfd=c({url:this._url.path+"/toGeoCoordinateString",content:b,callbackParamName:"callback",load:function(a,b){g(a,b,e,f,k)},error:function(a){l(a,f,k)}});return k},_toGeoCoordinateHandler:function(a,e,c,h,f){try{this._successHandler([a.strings],"onToGeoCoordinateStringComplete",
c,f)}catch(d){this._errorHandler(d,h,f)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(b,e,h){var f={};n.isObject(b.sr)?f.sr=b.sr.wkid||m.toJson(b.sr.toJson()):f.sr=b.sr;f.strings=m.toJson(b.strings);f.conversionType=b.conversionType||"MGRS";f.conversionMode=b.conversionMode;b=n.mixin({},this._url.query,{f:"json"},f);var g=this._fromGeoCoordinateHandler,l=this._errorHandler,k=new d(a._dfdCanceller);k._pendingDfd=c({url:this._url.path+"/fromGeoCoordinateString",content:b,
callbackParamName:"callback",load:function(a,b){g(a,b,e,h,k)},error:function(a){l(a,h,k)}});return k},_fromGeoCoordinateHandler:function(a,e,c,f,h){try{this._successHandler([a.coordinates],"onToGeoCoordinateStringComplete",c,h)}catch(d){this._errorHandler(d,f,h)}},onFromGeoCoordinateStringComplete:function(){}});n.mixin(q,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});f("extend-esri")&&n.setObject("tasks.GeometryService",q,g);return q})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(q,n,k,m,d,f,g,c){q=q(c,{declaredClass:"esri.tasks._Task",
_eventMap:{error:["error"],complete:["result"]},constructor:function(a,c){a&&n.isString(a)&&(this._url=g.urlToObject(this.url=a));c&&c.requestOptions&&(this.requestOptions=c.requestOptions);this.normalization=!0;this._errorHandler=n.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var a=this._url,c=/^http:/i;this.url&&(this.url=this.url.replace(c,"https:"));a&&a.path&&(a.path=a.path.replace(c,"https:"))},_encode:function(a,c,e){var f,d,g={},m,b;for(m in a)if("declaredClass"!==
m&&(f=a[m],d=typeof f,null!==f&&void 0!==f&&"function"!==d))if(n.isArray(f)){g[m]=[];b=f.length;for(d=0;d<b;d++)g[m][d]=this._encode(f[d])}else"object"===d?f.toJson&&(d=f.toJson(e&&e[m]),"esri.tasks.FeatureSet"===f.declaredClass&&d.spatialReference&&(d.sr=d.spatialReference,delete d.spatialReference),g[m]=c?d:k.toJson(d)):g[m]=f;return g},_successHandler:function(a,c,e,d){c&&this[c].apply(this,a);e&&e.apply(null,a);d&&f._resDfd(d,a)},_errorHandler:function(a,c,e){this.onError(a);c&&c(a);e&&e.errback(a)},
setNormalization:function(a){this.normalization=a},onError:function(){}});m("extend-esri")&&(d.Task=q);return q})},"esri/numberUtils":function(){define(["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(q,n,k,m){var d=function(f,c){return f-c},f={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(d){var c=String(d),a=c.match(f._reNumber);d={integer:0,fractional:0};a&&a[1]?(d.integer=a[1].split("").length,d.fractional=a[3]?a[3].split("").length:0):-1<c.toLowerCase().indexOf("e")&&
(a=c.split("e"),c=a[0],a=a[1],c&&a&&(c=Number(c),a=Number(a),(d=0<a)||(a=Math.abs(a)),c=f.getDigits(c),d?(c.integer+=a,c.fractional=a>c.fractional?0:c.fractional-a):(c.fractional+=a,c.integer=a>c.integer?1:c.integer-a),d=c));return d},getFixedNumbers:function(d,c){var a,f;a=Number(d.toFixed(c));a<d?f=a+1/Math.pow(10,c):(f=a,a-=1/Math.pow(10,c));a=Number(a.toFixed(c));f=Number(f.toFixed(c));return[a,f]},getPctChange:function(d,c,a,f){var e={prev:null,next:null},k;null!=a&&(k=d-a,a=c-a-k,e.prev=Math.floor(Math.abs(100*
a/k)));null!=f&&(k=f-d,a=f-c-k,e.next=Math.floor(Math.abs(100*a/k)));return e},round:function(g,c){var a=g.slice(0),h,e,k,l,m,n,b,p,q,u=!c||null==c.tolerance?2:c.tolerance,s=c&&c.indexes,v=!c||null==c.strictBounds?!1:c.strictBounds;if(s)s.sort(d);else{s=[];for(n=0;n<a.length;n++)s.push(n)}for(n=0;n<s.length;n++)if(q=s[n],h=a[q],e=0===q?null:a[q-1],k=q===a.length-1?null:a[q+1],l=f.getDigits(h),l=l.fractional){b=0;for(p=!1;b<=l&&!p;)m=f.getFixedNumbers(h,b),m=v&&0===n?m[1]:m[0],p=f.hasMinimalChange(h,
m,e,k,u),b++;p&&(a[q]=m)}return a},hasMinimalChange:function(d,c,a,h,e){d=f.getPctChange(d,c,a,h);c=null==d.prev||d.prev<=e;a=null==d.next||d.next<=e;return c&&a||d.prev+d.next<=2*e},_reAllZeros:RegExp("\\"+k.decimal+"0+$","g"),_reSomeZeros:RegExp("(\\d)0*$","g"),format:function(d,c){c=c||{places:20,round:-1};var a=n.format(d,c);a&&(a=a.replace(f._reSomeZeros,"$1").replace(f._reAllZeros,""));return a}};q("extend-esri")&&(m.numberUtils=f);return f})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(q,n,k,m,d){return k("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var f=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);d.parse(f,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,
contextRequire:this.contextRequire,scope:"dojo"}).then(m.hitch(this,function(d){this._startupWidgets=d;for(var c=0;c<d.length;c++)this._processTemplateNode(d[c],function(a,c){return a[c]},function(a,c,e){return c in a?a.connect(a,c,e):a.on(c,e,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
}},_processTemplateNode:function(d,g,c){return g(d,"dojoType")||g(d,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){q.forEach(this._startupWidgets,function(d){d&&(!d._started&&d.startup)&&d.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(q,
n,k,m,d,f,g,c,a,h,e,x,l,y,t,b){function p(a){return eval("("+a+")")}function w(a){var b=a._nameCaseMap,e=a.prototype;if(!b||b._extendCnt<s){var b=a._nameCaseMap={},c;for(c in e)"_"!==c.charAt(0)&&(b[c.toLowerCase()]=c);b._extendCnt=s}return b}function u(a,b){b||(b=q);var e=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),c=a.join();if(!e[c]){for(var d=[],f=0,p=a.length;f<p;f++){var h=a[f];d[d.length]=e[h]=e[h]||k.getObject(h)||~h.indexOf("/")&&b(h)}f=d.shift();e[c]=d.length?f.createSubclass?f.createSubclass(d):
f.extend.apply(f,d):f}return e[c]}new Date("X");var s=0;a.after(k,"extend",function(){s++},!0);var v={_clearCache:function(){s++;_ctorMap={}},_functionFromScript:function(a,b){var e="",c="",d=a.getAttribute(b+"args")||a.getAttribute("args"),f=a.getAttribute("with"),d=(d||"").split(/\s*,\s*/);f&&f.length&&m.forEach(f.split(/\s*,\s*/),function(a){e+="with("+a+"){";c+="}"});return new Function(d,e+a.innerHTML+c)},instantiate:function(a,b,e){b=b||{};e=e||{};var c=(e.scope||n._scopeName)+"Type",d="data-"+
(e.scope||n._scopeName)+"-",f=d+"type",p=d+"mixins",h=[];m.forEach(a,function(a){var e=c in b?b[c]:a.getAttribute(f)||a.getAttribute(c);if(e){var d=a.getAttribute(p),e=d?[e].concat(d.split(/\s*,\s*/)):[e];h.push({node:a,types:e})}});return this._instantiate(h,b,e)},_instantiate:function(a,b,e,c){function d(a){!b._started&&!e.noStart&&m.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}a=m.map(a,function(a){var c=a.ctor||u(a.types,e.contextRequire);if(!c)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(c,a.node,b,e,a.scripts,a.inherited)},this);return c?h(a).then(d):d(a)},construct:function(b,d,f,h,g,q){function x(b){N&&k.setObject(N,b);for(z=0;z<F.length;z++)a[F[z].advice||"after"](b,F[z].method,k.hitch(b,F[z].func),!0);for(z=0;z<S.length;z++)S[z].call(b);for(z=0;z<P.length;z++)b.watch(P[z].prop,P[z].func);for(z=0;z<Q.length;z++)t(b,Q[z].event,Q[z].func);return b}var u=b&&b.prototype;h=h||{};var s={};h.defaults&&k.mixin(s,h.defaults);q&&k.mixin(s,q);var v;
l("dom-attributes-explicit")?v=d.attributes:l("dom-attributes-specified-flag")?v=m.filter(d.attributes,function(a){return a.specified}):(q=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),v=m.map(q.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==d.nodeName&&"value"==a||"enctype"==b?d.getAttribute(b):d.getAttributeNode(b).value}}));var G=h.scope||n._scopeName;
q="data-"+G+"-";var A={};"dojo"!==G&&(A[q+"props"]="data-dojo-props",A[q+"type"]="data-dojo-type",A[q+"mixins"]="data-dojo-mixins",A[G+"type"]="dojotype",A[q+"id"]="data-dojo-id");for(var z=0,B,G=[],N,D;B=v[z++];){var C=B.name,I=C.toLowerCase();B=B.value;switch(A[I]||I){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":D=B;break;case "data-dojo-id":case "jsid":N=B;break;case "data-dojo-attach-point":case "dojoattachpoint":s.dojoAttachPoint=B;break;case "data-dojo-attach-event":case "dojoattachevent":s.dojoAttachEvent=
B;break;case "class":s["class"]=d.className;break;case "style":s.style=d.style&&d.style.cssText;break;default:if(C in u||(C=w(b)[I]||C),C in u)switch(typeof u[C]){case "string":s[C]=B;break;case "number":s[C]=B.length?Number(B):NaN;break;case "boolean":s[C]="false"!=B.toLowerCase();break;case "function":""===B||-1!=B.search(/[^\w\.]+/i)?s[C]=new Function(B):s[C]=k.getObject(B,!1)||new Function(B);G.push(C);break;default:I=u[C],s[C]=I&&"length"in I?B?B.split(/\s*,\s*/):[]:I instanceof Date?""==B?new Date(""):
"now"==B?new Date:e.fromISOString(B):I instanceof c?n.baseUrl+B:p(B)}else s[C]=B}}for(v=0;v<G.length;v++)A=G[v].toLowerCase(),d.removeAttribute(A),d[A]=null;if(D)try{D=p.call(h.propsThis,"{"+D+"}"),k.mixin(s,D)}catch(R){throw Error(R.toString()+" in data-dojo-props\x3d'"+D+"'");}k.mixin(s,f);g||(g=b&&(b._noScript||u._noScript)?[]:y("\x3e script[type^\x3d'dojo/']",d));var F=[],S=[],P=[],Q=[];if(g)for(z=0;z<g.length;z++)A=g[z],d.removeChild(A),f=A.getAttribute(q+"event")||A.getAttribute("event"),h=
A.getAttribute(q+"prop"),D=A.getAttribute(q+"method"),G=A.getAttribute(q+"advice"),v=A.getAttribute("type"),A=this._functionFromScript(A,q),f?"dojo/connect"==v?F.push({method:f,func:A}):"dojo/on"==v?Q.push({event:f,func:A}):s[f]=A:"dojo/aspect"==v?F.push({method:D,advice:G,func:A}):"dojo/watch"==v?P.push({prop:h,func:A}):S.push(A);b=(g=b.markupFactory||u.markupFactory)?g(s,d,b):new b(s,d);return b.then?b.then(x):x(b)},scan:function(a,b){function e(a){if(!a.inherited){a.inherited={};var b=a.node,c=
e(a.parent),b={dir:b.getAttribute("dir")||c.dir,lang:b.getAttribute("lang")||c.lang,textDir:b.getAttribute(k)||c.textDir},d;for(d in b)b[d]&&(a.inherited[d]=b[d])}return a.inherited}var c=[],d=[],f={},p=(b.scope||n._scopeName)+"Type",h="data-"+(b.scope||n._scopeName)+"-",g=h+"type",k=h+"textdir",h=h+"mixins",s=a.firstChild,w=b.inherited;if(!w){var y=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&y(a.parentNode,b)},w={dir:y(a,"dir"),lang:y(a,"lang"),textDir:y(a,k)},t;for(t in w)w[t]||
delete w[t]}for(var w={inherited:w},v,D;;)if(s)if(1!=s.nodeType)s=s.nextSibling;else if(v&&"script"==s.nodeName.toLowerCase())(C=s.getAttribute("type"))&&/^dojo\/\w/i.test(C)&&v.push(s),s=s.nextSibling;else if(D)s=s.nextSibling;else{var C=s.getAttribute(g)||s.getAttribute(p);t=s.firstChild;if(!C&&(!t||3==t.nodeType&&!t.nextSibling))s=s.nextSibling;else{D=null;if(C){var I=s.getAttribute(h);v=I?[C].concat(I.split(/\s*,\s*/)):[C];try{D=u(v,b.contextRequire)}catch(R){}D||m.forEach(v,function(a){~a.indexOf("/")&&
!f[a]&&(f[a]=!0,d[d.length]=a)});I=D&&!D.prototype._noScript?[]:null;w={types:v,ctor:D,parent:w,node:s,scripts:I};w.inherited=e(w);c.push(w)}else w={node:s,scripts:v,parent:w};v=I;D=s.stopParser||D&&D.prototype.stopParser&&!b.template;s=t}}else{if(!w||!w.node)break;s=w.node.nextSibling;D=!1;w=w.parent;v=w.scripts}var F=new x;d.length?(l("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+d.join(", ")),(b.contextRequire||q)(d,function(){F.resolve(m.filter(c,function(a){if(!a.ctor)try{a.ctor=
u(a.types,b.contextRequire)}catch(e){}for(var c=a.parent;c&&!c.types;)c=c.parent;var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))})):F.resolve(c);return F.promise},_require:function(a,b){var e=p("{"+a.innerHTML+"}"),c=[],d=[],f=new x,h=b&&b.contextRequire||q,g;for(g in e)c.push(g),d.push(e[g]);h(d,function(){for(var a=0;a<c.length;a++)k.setObject(c[a],arguments[a]);f.resolve(arguments)});
return f.promise},_scanAmd:function(a,b){var e=new x,c=e.promise;e.resolve(!0);var d=this;y("script[type\x3d'dojo/require']",a).forEach(function(a){c=c.then(function(){return d._require(a,b)});a.parentNode.removeChild(a)});return c},parse:function(a,b){a&&("string"!=typeof a&&!("nodeType"in a))&&(b=a,a=b.rootNode);var e=a?f.byId(a):g.body();b=b||{};var c=b.template?{template:!0}:{},d=[],h=this,p=this._scanAmd(e,b).then(function(){return h.scan(e,b)}).then(function(a){return h._instantiate(a,c,b,!0)}).then(function(a){return d=
d.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});k.mixin(d,p);return d}};n.parser=v;d.parseOnLoad&&b(100,v,"parse");return v})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(q,n){var k={};q.setObject("dojo.date.stamp",k);k.fromISOString=function(m,d){k._isoRegExp||(k._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var f=k._isoRegExp.exec(m),g=null;
if(f){f.shift();f[1]&&f[1]--;f[6]&&(f[6]*=1E3);d&&(d=new Date(d),n.forEach(n.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(a){return d["get"+a]()}),function(a,e){f[e]=f[e]||a}));g=new Date(f[0]||1970,f[1]||0,f[2]||1,f[3]||0,f[4]||0,f[5]||0,f[6]||0);100>f[0]&&g.setFullYear(f[0]||1970);var c=0,a=f[7]&&f[7].charAt(0);"Z"!=a&&(c=60*(f[8]||0)+(Number(f[9])||0),"-"!=a&&(c*=-1));a&&(c-=g.getTimezoneOffset());c&&g.setTime(g.getTime()+6E4*c)}return g};k.toISOString=function(k,
d){var f=function(a){return 10>a?"0"+a:a};d=d||{};var g=[],c=d.zulu?"getUTC":"get",a="";"time"!=d.selector&&(a=k[c+"FullYear"](),a=["0000".substr((a+"").length)+a,f(k[c+"Month"]()+1),f(k[c+"Date"]())].join("-"));g.push(a);if("date"!=d.selector){a=[f(k[c+"Hours"]()),f(k[c+"Minutes"]()),f(k[c+"Seconds"]())].join(":");c=k[c+"Milliseconds"]();d.milliseconds&&(a+="."+(100>c?"0":"")+f(c));if(d.zulu)a+="Z";else if("time"!=d.selector)var c=k.getTimezoneOffset(),h=Math.abs(c),a=a+((0<c?"-":"+")+f(Math.floor(h/
60))+":"+f(h%60));g.push(a)}return g.join("T")};return k})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(q,n,k,m,d,f){return q([f,d],{_onMap:function(d){var c=this.constructor._onMap,a;if(!c||!c.FINAL)delete this.constructor._onMap,c=this.registerConnectEvents(),c.FINAL=!0;d=d.toLowerCase();c[d]?a=this[c[d].method]:(d=this._onCamelCase(d),this[d]&&(a=d));return a},on:function(d,c){var a=this._onMap(d),
f=d.replace(/\-/g,""),e="on"+f in this.domNode;return a||!e?this.inherited(arguments):this.own(m(this.domNode,f,c))[0]},emit:function(d,c,a){var f,e,k,l=d.toLowerCase(),m=this.constructor._onMap||this.registerConnectEvents();e=this[this._onMap(l)];c=c||{};c.target||(c.target=this);e&&(m&&m[l])&&(this._onObj2Arr(function(){f=Array.prototype.slice.call(arguments)},m[l].argKeys)(c),k=n.mixin({},arguments),k[2]=f,k[0]=m[l].name.replace(/^on/,""));return this.inherited(k||arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare",
"dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(q,n,k,m){return q("dijit.form.ToggleButton",[k,m],{baseClass:"dijitToggleButton",setChecked:function(d){n.deprecated("setChecked("+d+") is deprecated. Use set('checked',"+d+") instead.","","2.0");this.set("checked",d)}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(q,n,k,m,d,f,g,c,a,h){m("dijit-legacy-requires")&&g(0,function(){q(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});g=n("dijit.form.Button"+(m("dojo-bidi")?"_NoBidi":""),[c,a],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:h,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);
this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=f.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&k.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){d.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);!this.showLabel&&
!("title"in this.params)&&(this.titleNode.title=f.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});m("dojo-bidi")&&(g=n("dijit.form.Button",g,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return g})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(q,n,k,m,d,f,g,c){n("dijit-legacy-requires")&&m(0,function(){require(["dijit/form/_FormValueWidget"])});return q("dijit.form._FormWidget",[d,g,f,c],{setDisabled:function(a){k.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},setValue:function(a){k.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){k.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!n("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(q,n,k,m,d,f,g,c,a,h){return n("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",a);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?k.set(this.focusNode,"disabled",a):this.focusNode.setAttribute("aria-disabled",a?"true":"false");this.valueNode&&k.set(this.valueNode,"disabled",a);a?(this._set("hovering",!1),
this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",q.forEach(d.isArray(a)?a:[a],function(a){a=this[a];c("webkit")||h.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(e){if("mouse"==e&&this.isFocusable())var f=this.own(g(this.focusNode,"focus",function(){k.remove();f.remove()}))[0],h=c("pointer-events")?
"pointerup":c("MSPointer")?"MSPointerUp":c("touch-events")?"touchend, mouseup":"mouseup",k=this.own(g(this.ownerDocumentBody,h,d.hitch(this,function(a){k.remove();f.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){a.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=m.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},
compare:function(a,c){return"number"==typeof a&&"number"==typeof c?isNaN(a)&&isNaN(c)?0:a-c:a>c?1:a<c?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,c){if(void 0==this._lastValueReported&&(null===c||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);if((this.intermediateChanges||c||void 0===c)&&this._pendingOnChange)this._lastValueReported=
a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)}))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],
function(q,n,k,m){var d=q("dijit.form._ButtonMixin"+(k("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(d){d.stopPropagation();d.preventDefault();this.disabled||this.valueNode.click(d);return!1},_onClick:function(d){if(this.disabled)return d.stopPropagation(),d.preventDefault(),!1;!1===this.onClick(d)&&d.preventDefault();var g=d.defaultPrevented;if(!g&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var c=this.domNode;c.parentNode;c=c.parentNode){var a=m.byNode(c);
if(a&&"function"==typeof a._onSubmit){a._onSubmit(d);d.preventDefault();g=!0;break}}return!g},postCreate:function(){this.inherited(arguments);n.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(d){this._set("label",d);(this.containerNode||this.focusNode).innerHTML=d;this.onLabelSet()},onLabelSet:function(){}});k("dojo-bidi")&&(d=q("dijit.form._ButtonMixin",d,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));
return d})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(q,n){return q("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(k){var m=this.checked;this._set("checked",!m);var d=this.inherited(arguments);this.set("checked",d?this.checked:m);return d},_setCheckedAttr:function(k,m){this._set("checked",k);var d=this.focusNode||this.domNode;this._created&&n.get(d,"checked")!=!!k&&n.set(d,"checked",!!k);d.setAttribute(this._aria_attr,
String(k));this._handleOnChange(k,m)},postCreate:function(){this.inherited(arguments);var k=this.focusNode||this.domNode;this.checked&&k.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "),
function(q,n,k,m,d,f,g,c,a,h){return q("dijit.form.DropDownButton",[g,c,a],{baseClass:"dijitDropDownButton",templateString:h,_fillContent:function(){var a=this.srcNodeRef,c=this.containerNode;if(a&&c)for(;a.hasChildNodes();){var d=a.firstChild;d.hasAttribute&&(d.hasAttribute("data-dojo-type")||d.hasAttribute("dojoType")||d.hasAttribute("data-"+n._scopeName+"-type")||d.hasAttribute(n._scopeName+"Type"))?(this.dropDownContainer=this.ownerDocument.createElement("div"),this.dropDownContainer.appendChild(d)):
c.appendChild(d)}},startup:function(){this._started||(!this.dropDown&&this.dropDownContainer&&(this.dropDown=d.byNode(this.dropDownContainer.firstChild),delete this.dropDownContainer),this.dropDown&&f.hide(this.dropDown),this.inherited(arguments))},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var c=this.dropDown,d=c.on("load",k.hitch(this,function(){d.remove();a()}));c.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},
"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(q,n,k,m,d,f,g,c,a,h,e,x,l,y,t,b){return q("dijit._HasDropDown",b,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,
_onDropDownMouseDown:function(a){!this.disabled&&!this.readOnly&&("MSPointerDown"!=a.type&&"pointerdown"!=a.type&&a.preventDefault(),this.own(e.once(this.ownerDocument,x.release,h.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(a){var b=this.dropDown,e=!1;if(a&&this._opened){var c=f.position(this._buttonNode,!0);if(!(a.pageX>=c.x&&a.pageX<=c.x+c.w)||!(a.pageY>=c.y&&a.pageY<=c.y+c.h)){for(c=a.target;c&&!e;)d.contains(c,"dijitPopup")?e=!0:c=c.parentNode;if(e){c=
a.target;if(b.onItemClick){for(var h;c&&!(h=l.byNode(c));)c=c.parentNode;if(h&&h.onClick&&h.getParent)h.getParent().onItemClick(h,a)}return}}}if(this._opened){if(b.focus&&(!1!==b.autoFocus||"mouseup"==a.type&&!this.hovering))this._focusDropDownTimer=this.defer(function(){b.focus();delete this._focusDropDownTimer})}else this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=
this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";d.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(e(this._buttonNode,
x.press,h.hitch(this,"_onDropDownMouseDown")),e(this._buttonNode,"click",h.hitch(this,"_onDropDownClick")),e(a,"keydown",h.hitch(this,"_onKey")),e(a,"keyup",h.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(b){if(!this.disabled&&!this.readOnly){var e=this.dropDown,c=b.target;if(e&&(this._opened&&e.handleKey)&&!1===e.handleKey(b))b.stopPropagation(),
b.preventDefault();else if(e&&this._opened&&b.keyCode==a.ESCAPE)this.closeDropDown(),b.stopPropagation(),b.preventDefault();else if(!this._opened&&(b.keyCode==a.DOWN_ARROW||(b.keyCode==a.ENTER||b.keyCode==a.SPACE&&(!this._searchTimer||b.ctrlKey||b.altKey||b.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||c.type&&"text"!==c.type.toLowerCase())))this._toggleOnKeyUp=!0,b.stopPropagation(),b.preventDefault()}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();
var a=this.dropDown;a&&a.focus&&this.defer(h.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new n,b=h.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=
this.dropDown,b=a.domNode,e=this._aroundNode||this.domNode,c=this,g=t.open({parent:this,popup:a,around:e,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){c.closeDropDown(!0)},onCancel:function(){c.closeDropDown(!0)},onClose:function(){m.set(c._popupStateNode,"popupActive",!1);d.remove(c._popupStateNode,"dijitHasDropDownOpen");c._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&e.offsetWidth>a._popupWrapper.offsetWidth){var e=e.offsetWidth-a._popupWrapper.offsetWidth,
k={w:a.domNode.offsetWidth+e};this._origStyle=b.style.cssText;h.isFunction(a.resize)?a.resize(k):f.setMarginBox(b,k);"R"==g.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-e+"px")}m.set(this._popupStateNode,"popupActive","true");d.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"!==b.getAttribute("role")&&!b.getAttribute("aria-labelledby")&&
b.setAttribute("aria-labelledby",this.id);return g},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus&&this.focus(),t.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,delete this._origStyle)}})})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(q,n,k,m,d,f,g,c,a,h,e,x,l,y,t,b){return a("dijit.layout.ContentPane",[k,m,d],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:q._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,e){var c=new e(a,b);return!c.href&&c._contentSetter&&c._contentSetter.parseDeferred&&!c._contentSetter.parseDeferred.isFulfilled()?c._contentSetter.parseDeferred.then(function(){return c}):c},create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){b=e.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);
a=n.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=t.getLocalization("dijit","loading",this.lang);this.loadingMessage=f.substitute(this.loadingMessage,a);this.errorMessage=f.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&c.forEach(this._contentSetter.parseResults,
function(a){!a._started&&(!a._destroyed&&n.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},_startChildren:function(){c.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&n.isFunction(a.startup))&&(a.startup(),a._started=!0)});this._contentSetter&&c.forEach(this._contentSetter.parseResults,function(a){!a._started&&(!a._destroyed&&n.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},setHref:function(a){q.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new h(n.hitch(this,"cancel"));this.onLoadDeferred.then(n.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){q.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new h(n.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(n.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new h(n.hitch(this,"cancel"));this.onLoadDeferred.then(n.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
n.isObject(this.ioArgs)&&n.mixin(b,this.ioArgs);var e=this._xhrDfd=(this.ioMethod||y.get)(b),c;e.then(function(b){c=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(e){a._onError("Content",e)}},function(b){e.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return c});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+
" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;c.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(c.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||l.empty(this.containerNode);delete this._singleChild},_setContent:function(a,e){a=this.preprocessContent(a);this.destroyDescendants();var c=this._contentSetter;c&&c instanceof g._ContentSetter||(c=this._contentSetter=new g._ContentSetter({node:this.containerNode,_onError:n.hitch(this,this._onError),onContentError:n.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+
this.id+" could not change content due to "+b.message,b)}})}));var d=n.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=c.set(n.isObject(a)&&a.domNode?a.domNode:a,d),f=this;return b(d&&d.then?d:c.parseDeferred,function(){delete f._contentSetterParams;e||(f._started&&(f._startChildren(),f._scheduleLayout()),f._onLoadHandler(a))})},
preprocessContent:function(a){return a},_onError:function(a,b,e){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);e?console.error(e,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(q,n,k,m,d,f,g,c,a,h){return n("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var e=this.getParent();this._childOfLayoutWidget=e&&e.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(a.on("resize",f.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],d=!1;g("\x3e *",this.containerNode).some(function(f){var h=
c.byNode(f);h&&h.resize?a.push(h):!/script|link|style/i.test(f.nodeName)&&f.offsetHeight&&(d=!0)});this._singleChild=1==a.length&&!d?a[0]:null;k.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,c){this._resizeCalled=!0;this._scheduleLayout(a,c)},_scheduleLayout:function(a,c){this._isShown()?this._layout(a,c):(this._needLayout=!0,this._changeSize=a,this._resultSize=c)},_layout:function(a,c){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();
a&&m.setMarginBox(this.domNode,a);var d=this.containerNode;if(d===this.domNode){var g=c||{};f.mixin(g,a||{});if(!("h"in g)||!("w"in g))g=f.mixin(m.getMarginBox(d),g);this._contentBox=h.marginBox2contentBox(d,g)}else this._contentBox=m.getContentBox(d);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||m.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),
c,d=0;c=a[d++];)c.resize&&c.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,c=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!k.contains(a,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(q,n,k,m,d){function f(c,a){var f=c.resize?c.resize(a):k.setMarginBox(c.domNode,a);f?d.mixin(c,f):(d.mixin(c,k.getMarginBox(c.domNode)),d.mixin(c,a))}var g={marginBox2contentBox:function(c,a){var d=m.getComputedStyle(c),e=k.getMarginExtents(c,d),f=k.getPadBorderExtents(c,d);return{l:m.toPixelValue(c,d.paddingLeft),t:m.toPixelValue(c,d.paddingTop),w:a.w-(e.w+f.w),h:a.h-(e.h+f.h)}},layoutChildren:function(c,a,h,e,g){a=
d.mixin({},a);n.add(c,"dijitLayoutContainer");h=q.filter(h,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(q.filter(h,function(a){return"center"==a.region||"client"==a.layoutAlign}));q.forEach(h,function(c){var d=c.domNode,h=c.region||c.layoutAlign;if(!h)throw Error("No region setting for "+c.id);var b=d.style;b.left=a.l+"px";b.top=a.t+"px";b.position="absolute";n.add(d,"dijitAlign"+(h.substring(0,1).toUpperCase()+h.substring(1)));d={};e&&e==c.id&&(d["top"==c.region||"bottom"==
c.region?"h":"w"]=g);"leading"==h&&(h=c.isLeftToRight()?"left":"right");"trailing"==h&&(h=c.isLeftToRight()?"right":"left");"top"==h||"bottom"==h?(d.w=a.w,f(c,d),a.h-=c.h,"top"==h?a.t+=c.h:b.top=a.t+a.h+"px"):"left"==h||"right"==h?(d.h=a.h,f(c,d),a.w-=c.w,"left"==h?a.l+=c.w:b.left=a.l+a.w+"px"):("client"==h||"center"==h)&&f(c,a)})}};d.setObject("dijit.layout.utils",g);return g})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(q,n,k,m,d,f,g){var c=0,a={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:f.empty,_setNodeContent:function(a,c){f.empty(a);if(c)if("number"==typeof c&&(c=c.toString()),"string"==typeof c&&(c=f.toDom(c,a.ownerDocument)),!c.nodeType&&n.isArrayLike(c))for(var d=c.length,g=0;g<c.length;g=d==c.length?g+1:0)f.place(c[g],a,"last");else f.place(c,a,"last");return a},_ContentSetter:m("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:q._scopeName,startup:!0,constructor:function(a,e){n.mixin(this,a||{});e=this.node=d.byId(this.node||e);this.id||(this.id=["Setter",e?e.id||e.tagName:"",c++].join("_"))},set:function(a,c){void 0!==a&&(this.content=a);c&&this._mixin(c);this.onBegin();this.setContent();var d=this.onEnd();return d&&d.then?d:this.node},setContent:function(){var c=this.node;if(!c)throw Error(this.declaredClass+": setContent given no node");try{c=
a._setNodeContent(c,this.content)}catch(d){var f=this.onContentError(d);try{c.innerHTML=f}catch(g){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+g.message,g)}}this.node=c},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(k.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);f.empty(this.node)},onBegin:function(){var c=
this.content;if(n.isString(c)&&(this.cleanContent&&(c=a._secureForInnerHtml(c)),this.extractContent)){var d=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);d&&(c=d[1])}this.empty();this.content=c;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+
a},_mixin:function(a){var c={},d;for(d in a)d in c||(this[d]=a[d])},_parse:function(){var a=this.node;try{var c={};k.forEach(["dir","lang","textDir"],function(a){this[a]&&(c[a]=this[a])},this);var d=this;this.parseDeferred=g.parse({rootNode:a,noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(f){this._onError("Content",f,"Error parsing in _ContentSetter#"+this.id)}},
_onError:function(c,d,f){c=this["on"+c+"Error"].call(this,d);f?console.error(f,d):c&&a._setNodeContent(this.node,c,!0)}}),set:function(c,d,f){void 0==d&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),d="");"number"==typeof d&&(d=d.toString());return f?(new a._ContentSetter(n.mixin(f,{content:d,node:c}))).set():a._setNodeContent(c,d,!0)}};n.setObject("dojo.html",a);return a})},"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',
"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:esri/dijit/templates/Measurement.html":"\x3cdiv class\x3d\"esriMeasurement\"\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' class\x3d'esriMeasurementButtonContainer'\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_areaButton' iconClass\x3d'areaIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_areaButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_distanceButton' iconClass\x3d'distanceIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_distanceButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv dojoType\x3d'dijit.form.ToggleButton' baseClass\x3d'esriButton' dojoAttachPoint\x3d'_locationButton' iconClass\x3d'locationIcon' showLabel\x3d'false' dojoAttachEvent\x3d'onClick:_locationButtonToggle'\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d\"esriMeasurementSeparator\"\x3e|\x3c/div\x3e\r\n    \x3cbutton dojoType\x3d'dijit.form.DropDownButton' baseClass\x3d'esriToggleButton' dojoAttachPoint\x3d'_unitDropDown' label\x3d'unit' value\x3d'unit' style\x3d'visibility:hidden;'\x3e\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultLabel' class\x3d'resultLabel esriMeasurementResultLabel'\x3e\x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValueContainer' align\x3d'leading' class\x3d\"esriMeasurementResultValue\"\x3e\r\n    \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultValue' class\x3d'result'\x3e\x26nbsp;\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv dojoType\x3d'dijit.layout.ContentPane' dojoAttachPoint\x3d'resultTable' align\x3d'leading' class\x3d\"resultTable esriMeasurementTableContainer\" style\x3d\"display:none;\"\x3e\r\n    \x3ctable class\x3d\"esriMeasurementResultTable\"\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableHeader\" colspan\x3d\"2\"\x3e${_NLS_Lat}\x3c/td\x3e\x3ctd class\x3d\"esriMeasurementTableHeader\"\x3e${_NLS_Lon}\x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\" dojoAttachPoint\x3d\"_mouseRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"mouseCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"mouseLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d\"esriMeasurementTableRow\"\x3e\r\n        \x3ctd dojoAttachPoint\x3d\"pinCell\"\x3e\x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLatitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d\"esriMeasurementTableCell\"\x3e\r\n          \x3cspan dojoAttachPoint\x3d\"markerLongitude\" dir\x3d'ltr'\x3e\x3c/span\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
"*now":function(q){q(['dojo/i18n!*preload*esri/dijit/nls/Measurement*["ar","az","ca","cs","da","de-de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
define("esri/dijit/Measurement","require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/debounce dojo/sniff dojo/dom-style dojo/dom-construct dojox/gfx dijit/_Widget dijit/registry dijit/Menu dijit/MenuItem ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../geometry/geodesicUtils ../geometry/webMercatorUtils ../geometry/Point ../geometry/Polyline ../geometry/Polygon ../graphic ../tasks/AreasAndLengthsParameters ../tasks/LengthsParameters ../tasks/GeometryService ../kernel ../config ../domUtils ../numberUtils ../lang ../units ../WKIDUnitConversion ../SpatialReference dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./_EventedWidget dojo/text!./templates/Measurement.html dojo/i18n!../nls/jsapi dijit/form/ToggleButton dijit/form/DropDownButton dijit/layout/ContentPane".split(" "),function(q,
n,k,m,d,f,g,c,a,h,e,x,l,y,t,b,p,w,u,s,v,H,r,K,E,J,T,L,O,U,M,G,A,z,B,N,D,C,I,R,F){n=n([I,x,D,C],{declaredClass:"esri.dijit.Measurement",widgetsInTemplate:!0,templateString:R,_map:null,_geometryService:null,_interpolatedMap:null,_mouseImgURL:null,_defaultPinURL:null,_measureGraphics:[],_measureGraphic:null,_locationGraphic:null,_tempGraphic:null,_polylineGraphics:null,_polygonGraphic:null,_pointSymbol:null,_useDefaultPointSymbol:!0,_defaultLineSymbol:null,_lineSymbol:null,_areaLineSymbol:null,_defaultFillSymbol:null,
_fillSymbol:null,_borderlessFillSymbol:null,_inputPoints:[],_unitDictionary:[],numberPattern:"#,###,###,##0.0",result:null,_defaultDistanceUnit:null,_defaultAreaUnit:null,_defaultLocationUnit:null,currentDistanceUnit:null,currentAreaUnit:null,currentLocationUnit:null,_unitStrings:{},_locationUnitStrings:[],_locationUnitStringsLong:[],_distanceUnitStrings:[],_distanceUnitStringsLong:[],_areaUnitStrings:[],_areaUnitStringsLong:[],_calculatingMsg:null,_gsErrorMsg:null,_NLS_Lat:null,_NLS_Lon:null,_mouseMoveMapHandler:null,
_mouseClickMapHandler:null,_doubleClickMapHandler:null,_mouseDragMapHandler:null,_clickMapHandler:null,_mapExtentChangeHandler:null,_geometryAreaHandler:null,_snappingCallback:null,_calcTimer:null,_buttonDijits:{},previousTool:null,activeTool:null,markerLongitude:null,markerLatitude:null,mouseLongitude:null,mouseLatitude:null,_eventMap:{"measure-start":["toolName","unitName"],measure:["toolName","geometry","values","unitName","segmentLength"],"measure-end":["toolName","geometry","values","unitName"],
"tool-change":["toolName","unitName","previousToolName"],"unit-change":["unitName","toolName"]},constructor:function(a,c){a=a||{};if(a.map){this._map=a.map;if(this._map.loaded)this._map.cs=this._checkCS(this._map.spatialReference),this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===this._map.cs);else var e=d.connect(this._map,"onLoad",this,function(){d.disconnect(e);e=null;this._map.cs=this._checkCS(this._map.spatialReference);this._interpolatedMap=!("Web Mercator"===this._map.cs||"PCS"===
this._map.cs)});this._geometryService=U.defaults.geometryService;this._mouseImgURL=q.toUrl("./images/cursor16x24.png");this._defaultPinURL=q.toUrl("./images/esriGreenPin16x26.png");this._defaultLineSymbol=new p(p.STYLE_SOLID,new f([0,128,255]),3);this._defaultFillSymbol=new w(p.STYLE_SOLID,new p(p.STYLE_SOLID,new f([0,128,255]),3),new f([0,0,0,0.5]));a.pointSymbol?(this._pointSymbol=a.pointSymbol,this._useDefaultPointSymbol=!1):(this._pointSymbol=new b(this._defaultPinURL,16,26),this._pointSymbol.setOffset(0,
12));var h=a.fillSymbol||this._defaultFillSymbol;this._fillSymbol=h;this._areaLineSymbol=h.outline||this._defaultLineSymbol;this._borderlessFillSymbol=u.fromJson(h.toJson());this._borderlessFillSymbol.setOutline(null);this._lineSymbol=a.lineSymbol?a.lineSymbol:this._defaultLineSymbol;this._defaultDistanceUnit=a.defaultLengthUnit?a.defaultLengthUnit:z.MILES;this._defaultAreaUnit=a.defaultAreaUnit?a.defaultAreaUnit:z.ACRES;this._defaultLocationUnit=a.defaultLocationUnit?a.defaultLocationUnit:z.DECIMAL_DEGREES;
this._snappingCallback=k.hitch(this,this._snappingCallback);a.geometry&&(this._userGeometry=a.geometry);this._calcTimer=null;this.advancedLocationUnits=a.advancedLocationUnits||!1;this._NLS_Lon=F.widgets.measurement.NLS_longitude;this._NLS_Lat=F.widgets.measurement.NLS_latitude;this._gsErrorMsg=F.widgets.measurement.NLS_geometry_service_error;this._calculatingMsg=F.widgets.measurement.NLS_calculating;this._geometryServiceLength=g(this._geometryServiceLength,250)}else console.log("Unable to find the required 'map' property in widget parameters")},
startup:function(){this._setupDictionaries();h.create("img",{src:this._mouseImgURL,style:"vertical-align:middle"},this.mouseCell);this._useDefaultPointSymbol?h.create("img",{src:this._defaultPinURL,style:"vertical-align:middle"},this.pinCell):this._drawPointGraphics(this.pinCell);if(this._userGeometry)if(this._map.loaded)this._measureCustomGeometry();else var a=d.connect(this._map,"onLoad",this,function(){d.disconnect(a);a=null;this._measureCustomGeometry()})},destroy:function(){this._resetToolState();
this.clearResult();this.inherited(arguments);this._map=this._geometryService=this._measureGraphics=this._measureGraphic=this._tempGraphic=null},setTool:function(b,c){this.previousTool=this.activeTool||null;this._polylineGraphics=[];this._resetToolState();this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null);var d=l.byNode(this._buttonDijits[b].domNode).checked;a.set(this._unitDropDown.domNode,"visibility","visible");l.byNode(this._buttonDijits.area.domNode).set("checked",
!1);l.byNode(this._buttonDijits.distance.domNode).set("checked",!1);l.byNode(this._buttonDijits.location.domNode).set("checked",!1);if(!0===c||!1===c)d=c;l.byNode(this._buttonDijits[b].domNode).set("checked",d);this._toggleLocationResultsTable(!1,!0);d?(this.activeTool=b,(this._dblClickZoom=this._map.isDoubleClickZoom)&&this._map.disableDoubleClickZoom(),"area"===b?this._setupAreaTool():"distance"===b?this._setupDistanceTool():"location"===b&&this._setupLocationTool(),this._map.snappingManager&&(this._map.snappingManager._startSelectionLayerQuery(),
this._map.snappingManager._setUpSnapping())):(this.activeTool=null,a.set(this._unitDropDown.domNode,"visibility","hidden"));if(this.activeTool!==this.previousTool)this.onToolChange(this.activeTool,this.getUnit(),this.previousTool)},measure:function(a){a&&(this._userGeometry=a,this._measureCustomGeometry())},clearResult:function(){var a=this._map,b;this.result=0;this.resultValue.setContent("\x26nbsp");for(b=0;b<this._measureGraphics.length;b++)a.graphics.remove(this._measureGraphics[b]);this._measureGraphic=
null;this._measureGraphics=[];a.graphics.remove(this._tempGraphic);d.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null},show:function(){M.show(this.domNode)},hide:function(){M.hide(this.domNode)},showTool:function(b){a.set(this._buttonDijits[b].domNode,"display","inline-block")},hideTool:function(b){a.set(this._buttonDijits[b].domNode,"display","none")},getTool:function(){if(this.activeTool)return{toolName:this.activeTool,unitName:this.getUnit()}},getUnit:function(){if("unit"!==
this._unitDropDown.label)return this._unitDropDown.label},_setupLocationTool:function(){this._map.navigationManager.setImmediateClick(!0);this._measureGraphics=[];this._map.graphics.remove(this._locationGraphic);this._createLocationUnitList();"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),this._mapExtentChangeHandler=d.connect(this._map,"onExtentChange",k.hitch(this,this._projectMapExtent)));this._clickMapHandler=d.connect(this._map,"onClick",this,"_locationClickHandler");if("esriDegreeMinuteSeconds"===
this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_locationMoveHandler")},_locationButtonToggle:function(){this.clearResult();this.setTool("location")},_measureCustomPoint:function(){this.setTool("location",!0);"Web Mercator"===this._map.cs&&this._userGeometry.spatialReference!==this._map.spatialReference&&(this._userGeometry=v.geographicToWebMercator(this._userGeometry));this._measureGraphic=new E;this._measureGraphic.setSymbol(this._pointSymbol);
this._measureGraphic.setGeometry(this._userGeometry);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._calculateLocation(this._userGeometry,!0)},_calculateLocation:function(a,b){var c=!("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit);c&&this._mouseMoveMapHandler&&(d.disconnect(this._mouseMoveMapHandler),this._mouseMoveMapHandler=null);var e=k.clone(a);if(b){if("Web Mercator"!==this.map.cs&&this.map.spatialReference&&
4326!==this.map.spatialReference.wkid){this._projectLocation(e,c);return}this._updateMarkerLocation(e.x,e.y)}e=this._getGCSLocation(e);this._advancedLocationDisplayHandler(e,c,b)},_projectLocation:function(a,b){this._geometryService.project([a],new N({wkid:4326}),k.hitch(this,function(a){this._advancedLocationDisplayHandler(a[0],b,!0)}),k.hitch(this,function(a){console.log(this._gsErrorMsg,a)}))},_advancedLocationDisplayHandler:function(a,b,c){b?this._updateGeocoordinateStringLocation({coordinates:[[a.x,
a.y]],sr:{wkid:4326},conversionType:this._unitStrings[this.currentLocationUnit]},a):(b=this._calculateXY(a.x,a.y),c?(this._updateClickLocation(b[0],b[1]),this.onMeasureEnd(this.activeTool,a,[b[0],b[1]],this.getUnit())):this._updateMouseLocation(b[0],b[1]))},_updateMarkerLocation:function(a,b){this.markerLocationX=a;this.markerLocationY=b},_updateMouseLocation:function(a,b){this.mouseLongitude.innerHTML=a;this.mouseLatitude.innerHTML=b},_updateClickLocation:function(a,b){this._updateMouseLocation(a,
b);this.markerLongitude.innerHTML=a;this.markerLatitude.innerHTML=b},_updateGeocoordinateStringLocation:function(a,b){this.resultValue.setContent("\x26nbsp");this._geometryService.toGeoCoordinateString(a,k.hitch(this,function(a){clearTimeout(this._calcTimer);a?(this.resultValue.setContent(a[0]),this.onMeasureEnd(this.activeTool,b,a,this.getUnit())):(this.resultValue.setContent(this._gsErrorMsg),this.onMeasureEnd(this.activeTool,null,null,this.getUnit()))}));clearTimeout(this._calcTimer);this._calcTimer=
setTimeout(k.hitch(this,function(){this.resultValue.setContent(this._calculatingMsg)},1E3))},_switchLocationUnit:function(a){l.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]);this.currentLocationUnit=a;d.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;this.onUnitChange(this._unitStrings[a],this.activeTool);if("esriDegreeMinuteSeconds"===a||"esriDecimalDegrees"===a)this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_locationMoveHandler"),this._toggleLocationResultsTable(!0,
!1),this._locationGraphic&&this._calculateLocation(this._locationGraphic.geometry,!0);else if(this._toggleLocationResultsTable(!1,!1),!(null===this.resultValue||null===this.markerLocationX&&null===this.markerLocationY)&&this._locationGraphic){var b=this._getGCSLocation(this._locationGraphic.geometry);this._updateGeocoordinateStringLocation({coordinates:[[b.x,b.y]],sr:{wkid:4326},conversionType:this._unitStrings[a]},this._locationGraphic.geometry)}},_toggleLocationResultsTable:function(a,b){b&&(this.resultValue.setContent("\x26nbsp"),
this.markerLongitude.innerHTML="---",this.markerLatitude.innerHTML="---",this.mouseLongitude.innerHTML="---",this.mouseLatitude.innerHTML="---");a?(M.show(this.resultTable.domNode),M.hide(this.resultValueContainer.domNode)):(M.hide(this.resultTable.domNode),M.show(this.resultValueContainer.domNode),d.disconnect(this._mouseMoveMapHandler));"PCS"===this._map.cs&&M.hide(this._mouseRow)},_setupDistanceTool:function(){this._map.navigationManager.setImmediateClick(!0);"PCS"===this._map.cs&&(this._projectMapExtent(this._map.extent),
this._mapExtentChangeHandler=d.connect(this._map,"onExtentChange",this,"_projectMapExtent"));this._inputPoints=[];this._createDistanceUnitList();this._mouseClickMapHandler=d.connect(this._map,"onClick",this,"_measureDistanceMouseClickHandler");this._doubleClickMapHandler=d.connect(this._map,"onDblClick",this,"_measureDistanceDblClickHandler")},_distanceButtonToggle:function(){this.clearResult();this.setTool("distance")},_measureCustomDistance:function(){if(1<this._userGeometry.paths[0].length){this.setTool("distance",
!0);this._inputPoints=[];m.forEach(this._userGeometry.paths[0],k.hitch(this,function(a,b){this._inputPoints.push(a);var c=new E(new H(a[0],a[1],this._userGeometry.spatialReference),this._pointSymbol);this._measureGraphics.push(c);this._map.graphics.add(c);0!==b&&(this.result+=this._geodesicDistance(a,this._userGeometry.paths[0][b-1]))}));this._measureGraphic=new E;this._measureGraphic.setSymbol(this._lineSymbol);this._measureGraphics.push(this._measureGraphic);this._userGeometry=this._densifyGeometry(this._userGeometry);
this._measureGraphic.setGeometry(this._userGeometry);this._map.graphics.add(this._measureGraphic);this._inputPoints=[];var a=this._outputResult(this.result,this.getUnit());this.onMeasureEnd(this.activeTool,this._userGeometry,a,this.getUnit())}},_showDistance:function(a){a&&this._outputResult(a,l.byNode(this._unitDropDown.domNode).label)},_setupAreaTool:function(){this._map.navigationManager.setImmediateClick(!0);this._inputPoints=[];this._createAreaUnitList();this._tempGraphic=new E;this._tempGraphic.setSymbol(this._areaLineSymbol);
this._tempGraphic.setGeometry(new r(this._map.spatialReference));this._map.graphics.add(this._tempGraphic);"PCS"===this._map.cs&&(this._geometryAreaHandler=d.connect(this._geometryService,"onAreasAndLengthsComplete",this,"_outputArea"));this._mouseClickMapHandler=d.connect(this._map,"onClick",this,"_measureAreaMouseClickHandler");this._doubleClickMapHandler=d.connect(this._map,"onDblClick",this,"_measureAreaDblClickHandler")},_areaButtonToggle:function(){this.clearResult();this.setTool("area")},_generatePolygonFromPaths:function(){var a=
[];m.forEach(this._polylineGraphics,k.hitch(this,function(b){m.forEach(b.geometry.paths,k.hitch(this,function(b){m.forEach(b,k.hitch(this,function(b){a.push(b)}))}))}));a.push(a[0]);var b=new K(this._map.spatialReference);b.addRing(a);var b=this._densifyGeometry(b),c=new E;c.setGeometry(b);c.setSymbol(this._borderlessFillSymbol);this._measureGraphic=c;this._measureGraphics.push(c);return c},_getArea:function(a){var b=[],c=new J;c.areaUnit=L.UNIT_SQUARE_METERS;c.calculationType="geodesic";K.prototype.isSelfIntersecting(a)?
this._geometryService.simplify([a],k.hitch(this,function(a){m.forEach(a,k.hitch(this,function(d){"PCS"===this._map.cs?(c.polygons=a,this._geometryService.areasAndLengths(c)):("Web Mercator"===this._map.cs&&(d=v.webMercatorToGeographic(d)),b.push(d))}));var d=s.geodesicAreas(b,z.SQUARE_METERS);this._showArea(d[0])})):("Web Mercator"===this._map.cs&&(a=v.webMercatorToGeographic(a)),b.push(a),"PCS"===this._map.cs?(c.polygons=b,this._geometryService.areasAndLengths(c)):(a=s.geodesicAreas(b,z.SQUARE_METERS),
this._showArea(Math.abs(a[0]))))},_outputArea:function(a){this._showArea(Math.abs(a.areas[0]))},_showArea:function(a){if(a)if(this.result=a,a=l.byNode(this._unitDropDown.domNode).label,a=this._outputResult(this.result,a),this._mouseMoveMapHandler)this.onMeasure(this.activeTool,this._measureGraphic.geometry,a,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,this._measureGraphic.geometry,a,this.getUnit())},_measureCustomArea:function(){this.setTool("area",!0);this._inputPoints=[];var a=this._densifyGeometry(this._userGeometry);
this._measureGraphic=new E;this._measureGraphic.setGeometry(a);this._measureGraphic.setSymbol(this._fillSymbol);this._measureGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);this._getArea(a);this._inputPoints=[]},_resetToolState:function(){var a=this._map;a.navigationManager.setImmediateClick(!1);this._dblClickZoom&&a.enableDoubleClickZoom();this._inputPoints=[];d.disconnect(this._mouseClickMapHandler);d.disconnect(this._mouseMoveMapHandler);d.disconnect(this._doubleClickMapHandler);
d.disconnect(this._mouseDragMapHandler);d.disconnect(this._clickMapHandler);d.disconnect(this._mapExtentChangeHandler);d.disconnect(this._geometryAreaHandler);this._mouseClickMapHandler=this._mouseMoveMapHandler=this._doubleClickMapHandler=this._mouseDragMapHandler=this._clickMapHandler=this._mapExtentChangeHandler=this._geometryAreaHandler=null;a.snappingManager&&a.snappingManager._snappingGraphic&&a.graphics.remove(a.snappingManager._snappingGraphic);this._map.snappingManager&&(this._map.snappingManager._stopSelectionLayerQuery(),
this._map.snappingManager._killOffSnapping());this._unitDropDown._opened&&this._unitDropDown.closeDropDown()},_measureCustomGeometry:function(){this.clearResult();switch(this._userGeometry.type){case "point":this._measureCustomPoint();break;case "polyline":this._measureCustomDistance();break;case "polygon":this._measureCustomArea()}},_densifyGeometry:function(a){"Web Mercator"===this._map.cs&&(a=v.webMercatorToGeographic(a));a="PCS"===this._map.cs?a:s.geodesicDensify(a,5E5);"Web Mercator"===this._map.cs&&
(a=v.geographicToWebMercator(a));return a},_geodesicDistance:function(a,b){var c=new r(this._map.spatialReference);"PCS"===this._map.cs&&(a=this._getGCSLocation(a),b=this._getGCSLocation(b));c.addPath([a,b]);"Web Mercator"===this._map.cs&&(c=v.webMercatorToGeographic(c));return s.geodesicLengths([c],z.METERS)[0]},_calculateXY:function(a,b){var c=F.widgets.measurement,d=this._map.getScale(),e,f;if(this.getUnit()===c.NLS_decimal_degrees)f=500<=d?6:500>d&&50<=d?7:50>d&&5<=d?8:9,e=a.toFixed(f),this._map.spatialReference._isWrappable()||
(e=this._roundX(e)),e=G.format(e),f=G.format(this._roundY(b.toFixed(f)));else if(this.getUnit()===c.NLS_deg_min_sec){var g=c=!1,h,k,m,l;f=9E4<=d?0:9E4>d&&9E3<=d?1:9E3>d&&900<=d?2:900>d&&90<d?3:4;0>a&&(c=!0,a=Math.abs(a));0>b&&(g=!0,b=Math.abs(b));b=this._roundY(b);this._map.spatialReference._isWrappable()||(a=this._roundX(a));h=Math.floor(b)+"\u00b0";e=Math.floor(a)+"\u00b0";k=Math.floor(this._getDegreeMinutes(b))+"'";d=Math.floor(this._getDegreeMinutes(a))+"'";m=G.format(this._getDegreeSeconds(b).toFixed(f))+
'"';l=G.format(this._getDegreeSeconds(a).toFixed(f))+'"';f=h+k+m;e=e+d+l;c&&(e="-"+e);g&&(f="-"+f)}return[e,f]},_getDegreeMinutes:function(a){return 60*(a-Math.floor(a))},_getDegreeSeconds:function(a){return 60*(60*(a-Math.floor(a))-Math.floor(60*(a-Math.floor(a))))},_roundY:function(a){90<a?a=90:-90>a&&(a=-90);return a},_roundX:function(a){180<a?a=180:-180>a&&(a=-180);return a},_getGCSLocation:function(a){a=k.clone(a);if("Web Mercator"===this._map.cs)a=v.webMercatorToGeographic(a);else if("PCS"===
this._map.cs){if(this._map._newExtent){var b=Math.abs((this._map._newExtent.xmax-this._map._newExtent.xmin)/(this._map.extent.xmax-this._map.extent.xmin)),c=Math.abs((this._map._newExtent.ymax-this._map._newExtent.ymin)/(this._map.extent.ymax-this._map.extent.ymin));a=new H((a.x-this._map.extent.xmin)*b+this._map._newExtent.xmin,(a.y-this._map.extent.ymin)*c+this._map._newExtent.ymin,this._map.spatialReference)}}else a=a.normalize();return a},_projectMapExtent:function(a){a=new E(a);var b=new N({wkid:4326});
this._geometryService.project([a.geometry],b,k.hitch(this,function(a){if(!this._mouseMoveMapHandler&&"location"===this.activeTool){if("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",k.hitch(this,this._locationMoveHandler));this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",k.hitch(this,this._locationMoveHandler))}this._map._newExtent=a[0]}))},_checkCS:function(a){if(a.wkid)return 3857===
a.wkid||102100===a.wkid||102113===a.wkid?"Web Mercator":A.isDefined(B[a.wkid])?"PCS":"GCS";if(a.wkt)return-1!==a.wkt.indexOf("WGS_1984_Web_Mercator")?"Web Mercator":0===a.wkt.indexOf("PROJCS")?"PCS":"GCS"},_switchUnit:function(a){"distance"===this.activeTool?this.currentDistanceUnit=a:"area"===this.activeTool?this.currentAreaUnit=a:"location"===this.activeTool&&(this.currentLocationUnit=a);l.byNode(this._unitDropDown.domNode).set("label",this._unitStrings[a]);if(null!==this.result){var b=this._outputResult(this.result,
this._unitStrings[a]);this.onUnitChange(this._unitStrings[a],this.activeTool);if(null!==this._measureGraphic)if(this._mouseMoveMapHandler)this.onMeasure(this.activeTool,this._measureGraphic.geometry,b,this.getUnit(),null);else this.onMeasureEnd(this.activeTool,this._measureGraphic.geometry,b,this.getUnit())}},_setupDictionaries:function(){var a=F.widgets.measurement;this._unitDictionary[a.NLS_length_meters]=1;this._unitDictionary[a.NLS_length_kilometers]=1E3;this._unitDictionary[a.NLS_length_feet]=
0.3048;this._unitDictionary[a.NLS_length_miles]=1609.344;this._unitDictionary[a.NLS_length_yards]=0.9144;this._unitDictionary[a.NLS_length_nautical_miles]=1852;this._unitDictionary[a.NLS_length_miles_us]=1609.347218694438;this._unitDictionary[a.NLS_length_feet_us]=0.3048006096012192;this._unitDictionary[a.NLS_length_yards_us]=0.9144018288036576;this._unitDictionary[a.NLS_area_sq_meters]=1;this._unitDictionary[a.NLS_area_sq_kilometers]=1E6;this._unitDictionary[a.NLS_area_sq_feet]=0.09290304;this._unitDictionary[a.NLS_area_acres]=
4046.8564224;this._unitDictionary[a.NLS_area_sq_miles]=2589988.110336;this._unitDictionary[a.NLS_area_hectares]=1E4;this._unitDictionary[a.NLS_area_sq_yards]=0.83612736;this._unitDictionary[a.NLS_area_sq_nautical_miles]=3429904;this._unitDictionary[a.NLS_area_acres_us]=4046.872609874252;this._unitDictionary[a.NLS_area_sq_miles_us]=2589998.470319522;this._unitDictionary[a.NLS_area_sq_feet_us]=0.09290341161327487;this._unitDictionary[a.NLS_area_sq_yards_us]=0.8361307045194736;this._unitStrings={esriMiles:a.NLS_length_miles,
esriKilometers:a.NLS_length_kilometers,esriFeet:a.NLS_length_feet,esriFeetUS:a.NLS_length_feet_us,esriMeters:a.NLS_length_meters,esriYards:a.NLS_length_yards,esriNauticalMiles:a.NLS_length_nautical_miles,esriMilesUS:a.NLS_length_miles_us,esriYardsUS:a.NLS_length_yards_us,esriAcres:a.NLS_area_acres,esriSquareMiles:a.NLS_area_sq_miles,esriSquareKilometers:a.NLS_area_sq_kilometers,esriHectares:a.NLS_area_hectares,esriSquareYards:a.NLS_area_sq_yards,esriSquareFeet:a.NLS_area_sq_feet,esriSquareFeetUS:a.NLS_area_sq_feet_us,
esriSquareMeters:a.NLS_area_sq_meters,esriAcresUS:a.NLS_area_acres_us,esriSquareMilesUS:a.NLS_area_sq_miles_us,esriSquareYardsUS:a.NLS_area_sq_yards_us,esriSquareNauticalMiles:a.NLS_area_sq_nautical_miles,esriDecimalDegrees:a.NLS_decimal_degrees,esriDegreeMinuteSeconds:a.NLS_deg_min_sec,esriMGRS:a.NLS_MGRS,esriUSNG:a.NLS_USNG,esriUTM:a.NLS_UTM,esriGARS:a.NLS_GARS,esriGeoRef:a.NLS_GeoRef,esriDDM:a.NLS_DDM,esriDD:a.NLS_DD};this._locationUnitStrings=[a.NLS_decimal_degrees,a.NLS_deg_min_sec,a.NLS_MGRS,
a.NLS_USNG,a.NLS_UTM,a.NLS_GeoRef,a.NLS_GARS];this._locationUnitStringsLong="esriDecimalDegrees esriDegreeMinuteSeconds esriMGRS esriUSNG esriUTM esriGeoRef esriGARS".split(" ");this._distanceUnitStrings=[a.NLS_length_miles,a.NLS_length_kilometers,a.NLS_length_feet,a.NLS_length_feet_us,a.NLS_length_meters,a.NLS_length_yards,a.NLS_length_nautical_miles];this._distanceUnitStringsLong="esriMiles esriKilometers esriFeet esriFeetUS esriMeters esriYards esriNauticalMiles".split(" ");this._areaUnitStrings=
[a.NLS_area_acres,a.NLS_area_sq_miles,a.NLS_area_sq_kilometers,a.NLS_area_hectares,a.NLS_area_sq_yards,a.NLS_area_sq_feet,a.NLS_area_sq_feet_us,a.NLS_area_sq_meters];this._areaUnitStringsLong="esriAcres esriSquareMiles esriSquareKilometers esriHectares esriSquareYards esriSquareFeet esriSquareFeetUS esriSquareMeters".split(" ");this._buttonDijits={area:this._areaButton,distance:this._distanceButton,location:this._locationButton};l.byNode(this._distanceButton.domNode).setLabel(a.NLS_distance);l.byNode(this._areaButton.domNode).setLabel(a.NLS_area);
l.byNode(this._locationButton.domNode).setLabel(a.NLS_location);l.byNode(this.resultLabel.domNode).setContent(a.NLS_resultLabel)},onToolChange:function(){},onUnitChange:function(){},onMeasureStart:function(){},onMeasure:function(){},onMeasureEnd:function(){},_measureAreaMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);b=b||a.mapPoint;this._inputPoints.push(b);this._currentStartPt=b;if(1===this._inputPoints.length){this._tempGraphic.setGeometry(new r(this._map.spatialReference));
for(a=0;a<this._measureGraphics.length;a++)this._map.graphics.remove(this._measureGraphics[a]);this._measureGraphics=[];this.result=0;this._outputResult(this.result,F.widgets.measurement.NLS_area_sq_meters);this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_measureAreaMouseMoveHandler");this.onMeasureStart(this.activeTool,this.getUnit())}this._measureGraphic=new E;this._measureGraphic.setSymbol(this._areaLineSymbol);this._measureGraphics.push(this._measureGraphic);if(1<this._inputPoints.length){var c=
new r(this._map.spatialReference);c.addPath([this._inputPoints[this._inputPoints.length-2],b]);a=new r(this._map.spatialReference);a.addPath([this._inputPoints[0],b]);b=this._densifyGeometry(c);a=this._densifyGeometry(a);this._tempGraphic.setGeometry(a);this._measureGraphic.setGeometry(b);this._polylineGraphics.push(this._measureGraphic);this._map.graphics.add(this._measureGraphic);if(2<this._inputPoints.length){b=new K(this._map.spatialReference);c=[];for(a=0;a<this._inputPoints.length;a++)c.push([this._inputPoints[a].x,
this._inputPoints[a].y]);c.push([this._inputPoints[0].x,this._inputPoints[0].y]);b.addRing(c);this._polygonGraphic?(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic),this._measureGraphic=this._polygonGraphic,this._polylineGraphics.pop()):(this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));this._getArea(b)}}else this._polygonGraphic&&
(this._map.graphics.remove(this._polygonGraphic),this._polygonGraphic=null)},_measureAreaMouseMoveHandler:function(a){var b;if(0<this._inputPoints.length){var c=new r(this._map.spatialReference),d;this._map.snappingManager&&(d=this._map.snappingManager._snappingPoint);b=d||a.mapPoint;c.addPath([this._currentStartPt,b]);a=this._densifyGeometry(c);this._tempGraphic.setGeometry(a)}1<this._inputPoints.length&&(a=new r(this._map.spatialReference),a.addPath([b,this._inputPoints[0]]),b=this._densifyGeometry(a),
this._tempGraphic.setGeometry(this._tempGraphic.geometry.addPath(b.paths[0])))},_measureAreaDblClickHandler:function(a){d.disconnect(this._mouseMoveMapHandler);this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&c("ios")&&this._measureAreaMouseClickHandler(a);a=new K(this._map.spatialReference);var b=[],e;for(e=0;e<this._inputPoints.length;e++)b.push([this._inputPoints[e].x,this._inputPoints[e].y]);b.push([this._inputPoints[0].x,this._inputPoints[0].y]);a.addRing(b);this._inputPoints=
[];this.measureGeometry=this._densifyGeometry(a);this._polygonGraphic&&(this._map.graphics.remove(this._polygonGraphic),this._polylineGraphics.push(this._tempGraphic),this._polygonGraphic=this._generatePolygonFromPaths(),this._map.graphics.add(this._polygonGraphic));this._getArea(a);this._polylineGraphics=[]},_measureDistanceMouseClickHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._inputPoints.push(a);this._currentStartPt=a;if(1===
this._inputPoints.length){for(b=0;b<this._measureGraphics.length;b++)this._map.graphics.remove(this._measureGraphics[b]);this._map.graphics.remove(this._tempGraphic);this._measureGraphics=[];this.result=0;this._outputResult(this.result,F.widgets.measurement.NLS_length_meters);this._tempGraphic=new E;this._tempGraphic.setSymbol(this._lineSymbol);this._map.graphics.add(this._tempGraphic);this._mouseMoveMapHandler=d.connect(this._map,"onMouseMove",this,"_measureDistanceMouseMoveHandler");this.onMeasureStart(this.activeTool,
this.getUnit())}this._tempGraphic.setGeometry(new r(this._map.spatialReference));b=new E;b.setSymbol(this._pointSymbol);b.setGeometry(a);this._measureGraphics.push(b);this._map.graphics.add(b);if(1<this._inputPoints.length)if(this._measureGraphic=new E,this._measureGraphic.setSymbol(this._lineSymbol),this._measureGraphics.push(this._measureGraphic),b=new r(this._map.spatialReference),b.addPath([this._inputPoints[this._inputPoints.length-2],a]),b=this._densifyGeometry(b),this._measureGraphic.setGeometry(b),
this._map.graphics.add(this._measureGraphic),"PCS"===this._map.cs)this._geometryServiceLength(b,!1);else{b=this._geodesicDistance(this._inputPoints[this._inputPoints.length-2],a);var c=this._outputResult(b,this.getUnit());this.result+=b;this._showDistance(this.result);this.onMeasure(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit(),c)}else b.setSymbol(this._pointSymbol)},_measureDistanceMouseMoveHandler:function(a){if(0<this._inputPoints.length){var b,c=new r(this._map.spatialReference);
this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;c.addPath([this._currentStartPt,a]);c=this._densifyGeometry(c);this._tempGraphic.setGeometry(c);"PCS"!==this._map.cs&&(b=this._geodesicDistance(this._currentStartPt,a),c=this._outputResult(b,this.getUnit()),b+=this.result,this._showDistance(b),this.onMeasure(this.activeTool,a,this._outputResult(b,this.getUnit()),this.getUnit(),c))}},_measureDistanceDblClickHandler:function(a){d.disconnect(this._mouseMoveMapHandler);
this._mouseMoveMapHandler=null;"touch"===this._map.navigationManager.eventModel&&c("ios")&&this._measureDistanceMouseClickHandler(a);a=new r(this._map.spatialReference);a.addPath(this._inputPoints);a=this._densifyGeometry(a);this._measureGraphic.geometry=a;"PCS"===this._map.cs?this._geometryServiceLength(a,!0):(this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit()))},_geometryServiceLength:function(a,b){var c=new T;c.polylines=[a];c.lengthUnit=
9001;c.calculationType="geodesic";this._geometryService.lengths(c,k.hitch(this,function(c){c=c.lengths[0];if(b)this.result=c,this._showDistance(this.result),this._inputPoints=[],this.onMeasureEnd(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit());else{var d=this._outputResult(c,this.getUnit());this.result+=c;this._showDistance(this.result);this.onMeasure(this.activeTool,a,this._outputResult(this.result,this.getUnit()),this.getUnit(),d)}}))},_locationClickHandler:function(a){var b;
this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);a=b||a.mapPoint;this._locationButtonToggle();this._locationGraphic=new E;this._locationGraphic.setGeometry(a);this._locationGraphic.setSymbol(this._pointSymbol);this._map.graphics.add(this._locationGraphic);this._measureGraphics.push(this._locationGraphic);this._calculateLocation(a,!0)},_locationMoveHandler:function(a){var b;this._map.snappingManager&&(b=this._map.snappingManager._snappingPoint);this._calculateLocation(b||a.mapPoint,
!1)},_outputResult:function(a,b){var c=a/this._unitDictionary[b];0===c?this.resultValue.setContent("\x26nbsp"):1E6<c?this.resultValue.setContent(G.format(c.toPrecision(9),{pattern:this.numberPattern})+" "+b):10>c?this.resultValue.setContent(G.format(c.toFixed(2),{pattern:this.numberPattern+"0"})+" "+b):this.resultValue.setContent(G.format(c.toFixed(2),{pattern:this.numberPattern})+" "+b);return c},_createDistanceUnitList:function(){var a,b=new y({style:"display: none;"});m.forEach(this._distanceUnitStrings,
k.hitch(this,function(a,c){var d=new t({label:a,onClick:k.hitch(this,function(){this._switchUnit(this._distanceUnitStringsLong[c])})});d.set("class","unitDropDown");b.addChild(d)}));l.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentDistanceUnit?(a=this._unitStrings[this.currentDistanceUnit],l.byNode(this._unitDropDown.domNode).set("label",a)):(a=this._unitStrings[this._defaultDistanceUnit],l.byNode(this._unitDropDown.domNode).set("label",a),this.currentDistanceUnit=this._defaultDistanceUnit)},
_createAreaUnitList:function(){var a,b=new y({style:"display: none;"});m.forEach(this._areaUnitStrings,k.hitch(this,function(a,c){var d=new t({label:a,onClick:k.hitch(this,function(){this._switchUnit(this._areaUnitStringsLong[c])})});d.set("class","unitDropDown");b.addChild(d)}));l.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentAreaUnit?(a=this._unitStrings[this.currentAreaUnit],l.byNode(this._unitDropDown.domNode).set("label",a)):(a=this._unitStrings[this._defaultAreaUnit],l.byNode(this._unitDropDown.domNode).set("label",
a),this.currentAreaUnit=this._defaultAreaUnit)},_createLocationUnitList:function(){var a;a=this._locationUnitStrings;var b=new y({style:"display: none;"});if(null===this._geometryService||!1===this.advancedLocationUnits)a=a.slice(0,2);m.forEach(a,k.hitch(this,function(a,c){var d=new t({label:a,onClick:k.hitch(this,function(){this._switchLocationUnit(this._locationUnitStringsLong[c])})});d.set("class","unitDropDown");b.addChild(d)}));l.byNode(this._unitDropDown.domNode).set("dropDown",b);this.currentLocationUnit||
(this.currentLocationUnit=this._defaultLocationUnit);a=this._unitStrings[this.currentLocationUnit];l.byNode(this._unitDropDown.domNode).set("label",a);("esriDegreeMinuteSeconds"===this.currentLocationUnit||"esriDecimalDegrees"===this.currentLocationUnit)&&this._toggleLocationResultsTable(!0,!1)},_drawPointGraphics:function(b){var d,f,g;f=this._pointSymbol;b=h.create("div",{"class":"esriLocationResultSymbol"},b);b=e.createSurface(b,10,10);9>c("ie")&&(d=b.getEventSource(),a.set(d,"position","relative"),
a.set(d.parentNode,"position","relative"));f=f.getShapeDescriptors();try{g=b.createShape(f.defaultShape).setFill(f.fill).setStroke(f.stroke)}catch(m){b.clear();b.destroy();return}var l=g.getBoundingBox();f=l.width;d=l.height;var n=-(l.x+f/2),l=-(l.y+d/2);b=b.getDimensions();b={dx:n+b.width/2,dy:l+b.height/2};if(10<f||10<d)f=5/(f/10>d/10?f:d),k.mixin(b,{xx:f,yy:f});g.applyTransform(b)}});c("extend-esri")&&k.setObject("dijit.Measurement",n,O);return n});