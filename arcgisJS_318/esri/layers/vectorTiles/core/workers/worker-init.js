// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.18/esri/copyright.txt for details.
//>>built
(function(f,m){var n,q=function(){},p=function(a){for(var l in a)return 0;return 1},u={}.toString,r=function(a){return"[object Function]"==u.call(a)},v=function(a){return"[object String]"==u.call(a)},c=function(a){return"[object Array]"==u.call(a)},b=function(a,l){if(a)for(var b=0;b<a.length;)l(a[b++])},d=function(a,l){for(var b in l)a[b]=l[b];return a},h=function(a,l){return d(Error(a),{src:"dojoLoader",info:l})},s=1,E=function(){return"_"+s++},k=function(a,l,b){return ma(a,l,b,0,k)},F=this,M=F.document,
Fa=M&&M.createElement("DiV"),t=k.has=function(a){return r(C[a])?C[a]=C[a](F,M,Fa):C[a]},C=t.cache=m.hasCache;t.add=function(a,l,b,e){(void 0===C[a]||e)&&(C[a]=l);return b&&t(a)};d(m.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0});m.loaderPatch={injectUrl:function(a,l){try{importScripts(a),l()}catch(b){console.info("failed to load resource ("+a+")"),console.error(b)}}};for(var z in f.has)t.add(z,f.has[z],0,1);
k.async=1;var Ga=t("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");k.eval=function(a,l){return Ga(a+"\r\n//# sourceURL\x3d"+l)};var Z={},B=k.signal=function(a,l){var g=Z[a];b(g&&g.slice(0),function(a){a.apply(null,c(l)?l:[l])})},N=k.on=function(a,l){var b=Z[a]||(Z[a]=[]);b.push(l);return{remove:function(){for(var a=0;a<b.length;a++)if(b[a]===l){b.splice(a,1);break}}}},na=[],Ha={},oa=[],G={},pa=k.map={},O=[],x={},$="",H={},P={};z={};var ba=function(a){var l,b,e,d;for(l in P)b=
P[l],(e=l.match(/^url\:(.+)/))?H["url:"+qa(e[1],a)]=b:"*now"==l?d=b:"*noref"!=l&&(e=Q(l,a,!0),H[e.mid]=H["url:"+e.url]=b);d&&d(aa(a));P={}},ra=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},ca=function(a,b){b.splice(0,b.length);for(var g in a)b.push([g,a[g],RegExp("^"+ra(g)+"(/|$)"),g.length]);b.sort(function(a,b){return b[3]-a[3]});return b},Ja=function(a,l){b(a,function(a){l.push([v(a[0])?RegExp("^"+ra(a[0])+"$"):a[0],a[1]])})},sa=function(a){var b=a.name;
b||(b=a,a={name:b});a=d({main:"main"},a);a.location=a.location?a.location:b;a.packageMap&&(pa[b]=a.packageMap);a.main.indexOf("./")||(a.main=a.main.substring(2));G[b]=a},ta=[],J=function(a,l,g){for(var e in a){"waitSeconds"==e&&(k.waitms=1E3*(a[e]||0));"cacheBust"==e&&($=a[e]?v(a[e])?a[e]:(new Date).getTime()+"":"");if("baseUrl"==e||"combo"==e)k[e]=a[e];a[e]!==C&&(k.rawConfig[e]=a[e],"has"!=e&&t.add("config-"+e,a[e],0,l))}k.baseUrl||(k.baseUrl="./");/\/$/.test(k.baseUrl)||(k.baseUrl+="/");for(e in a.has)t.add(e,
a.has[e],0,l);b(a.packages,sa);for(var h in a.packagePaths)b(a.packagePaths[h],function(a){var b=h+"/"+a;v(a)&&(a={name:a});a.location=b;sa(a)});ca(d(pa,a.map),O);b(O,function(a){a[1]=ca(a[1],[]);"*"==a[0]&&(O.star=a)});ca(d(Ha,a.paths),oa);Ja(a.aliases,na);if(l)ta.push({config:a.config});else for(e in a.config)l=D(e,g),l.config=d(l.config||{},a.config[e]);a.cache&&(ba(),P=a.cache,a.cache["*noref"]&&ba());B("config",[a,k.rawConfig])};if(t("dojo-cdn")){var ua=M.getElementsByTagName("script");n=0;for(var R,
w,S,K;n<ua.length;){R=ua[n++];if((S=R.getAttribute("src"))&&(K=S.match(/(((.*)\/)|^)dojo\.js(\W|$)/i)))w=K[3]||"",m.baseUrl=m.baseUrl||w;if(S=R.getAttribute("data-dojo-config")||R.getAttribute("djConfig"))z=k.eval("({ "+S+" })","data-dojo-config")}}k.rawConfig={};J(m,1);t("dojo-cdn")&&((G.dojo.location=w)&&(w+="/"),G.dijit.location=w+"../dijit/",G.dojox.location=w+"../dojox/");J(f,1);J(z,1);var ea=function(a){da(function(){b(a.deps,va)})},ma=function(a,b,g,e,Ia){var s;if(v(a)){if((s=D(a,e,!0))&&s.executed)return s.result;
throw h("undefinedModule",a);}c(a)||(J(a,0,e),a=b,b=g);if(c(a))if(a.length){g="require*"+E();for(var f,n=[],m=0;m<a.length;)f=a[m++],n.push(D(f,e));s=d(T("",g,0,""),{injected:2,deps:n,def:b||q,require:e?e.require:k,gc:1});x[s.mid]=s;ea(s);var p=L&&0!="sync";da(function(){fa(s,p)});s.executed||A.push(s);ga()}else b&&b();return Ia},aa=function(a){if(!a)return k;var b=a.require;b||(b=function(g,e,d){return ma(g,e,d,a,b)},a.require=d(b,k),b.module=a,b.toUrl=function(b){return qa(b,a)},b.toAbsMid=function(b){return ha(b,
a)});return b},A=[],U=[],y={},Ka=function(a){a.injected=1;y[a.mid]=1;a.url&&(y[a.url]=a.pack||1);wa()},W=function(a){a.injected=2;delete y[a.mid];a.url&&delete y[a.url];p(y)&&V()},La=k.idle=function(){return!U.length&&p(y)&&!A.length&&!L},ia=function(a,b){if(b)for(var g=0;g<b.length;g++)if(b[g][2].test(a))return b[g];return 0},xa=function(a){var b=[],g,e;for(a=a.replace(/\\/g,"/").split("/");a.length;)g=a.shift(),".."==g&&b.length&&".."!=e?(b.pop(),e=b[b.length-1]):"."!=g&&b.push(e=g);return b.join("/")},
T=function(a,b,g,e){return{pid:a,mid:b,pack:g,url:e,executed:0,def:0}},ya=function(a,l,g,e,d,c,k,s,f){var n,q,m,p;p=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||p&&!l)return T(0,a,0,a);a=xa(p?l.mid+"/../"+a:a);if(/^\./.test(a))throw h("irrationalPath",a);l&&(m=ia(l.mid,c));(m=(m=m||c.star)&&ia(a,m[1]))&&(a=m[1]+a.substring(m[3]));l=(K=a.match(/^([^\/]+)(\/(.+))?$/))?K[1]:"";(n=g[l])?a=l+"/"+(q=K[3]||n.main):l="";var E=0;b(s,function(b){var l=a.match(b[0]);l&&0<l.length&&(E=r(b[1])?a.replace(b[0],
b[1]):b[1])});if(E)return ya(E,0,g,e,d,c,k,s,f);if(g=e[a])return f?T(g.pid,g.mid,g.pack,g.url):e[a];e=(m=ia(a,k))?m[1]+a.substring(m[3]):l?n.location+"/"+q:t("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(e)||(e=d+e);return T(l,a,n,xa(e+".js"))},Q=function(a,b,g){return ya(a,b,G,x,k.baseUrl,g?[]:O,g?[]:oa,g?[]:na)},za=function(a,b,g){return a.normalize?a.normalize(b,function(a){return ha(a,g)}):ha(b,g)},Aa=0,D=function(a,b,g){var e,d;(e=a.match(/^(.+?)\!(.*)$/))?(d=D(e[1],b,g),5===d.executed&&
!d.load&&ja(d),d.load?(e=za(d,e[2],b),a=d.mid+"!"+(d.dynamic?++Aa+"!":"")+e):(e=e[2],a=d.mid+"!"+ ++Aa+"!waitingForPlugin"),a={plugin:d,mid:a,req:aa(b),prid:e}):a=Q(a,b);return x[a.mid]||!g&&(x[a.mid]=a)},ha=k.toAbsMid=function(a,b){return Q(a,b).mid},qa=k.toUrl=function(a,b){var d=Q(a+"/x",b),e=d.url;return Ba(0===d.pid?a:e.substring(0,e.length-5))},Ca={injected:2,executed:5,def:3,result:3};w=function(a){return x[a]=d({mid:a},Ca)};var Ma=w("require"),Na=w("exports"),Oa=w("module"),X={},ka=0,ja=function(a){var b=
a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},Pa=function(a){var l={};b(a.loadQ,function(b){var e=za(a,b.prid,b.req.module),g=a.dynamic?b.mid.replace(/waitingForPlugin$/,e):a.mid+"!"+e,e=d(d({},b),{mid:g,prid:e,injected:0});if(!x[g]||!x[g].injected)Da(x[g]=e);l[b.mid]=x[g];W(b);delete x[b.mid]});a.loadQ=0;var g=function(a){for(var b=a.deps||[],e=0;e<b.length;e++)(a=l[b[e].mid])&&(b[e]=a)},e;for(e in x)g(x[e]);b(A,g)},la=function(a){k.trace("loader-finish-exec",[a.mid]);
a.executed=5;a.defOrder=ka++;a.loadQ&&(ja(a),Pa(a));for(n=0;n<A.length;)A[n]===a?A.splice(n,1):n++;/^require\*/.test(a.mid)&&delete x[a.mid]},Qa=[],fa=function(a,b){if(4===a.executed)return k.trace("loader-circular-dependency",[Qa.concat(a.mid).join("-\x3e")]),!a.def||b?X:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return X;var d=a.mid,e=a.deps||[],c,s=[],f=0;for(a.executed=4;c=e[f++];){c=c===Ma?aa(a):c===Na?a.cjs.exports:c===Oa?a.cjs:fa(c,b);if(c===X)return a.executed=0,k.trace("loader-exec-module",
["abort",d]),X;s.push(c)}k.trace("loader-run-factory",[a.mid]);var d=a.def,m;if(t("config-dojo-loader-catches"))try{m=r(d)?d.apply(null,s):d}catch(n){B("error",a.result=h("factoryThrew",[a,n]))}else m=r(d)?d.apply(null,s):d;a.result=void 0===m&&a.cjs?a.cjs.exports:m;la(a)}return a.result},L=0,da=function(a){try{L++,a()}catch(b){throw b;}finally{L--}La()&&B("idle",[])},ga=function(){L||da(function(){for(var a,b,d=0;d<A.length;)a=ka,b=A[d],fa(b),a!=ka?d=0:d++})};void 0===t("dojo-loader-eval-hint-url")&&
t.add("dojo-loader-eval-hint-url",1);var Ba="function"==typeof f.fixupUrl?f.fixupUrl:function(a){a+="";return a+($?(/\?/.test(a)?"\x26":"?")+$:"")},Da=function(a){var b=a.plugin;5===b.executed&&!b.load&&ja(b);var d=function(b){a.result=b;W(a);la(a);ga()};b.load?b.load(a.prid,a.req,d):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],A.unshift(b),va(b))},I=0,Ra=function(a,b){t("config-stripStrict")&&(a=a.replace(/(["'])use strict\1/g,""));if(t("config-dojo-loader-catches"))try{a===I?I.call(null):k.eval(a,t("dojo-loader-eval-hint-url")?
b.url:b.mid)}catch(d){B("error",h("evalModuleThrew",b))}else a===I?I.call(null):k.eval(a,t("dojo-loader-eval-hint-url")?b.url:b.mid)},va=function(a){var b=a.mid,g=a.url;if(!a.executed&&!a.injected&&!(y[b]||a.url&&(a.pack&&y[a.url]===a.pack||1==y[a.url])))if(Ka(a),a.plugin)Da(a);else{var e=function(){Sa(a);if(2!==a.injected){if(t("dojo-enforceDefine")){B("error",h("noDefine",a));return}W(a);d(a,Ca);k.trace("loader-define-nonmodule",[a.url])}ga()};(I=H[b]||H["url:"+a.url])?(k.trace("loader-inject",
["cache",a.mid,g]),Ra(I,a),e()):(k.trace("loader-inject",["script",a.mid,g]),k.injectUrl(Ba(g),e,a))}},Ea=function(a,b,g){k.trace("loader-define-module",[a.mid,b]);if(2===a.injected)return B("error",h("multipleDefine",a)),a;d(a,{deps:b,def:g,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var e=0;b[e];e++)b[e]=D(b[e],a);W(a);!r(g)&&!b.length&&(a.result=g,la(a));return a},Sa=function(a,d){for(var h=[],e,c;U.length;)c=U.shift(),
d&&(c[0]=d.shift()),e=c[0]&&D(c[0])||a,h.push([e,c[1],c[2]]);ba(a);b(h,function(a){ea(Ea.apply(null,a))})},Y=0,V=q,wa=q,V=function(){Y&&clearTimeout(Y);Y=0},wa=function(){V();k.waitms&&(Y=F.setTimeout(function(){V();B("error",h("timeout",y))},k.waitms))};k.log=function(){try{for(var a=0;a<arguments.length;a++)console.log(arguments[a])}catch(b){}};k.trace=q;w=function(a,b,d){var e=arguments.length,c=["require","exports","module"],h=[0,a,b];1==e?h=[0,r(a)?c:[],a]:2==e&&v(a)?h=[a,r(b)?c:[],b]:3==e&&
(h=[a,b,d]);k.trace("loader-define",h.slice(0,2));(e=h[0]&&D(h[0]))&&!y[e.mid]?ea(Ea(e,h[1],h[2])):(t("ie-event-behavior"),U.push(h))};w.amd={vendor:"dojotoolkit.org"};d(d(k,m.loaderPatch),f.loaderPatch);N("error",function(a){try{if(console.error(a),a instanceof Error){for(var b in a)console.log(b+":",a[b]);console.log(".")}}catch(d){}});d(k,{uid:E,cache:H,packs:G});F.define?B("error",h("defineAlreadyDefined",0)):(F.define=w,F.require=k,b(ta,function(a){J(a)}),N=z.deps||f.deps||m.deps,z=z.callback||
f.callback||m.callback,k.boot=N||z?[N||[],z]:0)})(this.dojoConfig||this.djConfig||this.require||{},{async:1,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"},{location:"../moment",
main:"moment.js",name:"moment"},{location:"../esri",name:"esri"}]});
require({cache:{"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(f,m){m.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;return 1});var n=m("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],q=n.length,p=function(b,d,h){h||(h=b[0]&&f.scopeMap[b[0]]?f.scopeMap[b.shift()][1]:f.global);try{for(var c=0;c<b.length;c++){var m=b[c];if(!(m in h))if(d)h[m]={};else return;
h=h[m]}return h}catch(k){}},u=Object.prototype.toString,r=function(b,d,h){return(h||[]).concat(Array.prototype.slice.call(b,d||0))},v=/\{([^\}]+)\}/g,c={_extraNames:n,_mixin:function(b,d,h){var c,f,k,p={};for(c in d)if(f=d[c],!(c in b)||b[c]!==f&&(!(c in p)||p[c]!==f))b[c]=h?h(f):f;if(m("bug-for-in-skips-shadowed")&&d)for(k=0;k<q;++k)if(c=n[k],f=d[c],!(c in b)||b[c]!==f&&(!(c in p)||p[c]!==f))b[c]=h?h(f):f;return b},mixin:function(b,d){b||(b={});for(var h=1,f=arguments.length;h<f;h++)c._mixin(b,arguments[h]);
return b},setObject:function(b,d,c){var f=b.split(".");b=f.pop();return(c=p(f,!0,c))&&b?c[b]=d:void 0},getObject:function(b,d,c){return!b?c:p(b.split("."),d,c)},exists:function(b,d){return void 0!==c.getObject(b,!1,d)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:Array.isArray||function(b){return"[object Array]"==u.call(b)},isFunction:function(b){return"[object Function]"===u.call(b)},isObject:function(b){return void 0!==b&&(null===b||"object"==typeof b||c.isArray(b)||
c.isFunction(b))},isArrayLike:function(b){return!!b&&!c.isString(b)&&!c.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&(c.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!c.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(String(b))},extend:function(b,d){for(var h=1,f=arguments.length;h<f;h++)c._mixin(b.prototype,arguments[h]);return b},_hitchArgs:function(b,d){var h=c._toArray(arguments,2),m=c.isString(d);return function(){var n=c._toArray(arguments),k=m?(b||f.global)[d]:
d;return k&&k.apply(b||this,h.concat(n))}},hitch:function(b,d){if(2<arguments.length)return c._hitchArgs.apply(f,arguments);d||(d=b,b=null);if(c.isString(d)){b=b||f.global;if(!b[d])throw['lang.hitch: scope["',d,'"] is null (scope\x3d"',b,'")'].join("");return function(){return b[d].apply(b,arguments||[])}}return!b?d:function(){return d.apply(b,arguments||[])}},delegate:function(){function b(){}return function(d,h){b.prototype=d;var f=new b;b.prototype=null;h&&c._mixin(f,h);return f}}(),_toArray:m("ie")?
function(){function b(b,c,f){f=f||[];for(c=c||0;c<b.length;c++)f.push(b[c]);return f}return function(d){return(d.item?b:r).apply(this,arguments)}}():r,partial:function(b){return c.hitch.apply(f,[null].concat(c._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||c.isFunction(b))return b;if(b.nodeType&&"cloneNode"in b)return b.cloneNode(!0);if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return RegExp(b);var d,h,f;if(c.isArray(b)){d=[];h=0;for(f=b.length;h<f;++h)h in
b&&(d[h]=c.clone(b[h]))}else d=b.constructor?new b.constructor:{};return c._mixin(d,b,c.clone)},trim:String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,d,f){return b.replace(f||v,c.isFunction(d)?d:function(b,f){return c.getObject(f,!1,d)})}};c.mixin(f,c);return c})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(f,m,n,q){var p,u=function(){return this}(),r={},v={},c={config:m,
global:u,dijit:r,dojox:v},r={dojo:["dojo",c],dijit:["dijit",r],dojox:["dojox",v]};q=n.map&&n.map[q.id.match(/[^\/]+/)[0]];for(p in q)r[p]?r[p][0]=q[p]:r[p]=[q[p],{}];for(p in r)q=r[p],q[1]._scopeName=q[0],m.noGlobals||(u[q[0]]=q[1]);c.scopeMap=r;c.baseUrl=c.config.baseUrl=n.baseUrl;c.isAsync=n.async;c.locale=m.locale;u="$Rev: 91fa0cb $".match(/[0-9a-f]{7,}/);c.version={major:1,minor:11,patch:2,flag:"",revision:u?u[0]:NaN,toString:function(){var b=c.version;return b.major+"."+b.minor+"."+b.patch+b.flag+
" ("+b.revision+")"}};f("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(c);c.exit=function(){};f.add("dojo-debug-messages",!!m.isDebug);c.deprecated=c.experimental=function(){};f("dojo-debug-messages")&&(c.deprecated=function(b,d,c){b="DEPRECATED: "+b;d&&(b+=" "+d);c&&(b+=" -- will be removed in version: "+c);console.warn(b)},c.experimental=function(b,d){var c="EXPERIMENTAL: "+b+" -- APIs subject to change without notice.";
d&&(c+=" "+d);console.warn(c)});if(m.modulePaths){c.deprecated("dojo.modulePaths","use paths configuration");f={};for(p in m.modulePaths)f[p.replace(/\./g,"/")]=m.modulePaths[p];n({paths:f})}c.moduleUrl=function(b,d){c.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var f=null;b&&(f=n.toUrl(b.replace(/\./g,"/")+(d?"/"+d:"")+"/*.*").replace(/\/\*\.\*/,"")+(d?"":"/"));return f};c._hasResource={};return c})},"dojo/has":function(){define(["require","module"],function(f,m){var n=f.has||function(){};
n.clearElement=function(f){f.innerHTML="";return f};n.normalize=function(f,m){var u=f.match(/[\?:]|[^:\?]*/g),r=0,v=function(c){var b=u[r++];if(":"==b)return 0;if("?"==u[r++]){if(!c&&n(b))return v();v(!0);return v(c)}return b||0};return(f=v())&&m(f)};n.load=function(f,m,n){f?m([f],n):n()};return n})},"dojo/_base/config":function(){define(["../has","require"],function(f,m){var n={},q=m.rawConfig,p;for(p in q)n[p]=q[p];if(!n.locale&&"undefined"!=typeof navigator&&(q=navigator.languages&&navigator.languages.length?
navigator.languages[0]:navigator.language||navigator.userLanguage))n.locale=q.toLowerCase();return n})},"dojo/sniff":function(){define(["./has"],function(f){return f})}}});(function(){var f=this.require;f({cache:{}});!f.async&&f(["dojo"]);f.boot&&f.apply(null,f.boot)})();
//>>built
require({cache:{"esri/layers/vectorTiles/core/workers/WorkerConnection":function(){define(["require","exports","./WorkerProxy"],function(h,a,e){return function(){function a(d,b,c){this.id=c;"function"===typeof d&&(this._target=new d(this));this.proxy=new e(this._target,b,this)}a.prototype.invoke=function(a,b,c){return this.proxy.invoke(a,b,c,this.id)};return a}()})},"esri/layers/vectorTiles/core/workers/WorkerProxy":function(){define(["require","exports","dojo/Deferred"],function(h,a,e){return function(){function a(d,
b,c){this.parentModule=d;this.worker=b;this.connection=c;this.msgCount=0;this.outgoingJobs={};this.incomingJobs={};this.msgCount=0;this.outgoingJobs={};this.incomingJobs={}}a.prototype.invoke=function(a,b,c,f){var l=this,p=++this.msgCount,n=new e(function(a){l.worker.postMessage({type:"\x3ccancel\x3e",id:p,connection:f,data:{reason:a}});l.outgoingJobs[p]&&delete l.outgoingJobs[p]});this.outgoingJobs[p]=n;this.worker.postMessage({type:a,id:p,connection:f,data:b},c);return n.promise};a.prototype.message=
function(a){var b=this;if(a&&a.data){var c=a.data.type;if(c){var f=a.data,l=a.data.id,p=a.data.connection;if("\x3cresponse\x3e"===c&&l){if(a=this.outgoingJobs[l])delete this.outgoingJobs[l],f.error?a.reject(f.error):a.resolve(f.data)}else"\x3ccancel\x3e"===c&&l?(a=this.incomingJobs[l])&&a.cancel(f.data.reason||"cancel"):(a=this.parentModule[c],"function"===typeof a&&(f=a.call(this.parentModule,f.data,this.connection),this.incomingJobs[l]=f,f.then(function(a){b.worker.postMessage({type:"\x3cresponse\x3e",
id:l,connection:p,data:a?a.data:null},a?a.buffers:[])}).otherwise(function(a){a||(a="Error encountered at method "+c);(!a.dojoType||"cancel"!==a.dojoType)&&b.worker.postMessage({type:"\x3cresponse\x3e",id:l,connection:p,error:a})}).always(function(){delete b.incomingJobs[l]})))}}};return a}()})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(h,a,e,m,d){var b=Object.freeze||function(){},c=function(a,b,c,l,d){2===
b&&(n.instrumentRejected&&0===a.length)&&n.instrumentRejected(c,!1,l,d);for(d=0;d<a.length;d++)f(a[d],b,c,l)},f=function(a,b,c,f){var d=a[b],e=a.deferred;if(d)try{var m=d(c);if(0===b)"undefined"!==typeof m&&p(e,b,m);else{if(m&&"function"===typeof m.then){a.cancel=m.cancel;m.then(l(e,1),l(e,2),l(e,0));return}p(e,1,m)}}catch(h){p(e,2,h)}else p(e,b,c);2===b&&n.instrumentRejected&&n.instrumentRejected(c,!!d,f,e.promise)},l=function(a,b){return function(c){p(a,b,c)}},p=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);
break;case 1:a.resolve(c);break;case 2:a.reject(c)}},n=function(a){var l=this.promise=new m,d=this,p,u,h,x=!1,A=[];Error.captureStackTrace&&(Error.captureStackTrace(d,n),Error.captureStackTrace(l,n));this.isResolved=l.isResolved=function(){return 1===p};this.isRejected=l.isRejected=function(){return 2===p};this.isFulfilled=l.isFulfilled=function(){return!!p};this.isCanceled=l.isCanceled=function(){return x};this.progress=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");
return l}c(A,0,a,null,d);return l};this.resolve=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");return l}c(A,p=1,u=a,null,d);A=null;return l};var s=this.reject=function(a,b){if(p){if(!0===b)throw Error("This deferred has already been fulfilled.");return l}Error.captureStackTrace&&Error.captureStackTrace(h={},s);c(A,p=2,u=a,h,d);A=null;return l};this.then=l.then=function(a,b,c){var d=[c,a,b];d.cancel=l.cancel;d.deferred=new n(function(a){return d.cancel&&d.cancel(a)});
p&&!A?f(d,p,u,h):A.push(d);return d.deferred.promise};this.cancel=l.cancel=function(b,c){if(p){if(!0===c)throw Error("This deferred has already been fulfilled.");}else{if(a){var f=a(b);b="undefined"===typeof f?b:f}x=!0;if(p){if(2===p&&u===b)return b}else return"undefined"===typeof b&&(b=new e),s(b),b}};b(l)};n.prototype.toString=function(){return"[object Deferred]"};d&&d(n);return n})},"dojo/errors/CancelError":function(){define(["./create"],function(h){return h("CancelError",null,null,{dojoType:"cancel"})})},
"dojo/errors/create":function(){define(["../_base/lang"],function(h){return function(a,e,m,d){m=m||Error;var b=function(a){if(m===Error){Error.captureStackTrace&&Error.captureStackTrace(this,b);var f=Error.call(this,a),l;for(l in f)f.hasOwnProperty(l)&&(this[l]=f[l]);this.message=a;this.stack=f.stack}else m.apply(this,arguments);e&&e.apply(this,arguments)};b.prototype=h.delegate(m.prototype,d);b.prototype.name=a;return b.prototype.constructor=b}})},"dojo/promise/Promise":function(){define(["../_base/lang"],
function(h){function a(){throw new TypeError("abstract");}return h.extend(function(){},{then:function(e,m,d){a()},cancel:function(e,m){a()},isResolved:function(){a()},isRejected:function(){a()},isFulfilled:function(){a()},isCanceled:function(){a()},always:function(a){return this.then(a,a)},otherwise:function(a){return this.then(null,a)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer",
"../has","../_base/lang","../_base/array"],function(h,a,e,m){function d(a,b,c){var f="";a&&a.stack&&(f+=a.stack);b&&b.stack&&(f+="\n    ----------------------------------------\n    rejected"+b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));c&&c.stack&&(f+="\n    ----------------------------------------\n"+c.stack);console.error(a,f)}function b(a,b,c,f){b||d(a,c,f)}function c(a,b,c,d){m.some(l,function(c){if(c.error===a)return b&&(c.handled=!0),!0})||l.push({error:a,rejection:c,handled:b,
deferred:d,timestamp:(new Date).getTime()});p||(p=setTimeout(f,n))}function f(){var a=(new Date).getTime(),b=a-n;l=m.filter(l,function(a){return a.timestamp<b?(a.handled||d(a.error,a.rejection,a.deferred),!1):!0});p=l.length?setTimeout(f,l[0].timestamp+n-a):!1}a.add("config-useDeferredInstrumentation","report-unhandled-rejections");var l=[],p=!1,n=1E3;return function(f){var l=a("config-useDeferredInstrumentation");if(l){h.on("resolved",e.hitch(console,"log","resolved"));h.on("rejected",e.hitch(console,
"log","rejected"));h.on("progress",e.hitch(console,"log","progress"));var d=[];"string"===typeof l&&(d=l.split(","),l=d.shift());if("report-rejections"===l)f.instrumentRejected=b;else if("report-unhandled-rejections"===l||!0===l||1===l)f.instrumentRejected=c,n=parseInt(d[0],10)||n;else throw Error("Unsupported instrumentation usage \x3c"+l+"\x3e");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(h,a,e){function m(a){setTimeout(function(){b.apply(d,
a)},0)}var d=new e,b=d.emit;d.emit=null;a.prototype.trace=function(){var a=h._toArray(arguments);this.then(function(b){m(["resolved",b].concat(a))},function(b){m(["rejected",b].concat(a))},function(b){m(["progress",b].concat(a))});return this};a.prototype.traceRejected=function(){var a=h._toArray(arguments);this.otherwise(function(b){m(["rejected",b].concat(a))});return this};return d})},"dojo/Evented":function(){define(["./aspect","./on"],function(h,a){function e(){}var m=h.after;e.prototype={on:function(d,
b){return a.parse(this,d,b,function(a,f){return m(a,"on"+f,b,!0)})},emit:function(d,b){var c=[this];c.push.apply(c,arguments);return a.emit.apply(a,c)}};return e})},"dojo/aspect":function(){define([],function(){function h(a,b,l,d){var n=a[b],e="around"==b,m;if(e){var w=l(function(){return n.advice(this,arguments)});m={remove:function(){w&&(w=a=l=null)},advice:function(a,b){return w?w.apply(a,b):n.advice(a,b)}}}else m={remove:function(){if(m.advice){var d=m.previous,n=m.next;!n&&!d?delete a[b]:(d?
d.next=n:a[b]=n,n&&(n.previous=d));a=l=m.advice=null}},id:a.nextId++,advice:l,receiveArguments:d};if(n&&!e)if("after"==b){for(;n.next&&(n=n.next););n.next=m;m.previous=n}else"before"==b&&(a[b]=m,m.next=n,n.previous=m);else a[b]=m;return m}function a(a){return function(b,l,d,n){var m=b[l],r;if(!m||m.target!=b)b[l]=r=function(){for(var a=r.nextId,b=arguments,c=r.before;c;)c.advice&&(b=c.advice.apply(this,b)||b),c=c.next;if(r.around)var d=r.around.advice(this,b);for(c=r.after;c&&c.id<a;){if(c.advice)if(c.receiveArguments)var f=
c.advice.apply(this,b),d=f===e?d:f;else d=c.advice.call(this,d,b);c=c.next}return d},m&&(r.around={advice:function(a,b){return m.apply(a,b)}}),r.target=b,r.nextId=r.nextId||0;b=h(r||m,a,d,n);d=null;return b}}var e,m=a("after"),d=a("before"),b=a("around");return{before:d,around:b,after:m}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(h,a,e){function m(a,b,d,l,p){if(l=b.match(/(.*):(.*)/))return b=l[2],l=l[1],c.selector(l,b).call(p,a,d);
e("touch")&&(f.test(b)&&(d=L(d)),!e("event-orientationchange")&&"orientationchange"==b&&(b="resize",a=window,d=L(d)));r&&(d=r(d));if(a.addEventListener){var m=b in n,z=m?n[b]:b;a.addEventListener(z,d,m);return{remove:function(){a.removeEventListener(z,d,m)}}}if(D&&a.attachEvent)return D(a,"on"+b,d);throw Error("Target must be an event emitter");}function d(){this.cancelable=!1;this.defaultPrevented=!0}function b(){this.bubbles=!1}var c=function(a,b,d,l){return"function"==typeof a.on&&"function"!=
typeof b&&!a.nodeType?a.on(b,d):c.parse(a,b,d,m,l,this)};c.pausable=function(a,b,d,l){var f;a=c(a,b,function(){if(!f)return d.apply(this,arguments)},l);a.pause=function(){f=!0};a.resume=function(){f=!1};return a};c.once=function(a,b,d,l){var f=c(a,b,function(){f.remove();return d.apply(this,arguments)});return f};c.parse=function(a,b,d,f,l,n){var p;if(b.call)return b.call(n,a,d);b instanceof Array?p=b:-1<b.indexOf(",")&&(p=b.split(/\s*,\s*/));if(p){var e=[];b=0;for(var m;m=p[b++];)e.push(c.parse(a,
m,d,f,l,n));e.remove=function(){for(var a=0;a<e.length;a++)e[a].remove()};return e}return f(a,b,d,l,n)};var f=/^touch/;c.matches=function(b,c,d,f,l){l=l&&"function"==typeof l.matches?l:a.query;f=!1!==f;1!=b.nodeType&&(b=b.parentNode);for(;!l.matches(b,c,d);)if(b==d||!1===f||!(b=b.parentNode)||1!=b.nodeType)return!1;return b};c.selector=function(a,b,d){return function(l,f){function n(b){return c.matches(b,a,l,d,p)}var p="function"==typeof a?{matches:a}:this,e=b.bubble;return e?c(l,e(n),f):c(l,b,function(a){var b=
n(a.target);if(b)return a.selectorTarget=b,f.call(b,a)})}};var l=[].slice,p=c.emit=function(a,c,f){var n=l.call(arguments,2),p="on"+c;if("parentNode"in a){var e=n[0]={},m;for(m in f)e[m]=f[m];e.preventDefault=d;e.stopPropagation=b;e.target=a;e.type=c;f=e}do a[p]&&a[p].apply(a,n);while(f&&f.bubbles&&(a=a.parentNode));return f&&f.cancelable&&f},n=e("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!e("event-stopimmediatepropagation"))var z=function(){this.modified=this.immediatelyStopped=!0},
r=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=z,a.apply(this,arguments)}};if(e("dom-addeventlistener"))c.emit=function(a,b,d){if(a.dispatchEvent&&document.createEvent){var f=(a.ownerDocument||document).createEvent("HTMLEvents");f.initEvent(b,!!d.bubbles,!!d.cancelable);for(var l in d)l in f||(f[l]=d[l]);return a.dispatchEvent(f)&&f}return p.apply(c,arguments)};else{c._fixEvent=function(a,b){a||(a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);
if(!a)return a;try{w&&(a.type==w.type&&a.srcElement==w.target)&&(a=w)}catch(c){}if(!a.target)switch(a.target=a.srcElement,a.currentTarget=b||a.srcElement,"mouseover"==a.type&&(a.relatedTarget=a.fromElement),"mouseout"==a.type&&(a.relatedTarget=a.toElement),a.stopPropagation||(a.stopPropagation=x,a.preventDefault=A),a.type){case "keypress":var d="charCode"in a?a.charCode:a.keyCode;10==d?(d=0,a.keyCode=13):13==d||27==d?d=0:3==d&&(d=99);a.charCode=d;d=a;d.keyChar=d.charCode?String.fromCharCode(d.charCode):
"";d.charOrCode=d.keyChar||d.keyCode}return a};var w,y=function(a){this.handle=a};y.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var u=function(a){return function(b){b=c._fixEvent(b,this);var d=a.call(this,b);b.modified&&(w||setTimeout(function(){w=null}),w=b);return d}},D=function(a,b,c){c=u(c);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>e("jscript"))&&!e("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=
[]);var d=a[b];if(!d||!d.listeners){var f=d,d=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");d.listeners=[];a[b]=d;d.global=this;f&&d.listeners.push(_dojoIEListeners_.push(f)-1)}d.listeners.push(a=d.global._dojoIEListeners_.push(c)-1);return new y(a)}return h.after(a,b,c,!0)},x=function(){this.cancelBubble=!0},A=c._preventDefault=function(){this.bubbledKeyCode=
this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(e("touch"))var s=function(){},K=window.orientation,L=function(a){return function(b){var c=b.corrected;if(!c){var d=b.type;try{delete b.type}catch(f){}if(b.type){if(e("touch-can-modify-event-delegate"))s.prototype=b,c=new s;else{var c={},l;for(l in b)c[l]=b[l]}c.preventDefault=function(){b.preventDefault()};c.stopPropagation=function(){b.stopPropagation()}}else c=b,c.type=d;b.corrected=
c;if("resize"==d){if(K==window.orientation)return null;K=window.orientation;c.type="orientationchange";return a.call(this,c)}"rotation"in c||(c.rotation=0,c.scale=1);var d=c.changedTouches[0],n;for(n in d)delete c[n],c[n]=d[n]}return a.call(this,c)}};return c})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(h,a,e){function m(a){return c[a]=new Function("item","index","array",a)}function d(a){var b=!a;return function(d,f,l){var e=0,u=d&&d.length||0,h;u&&"string"==typeof d&&
(d=d.split(""));"string"==typeof f&&(f=c[f]||m(f));if(l)for(;e<u;++e){if(h=!f.call(l,d[e],e,d),a^h)return!h}else for(;e<u;++e)if(h=!f(d[e],e,d),a^h)return!h;return b}}function b(a){var b=1,c=0,d=0;a||(b=c=d=-1);return function(e,m,u,h){if(h&&0<b)return l.lastIndexOf(e,m,u);h=e&&e.length||0;var x=a?h+d:c;u===f?u=a?c:h+d:0>u?(u=h+u,0>u&&(u=c)):u=u>=h?h+d:u;for(h&&"string"==typeof e&&(e=e.split(""));u!=x;u+=b)if(e[u]==m)return u;return-1}}var c={},f,l={every:d(!1),some:d(!0),indexOf:b(!0),lastIndexOf:b(!1),
forEach:function(a,b,d){var f=0,l=a&&a.length||0;l&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=c[b]||m(b));if(d)for(;f<l;++f)b.call(d,a[f],f,a);else for(;f<l;++f)b(a[f],f,a)},map:function(a,b,d,f){var l=0,e=a&&a.length||0;f=new (f||Array)(e);e&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=c[b]||m(b));if(d)for(;l<e;++l)f[l]=b.call(d,a[l],l,a);else for(;l<e;++l)f[l]=b(a[l],l,a);return f},filter:function(a,b,d){var f=0,l=a&&a.length||0,e=[],h;l&&"string"==typeof a&&(a=a.split(""));
"string"==typeof b&&(b=c[b]||m(b));if(d)for(;f<l;++f)h=a[f],b.call(d,h,f,a)&&e.push(h);else for(;f<l;++f)h=a[f],b(h,f,a)&&e.push(h);return e},clearCache:function(){c={}}};e.mixin(h,l);return l})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTileHandler":function(){define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(h,a,e,m,d,b){return function(){function a(){this._tiles={};this._spriteInfo={};this._glyphInfo={}}a.prototype.reset=
function(){var a=new e;this._spriteInfo={};this._glyphInfo={};var b=this._tiles,c;for(c in b){var d=b[c];d&&d.setObsolete()}this._tiles={};a.resolve();return a.promise};a.prototype.getLayers=function(){return this._layers};a.prototype.setLayers=function(a){this._layers=(new b(a)).layers;return m.resolve({data:""})};a.prototype.getTile=function(a,b){var c=this;this._tiles[a.key]&&delete this._tiles[a.key];var n=new d(a.key,a.refKey,this,a.rotation);this._tiles[a.key]=n;return b.invoke("fetchTileData",
a.refKey).then(function(a){return n.setDataAndParse(a.protobuff,b).then(function(a){return a})}).otherwise(function(a){n.setObsolete();delete c._tiles[n.tileKey]}).always(function(a){return a})};a.prototype.update=function(a){var b=this._tiles[a.key];return!b?m.reject():b.updateSymbols(a.rotation)};a.prototype.destructTileData=function(a){this._tiles[a.key]&&delete this._tiles[a.key];return m.resolve()};a.prototype.fetchSprites=function(a,b){var c=[],d=this._spriteInfo;a.forEach(function(a){void 0===
d[a]&&c.push(a)});return 0===c.length?m.resolve():b.invoke("getSprites",{sprites:c}).then(function(a){a=a.spriteItems;for(var b in a)d[b]=a[b]})};a.prototype.getSpriteItems=function(){return this._spriteInfo};a.prototype.fetchGlyphs=function(a,b,c,d){var e=[],r=this._glyphInfo[b];r?c.forEach(function(a){r[a]||e.push(a)}):(r=this._glyphInfo[b]=[],c.forEach(function(a){return e.push(a)}));return 0===e.length?m.resolve():d.invoke("getGlyphs",{tileID:a,font:b,codePoints:e}).then(function(a){a=a.glyphItems;
for(var b in a)r[b]=a[b]})};a.prototype.getGlyphItems=function(a){return this._glyphInfo[a]};return a}()})},"esri/layers/vectorTiles/core/promiseUtils":function(){define(["require","exports","dojo/Deferred","./Error"],function(h,a,e,m){a.eachAlways=function(a){var b=new e,c=[],f=a.length;0===f&&b.resolve(c);a.forEach(function(a){var d={promise:a};c.push(d);a.then(function(a){d.value=a}).otherwise(function(a){d.error=a}).then(function(){--f;0===f&&b.resolve(c)})});return b.promise};a.create=function(a){var b=
new e;a(function(a){void 0===a&&(a=null);return b.resolve(a)},b.reject);return b.promise};a.reject=function(a){var b=new e;b.reject(a);return b.promise};a.resolve=function(a){void 0===a&&(a=null);var b=new e;b.resolve(a);return b.promise};a.after=function(a,b){void 0===b&&(b=null);var c=0,f=new e(function(){c&&(clearTimeout(c),c=0)}),c=setTimeout(function(){f.resolve(b)},a);return f.promise};a.timeout=function(a,b,c){var f=0,l=new e(a.cancel);a.then(function(a){l.isFulfilled()||(l.resolve(a),f&&(clearTimeout(f),
f=0))});a.otherwise(function(a){l.isFulfilled()||(l.reject(a),f&&(clearTimeout(f),f=0))});f=setTimeout(function(){var a=c||new m("promiseUtils:timeout","The wrapped promise did not resolve within "+b+" ms");l.reject(a)},b);return l.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(h,a,e,m,d){h=function(a){function c(){a.apply(this,arguments)}e(c,a);return c}(d);h.prototype.type="error";
return h})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(h,a){function e(){this.constructor=h}for(var m in a)a.hasOwnProperty(m)&&(h[m]=a[m]);h.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(h,a,e,m){var d=arguments.length,b=3>d?a:null===m?m=Object.getOwnPropertyDescriptor(a,e):m,c;if("object"===typeof Reflect&&"function"===
typeof Reflect.decorate)b=Reflect.decorate(h,a,e,m);else for(var f=h.length-1;0<=f;f--)if(c=h[f])b=(3>d?c(b):3<d?c(a,e,b):c(a,e))||b;return 3<d&&b&&Object.defineProperty(a,e,b),b}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","dojo/string"],function(h,a,e,m,d){return function(){function a(b,f,l){this.name=b;this.message=f&&d.substitute(f,l,function(a){return null==a?"":a})||"";this.details=l}a.prototype.toString=
function(){return"["+this.name+"]: "+this.message};return a}()})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(h,a){var e=/[&<>'"\/]/g,m={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},d={};a.setObject("dojo.string",d);d.escape=function(a){return!a?"":a.replace(e,function(a){return m[a]})};d.rep=function(a,c){if(0>=c||!a)return"";for(var d=[];;){c&1&&d.push(a);if(!(c>>=1))break;a+=a}return d.join("")};d.pad=function(a,
c,f,l){f||(f="0");a=String(a);c=d.rep(f,Math.ceil((c-a.length)/f.length));return l?a+c:c+a};d.substitute=function(b,c,d,l){l=l||h.global;d=d?a.hitch(l,d):function(a){return a};return b.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(b,n,e){if(""==n)return"$";b=a.getObject(n,!1,c);e&&(b=a.getObject(e,!1,l).call(l,b,n));return d(b,n).toString()})};d.trim=String.prototype.trim?a.trim:function(a){a=a.replace(/^\s+/,"");for(var c=a.length-1;0<=c;c--)if(/\S/.test(a.charAt(c))){a=a.substring(0,
c+1);break}return a};return d})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),function(h,a,e,m,d,b,c,f,l,p,n,z,r,w){return function(){function a(b,c,d,f){void 0===f&&(f=0);this.rotation=0;this._symbolBuckets=[];this.tileKey=b;this.refKey=c;
this._workerTileHandler=d;this.status=0;this.rotation=f;this.placementEngine=new r.PlacementEngine(w.C_DEG_TO_RAD*f)}a.prototype.setDataAndParse=function(a,d){var f=this;this.polygonVertexBuffer=new b.PolygonMemoryBuffer;this.polygonOutlineVertexBuffer=new b.PolygonOutlineMemoryBuffer;this.polygonIndexBuffer=new c.TriangleElementMemoryBuffer;this.polygonOutlineIndexBuffer=new c.TriangleElementMemoryBuffer;this.lineVertexBuffer=new b.LineMemoryBuffer;this.lineIndexBuffer=new c.TriangleElementMemoryBuffer;
this.lineJoinVertexBuffer=new b.LineJoinMemoryBuffer;this.markerVertexBuffer=new b.SymbolMemoryBuffer;this.markerIndexBuffer=new c.TriangleElementMemoryBuffer;this.textVertexBuffer=new b.SymbolMemoryBuffer;this.textIndexBuffer=new c.TriangleElementMemoryBuffer;var m=new e(function(a){f.status=6});this._parse(a,d).then(function(a){f.placementEngine=null;for(var b=new Uint32Array([2,f.polygonVertexBuffer.sizeInBytes,3,f.polygonOutlineVertexBuffer.sizeInBytes,6,f.polygonIndexBuffer.sizeInBytes,7,f.polygonOutlineIndexBuffer.sizeInBytes,
0,f.lineVertexBuffer.sizeInBytes,8,f.lineIndexBuffer.sizeInBytes,1,f.lineJoinVertexBuffer.sizeInBytes,4,f.markerVertexBuffer.sizeInBytes,9,f.markerIndexBuffer.sizeInBytes,5,f.textVertexBuffer.sizeInBytes,10,f.textIndexBuffer.sizeInBytes]),c=[],d=a.length,e=0;e<d;e++){var r=a[e];r instanceof p?(c.push(r.layerIndex),c.push(1),c.push(r.polygonIndexStart),c.push(r.polygonIndexCount),c.push(r.polygonOutlineIndexStart),c.push(r.polygonOutlineIndexCount)):r instanceof n?(c.push(r.layerIndex),c.push(2),c.push(r.triangleIndexStart),
c.push(r.triangleIndexCount),c.push(r.connectorStart),c.push(r.connectorCount)):r instanceof z?(c.push(r.layerIndex),c.push(3),c.push(0===r.markerIndexCount?0:r.markerIndexStart),c.push(r.markerIndexCount),c.push(0===r.textIndexCount?0:r.textIndexStart),c.push(r.textIndexCount),c.push(r.sdfMarker?1:0)):r instanceof l&&(c.push(r.layerIndex),c.push(0))}a=new Uint32Array(c);var c=f.polygonVertexBuffer.toBuffer(),d=f.polygonOutlineVertexBuffer.toBuffer(),e=f.polygonIndexBuffer.toBuffer(),r=f.polygonOutlineIndexBuffer.toBuffer(),
w=f.lineVertexBuffer.toBuffer(),y=f.lineIndexBuffer.toBuffer(),h=f.lineJoinVertexBuffer.toBuffer(),t=f.markerVertexBuffer.toBuffer(),u=f.markerIndexBuffer.toBuffer(),H=f.textVertexBuffer.toBuffer(),C=f.textIndexBuffer.toBuffer();f.placementEngine=null;f.polygonVertexBuffer=null;f.polygonIndexBuffer=null;f.polygonOutlineVertexBuffer=null;f.polygonOutlineIndexBuffer=null;f.lineVertexBuffer=null;f.lineIndexBuffer=null;f.lineJoinVertexBuffer=null;m.resolve({data:{bufferDataInfo:b.buffer,bucketDataInfo:a.buffer,
bufferData:[c,d,e,r,w,y,h,t,u,H,C]},buffers:[c,e,d,r,w,y,h,t,u,H,C,b.buffer,a.buffer]})});return m.promise};a.prototype.addBucket=function(a){this._symbolBuckets.push(a)};a.prototype.updateSymbols=function(a){var f=this,l=this._symbolBuckets;if(!l)return m.resolve({data:null});this.rotation=a;var n=new r.PlacementEngine(360*(a/256)*w.C_DEG_TO_RAD),e=new b.SymbolMemoryBuffer,p=new c.TriangleElementMemoryBuffer,z=new b.SymbolMemoryBuffer,y=new c.TriangleElementMemoryBuffer,h=[],E=l.length,F=0;return d(function(){if(6===
f.status)return!0;if(F<E){var a=l[F++].copy(e,p,z,y,n);a&&(h.push(a),a.updateSymbols())}return F>=E},5).then(function(){if(6===f.status||0===e.sizeInBytes&&0===p.sizeInBytes&&0===z.sizeInBytes&&0===y.sizeInBytes)return{data:null};var a=new Uint32Array([4,e.sizeInBytes,9,p.sizeInBytes,5,z.sizeInBytes,10,y.sizeInBytes]),b=[];E=h.length;for(var c=0;c<E;c++){var d=h[c];b.push(d.layerIndex);b.push(3);b.push(0===d.markerIndexCount?0:d.markerIndexStart);b.push(d.markerIndexCount);b.push(0===d.textIndexCount?
0:d.textIndexStart);b.push(d.textIndexCount);b.push(d.sdfMarker?1:0)}var b=new Uint32Array(b),c=e.toBuffer(),d=p.toBuffer(),l=z.toBuffer(),n=y.toBuffer();return{data:{bufferDataInfo:a.buffer,bucketDataInfo:b.buffer,bufferData:[c,d,l,n]},buffers:[c,d,l,n,a.buffer,b.buffer]}}).otherwise(function(a){return m.resolve({data:null})})};a.prototype.setObsolete=function(){this.status=6};a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()};a.prototype.getWorkerTileHandler=function(){return this._workerTileHandler};
a.prototype._parse=function(a,b){return!a||0===a.byteLength?m.resolve([]):(new f(a,this,b)).parse()};return a}()})},"esri/layers/vectorTiles/core/executeAsync":function(){define(["require","exports","dojo/Deferred","./now"],function(h,a,e,m){return function(a,b){var c;if(!b||0>=b)b=500;var f=new e(function(){c&&clearTimeout(c)}),l=function(){if(!f.isFulfilled()){for(var e=m(),n=!1;!n&&m()-e<b;)n=!0===a();n?f.resolve():c=setTimeout(l,0)}};c=setTimeout(l,0);return f.promise}})},"esri/layers/vectorTiles/core/now":function(){define(["require",
"exports"],function(h,a){var e=Function("return this")();return function(){var a=e.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var d;d=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-d}}()})},"esri/layers/vectorTiles/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),
function(h,a,e,m,d,b){h=function(a){function b(){a.call(this,8)}e(b,a);b.prototype.add=function(a,b,c,f,e,m,y){var h=this.array,D=this.index;a=d.i1616to32(2*a|e,2*b|m);h.push(a);a=d.i8816to32(Math.round(31*c),Math.round(31*f),y);h.push(a);return D};return b}(d);a.LineMemoryBuffer=h;h=function(a){function b(){a.call(this,4)}e(b,a);b.prototype.add=function(a,b){var c=this.index;this.array.push(d.i1616to32(a,b));return c};return b}(d);a.LineJoinMemoryBuffer=h;h=function(a){function b(){a.call(this,4)}
e(b,a);b.prototype.add=function(a,b){this.array.push(d.i1616to32(a,b))};return b}(d);a.PolygonMemoryBuffer=h;h=function(a){function b(){a.call(this,8)}e(b,a);b.prototype.add=function(a,b,c,f,e,m){var y=this.array,h=this.index;a=d.i1616to32(a,b);y.push(a);a=d.i8888to32(Math.round(15*c),Math.round(15*f),e,m);y.push(a);return h};return b}(d);a.PolygonOutlineMemoryBuffer=h;h=function(a){function f(){a.call(this,16)}e(f,a);f.prototype.add=function(a,c,f,e,m,w,y,h,D,x){var A=this.array,s=this.index;a=d.i1616to32(a,
c);A.push(a);a=d.i1616to32(Math.round(32*f),Math.round(32*e));A.push(a);a=d.i8888to32(m/4,w/4,0,0);A.push(a);a=d.i8888to32(Math.ceil(10*x),b.radToByte(y),10*h,10*Math.min(D,25));A.push(a);return s};return f}(d);a.SymbolMemoryBuffer=h})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(h,a){return function(){function a(e){this._array=[];0>=e&&console.error("strideInBytes must be positive!");this._stride=e}Object.defineProperty(a.prototype,"array",
{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};
a.i1616to32=function(a,d){return 65535&a|d<<16};a.i8888to32=function(a,d,b,c){return a&255|(d&255)<<8|(b&255)<<16|c<<24};a.i8816to32=function(a,d,b){return a&255|(d&255)<<8|b<<16};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(h,a){function e(a,b){a%=b;return 0<=a?a:a+b}a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=
256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var m=1/Math.LN2;a.positiveMod=e;a.radToByte=function(d){return e(d*a.C_RAD_TO_256,256)};a.degToByte=function(d){return e(d*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*m};a.sqr=function(a){return a*a};a.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};a.interpolate=function(a,b,c){return a*(1-c)+b*c}})},"esri/layers/vectorTiles/views/vectorTiles/IndexMemoryBuffer":function(){define(["require","exports",
"../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(h,a,e,m,d){h=function(a){function c(){a.call(this,12)}e(c,a);c.prototype.add=function(a,b,c){var d=this.array;d.push(a);d.push(b);d.push(c)};return c}(d);a.TriangleElementMemoryBuffer=h;d=function(a){function c(){a.call(this,4)}e(c,a);c.prototype.add=function(a){this.array.push(a)};return c}(d);a.PointElementMemoryBuffer=d})},"esri/layers/vectorTiles/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./TileClipper".split(" "),
function(h,a,e,m,d,b,c,f,l,p,n,z,r){return function(){function a(c,d,f){this._pbfTile=new b(new Uint8Array(c),new DataView(c));this._tile=d;this._connection=f;this._layers=d.getLayers();f=d.tileKey.split("/").map(parseFloat);var l=f[0];c=f[1];f=f[2];this._level=l;d.refKey&&(d=d.refKey.split("/").map(parseFloat)[0],d=l-d,0<d&&(l=(1<<d)-1,this._tileClipper=new r.TileClipper(d,c&l,f&l)));this._tileClipper||(this._tileClipper=new r.SimpleBuilder)}a.prototype.parse=function(){for(var a=this,b=this._parseTileData(this._pbfTile),
c=this._layers,l=c.length,n=this._level,p,r=[],z={},w=new Set,l=l-1;0<=l;l--)if(p=c[l],!(p.minzoom&&n<p.minzoom)&&!(p.maxzoom&&n>=p.maxzoom)&&!(p.layout&&"none"===p.layout.visibility))if(0===p.type)p=this._createBucket(p),r.push(p);else{var h=p.sourceLayer,E=b[h];if(E&&(w.add(h),p=this._createBucket(p)))p.layerIndex=l,p.layerExtent=E.extent,(E=z[h])||(E=z[h]=[]),E.push(p)}var F=10*(this._level+1),G=[],B=[],t=[],v=[],H=this._tileClipper,C=new Set,T={},P=[];w.forEach(function(a){return P.push(a)});
var J=0,S=0,Q=P.length;return d(function(){if(6===a._tile.status)return!0;switch(J){case 0:if(S<Q)for(var c=P[S++],d=b[c],l=z[c],c=d.getData();c.next(2);){var e=new f(c.getMessage(),d),n=e.values;if(n&&(n=n._minzoom)&&n>=F)continue;for(var m=0,p=l;m<p.length;m++)n=p[m],n.pushFeature(e)}else{d=a._tile;for(c in z){l=z[c];for(e=0;e<l.length;e++)n=l[e],n.hasFeatures()&&(3===n.layer.type?(G.push(n),d.addBucket(n)):n.layer.refLayerId?t.push(n):(B.push(n),v[n.layer.id]=n))}J=1;S=0;Q=G.length}break;case 1:S<
Q?G[S++].getResources(H,C,T):J=2}return 2===J},5).then(function(){if(6===a._tile.status)return[];var b=[],c=a._tile.getWorkerTileHandler(),f;0<C.size&&(f=c.fetchSprites(C,a._connection),b.push(f));for(var l in T)f=T[l],0<f.size&&(f=c.fetchGlyphs(a._tile.tileKey,l,f,a._connection),b.push(f));return e(b).then(function(b){if(6===a._tile.status)return[];var c=0,f=0,l=B.length;return d(function(){if(6===a._tile.status)return!0;switch(c){case 0:if(f<l){var b=B[f++];b.processFeatures(H,a._tile);r.push(b)}else c=
1,f=0,l=t.length;break;case 1:for(var d=0;d<t.length;d++){var b=t[d],n=v[b.layer.refLayerId];n&&(n.assignBufferInfo(b),r.push(b))}c=2;f=0;l=G.length;break;case 2:f<l?(b=G[f++],b.processFeatures(H,a._tile),r.push(b)):c=3}return 3===c},5).then(function(){r.sort(function(a,b){return a.layerIndex-b.layerIndex});return r})}).otherwise(function(a){return m.reject(Error(a))})}).otherwise(function(a){return m.reject(Error(a))})};a.prototype._parseTileData=function(a){for(var b={};a.next();)switch(a.tag()){case 3:var d=
new c(a.getMessage());b[d.name]=d;break;default:a.skip()}return b};a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 3:return this._createSymbolBucket(a)}};a.prototype._createBackgroundBucket=function(a){return new l(a,this._level)};a.prototype._createFillBucket=function(a){var b=this._tile;return new p(a,this._level,b.polygonVertexBuffer,b.polygonIndexBuffer,b.polygonOutlineVertexBuffer,
b.polygonOutlineIndexBuffer)};a.prototype._createLineBucket=function(a){var b=this._tile;return new n(a,this._level,b.lineVertexBuffer,b.lineIndexBuffer,b.lineJoinVertexBuffer)};a.prototype._createSymbolBucket=function(a){var b=this._tile;return new z(a,this._level,b.markerVertexBuffer,b.markerIndexBuffer,b.textVertexBuffer,b.textIndexBuffer,b.placementEngine,b.getWorkerTileHandler())};return a}()})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(h,a,e){var m=
h.some;return function(d){var b,c;d instanceof Array?c=d:d&&"object"===typeof d&&(b=d);var f,l=[];if(b){c=[];for(var p in b)Object.hasOwnProperty.call(b,p)&&(l.push(p),c.push(b[p]));f={}}else c&&(f=[]);if(!c||!c.length)return(new a).resolve(f);var n=new a;n.promise.always(function(){f=l=null});var z=c.length;m(c,function(a,c){b||l.push(c);e(a,function(a){n.isFulfilled()||(f[l[c]]=a,0===--z&&n.resolve(f))},n.reject);return n.isFulfilled()});return n.promise}})},"dojo/when":function(){define(["./Deferred",
"./promise/Promise"],function(h,a){return function(e,m,d,b){var c=e&&"function"===typeof e.then,f=c&&e instanceof a;if(c)f||(c=new h(e.cancel),e.then(c.resolve,c.reject,c.progress),e=c.promise);else return 1<arguments.length?m?m(e):e:(new h).resolve(e);return m||d||b?e.then(m,d,b):e}})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(h,a){return function(){function a(e,d,b,c){this._tag=0;this._dataType=99;this._data=e;this._dataView=d;this._pos=b||0;this._end=c||
e.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var d=this._decodeVarint();this._tag=d>>3;this._dataType=d&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};
a.prototype.getUInt32=function(){return this._decodeVarint()};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){return this._decodeSVarint()};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,d=this._pos,a=a.getUint32(d,!0)+4294967296*a.getUint32(d+
4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,d=this._pos,a=a.getUint32(d,!0)+4294967296*a.getInt32(d+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=
function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),d=this._pos,d=this._toString(this._data,d,d+a);this._skip(a);return d};a.prototype.getBytes=function(){var a=this._getLength(),d=this._pos,d=this._toBytes(this._data,d,d+a);this._skip(a);return d};a.prototype.getMessage=function(){var m=this._getLength(),d=this._pos,d=new a(this._data,this._dataView,d,d+m);this._skip(m);return d};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();
break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,d=this._pos,b=0,c;if(10<=this._end-d){if(c=a[d++],b|=c&127,0!==(c&128)&&(c=a[d++],b|=(c&127)<<7,0!==(c&128)&&(c=a[d++],b|=(c&127)<<14,0!==(c&128)&&(c=a[d++],b|=(c&127)<<21,0!==
(c&128)&&(c=a[d++],b+=268435456*(c&127),0!==(c&128)&&(c=a[d++],b+=34359738368*(c&127),0!==(c&128)&&(c=a[d++],b+=4398046511104*(c&127),0!==(c&128)&&(c=a[d++],b+=562949953421312*(c&127),0!==(c&128)&&(c=a[d++],b+=72057594037927936*(c&127),0!==(c&128)&&(c=a[d++],b+=9223372036854775E3*(c&127),0!==(c&128)))))))))))throw Error("Varint too long!");}else{for(var f=1;d!==this._end;){c=a[d];if(0===(c&128))break;++d;b+=(c&127)*f;f*=128}if(d===this._end)throw Error("Varint overrun!");++d;b+=c*f}this._pos=d;return b};
a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,d,b){var c="",f="";for(b=Math.min(this._end,b);d<b;++d){var l=a[d];l&128?f+="%"+l.toString(16):(c+=decodeURIComponent(f)+String.fromCharCode(l),f="")}f.length&&(c+=decodeURIComponent(f));return c};a.prototype._toBytes=function(a,d,b){b=Math.min(this._end,
b);return new Uint8Array(a.buffer,d,b-d)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(h,a){return function(){function a(m){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=m.clone();m.next();)switch(m.tag()){case 1:this.name=m.getString();break;case 3:this.keys.push(m.getString());break;case 4:this.values.push(a._parseValue(m.getMessage()));break;case 5:this.extent=m.getUInt32();break;default:m.skip()}}
a.prototype.getData=function(){return this._pbfLayer};a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/Feature":function(){define(["require","exports","./Geometry"],function(h,a,e){return function(){function a(d,b){this.values=
{};for(var c=b.keys,f=b.values;d.next();)switch(d.tag()){case 1:this.id=d.getUInt64();break;case 2:for(var l=d.getMessage(),e=this.values;!l.empty();){var n=l.getUInt32(),m=l.getUInt32();e[c[n]]=f[m]}break;case 3:this.type=d.getUInt32();break;case 4:this._pbfGeometry=d.getMessage();break;default:d.skip()}}a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var b=this._pbfGeometry,c,f;a?a.reset(this.type):c=[];for(var l=1,p=0,n=0,m=0;!b.empty();)switch(0===p&&(p=b.getUInt32(),
l=p&7,p>>=3),p--,l){case 1:n+=b.getSInt32();m+=b.getSInt32();a?a.moveTo(n,m):(f&&c.push(f),f=[],f.push(new e.Point(n,m)));break;case 2:n+=b.getSInt32();m+=b.getSInt32();a?a.lineTo(n,m):f.push(new e.Point(n,m));break;case 7:a?a.close():f&&!f[0].equals(n,m)&&f.push(f[0].clone());break;default:throw Error("Invalid path operation");}a?a=a.result():(f&&c.push(f),a=c);return this._geometry=a};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/Geometry":function(){define(["require","exports"],function(h,
a){var e=function(){function a(d,b){this.x=d;this.y=b}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,b){return a===this.x&&b===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,b){this.x=a;this.y=b};a.prototype.normalize=function(){var a=this.x,b=this.y,a=Math.sqrt(a*a+b*b);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,
b){this.x+=a;this.y+=b};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y};a.prototype.assignSub=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y};a.prototype.rotate=function(a,b){var c=this.x,f=this.y;this.x=c*a-f*b;this.y=c*b+f*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)};a.distance=function(a,b){var c=b.x-a.x,f=b.y-a.y;return Math.sqrt(c*c+f*f)};
a.add=function(d,b){return new a(d.x+b.x,d.y+b.y)};a.sub=function(d,b){return new a(d.x-b.x,d.y-b.y)};return a}();a.Point=e})},"esri/layers/vectorTiles/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(h,a,e,m,d){return function(a){function c(c,d){a.call(this,c,d)}e(c,a);return c}(d)})},"esri/layers/vectorTiles/views/vectorTiles/Bucket":function(){define(["require","exports"],function(h,
a){return function(){function a(e,d){this.layerExtent=4096;this._features=[];this.layer=e;this.zoom=d;this._filter=e.getFeatureFilter()}a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)};a.prototype.hasFeatures=function(){return 0<this._features.length};a.prototype.processFeatures=function(a,d){};a.prototype.assignBufferInfo=function(a){};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ../../core/libs/earcut/earcut".split(" "),
function(h,a,e,m,d,b,c){return function(a){function d(b,c,l,e,m,h){a.call(this,b,c);this.polygonVertexBuffer=l;this.polygonIndexBuffer=e;this.polygonOutlineVertexBuffer=m;this.polygonOutlineIndexBuffer=h}e(d,a);Object.defineProperty(d.prototype,"polygonIndexStart",{get:function(){return this._triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"polygonIndexCount",{get:function(){return this._triangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"polygonOutlineIndexStart",{get:function(){return this._outlineElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"polygonOutlineIndexCount",{get:function(){return this._outlineElementsNum},enumerable:!0,configurable:!0});d.prototype.assignBufferInfo=function(a){a._triangleElementsStart=this._triangleElementsStart;a._triangleElementsNum=this._triangleElementsNum;a.layer.hasPaintProperty("fill-outline-color")?(a._outlineElementsStart=this._outlineElementsStart,a._outlineElementsNum=
this._outlineElementsNum):(a._outlineElementsStart=0,a._outlineElementsNum=0)};d.prototype.processFeatures=function(a,b){this._triangleElementsStart=this.polygonIndexBuffer.index;this._triangleElementsNum=0;this._outlineElementsStart=this.polygonOutlineIndexBuffer.index;this._outlineElementsNum=0;a&&a.setExtent(this.layerExtent);for(var c=this.layer.getPaintValue("fill-pattern",this.zoom),c=this.layer.getPaintValue("fill-antialias",this.zoom)&&void 0===c,d=0,f=this._features;d<f.length;d++){var l=
f[d].getGeometry(a);this._processFeature(l,c)}};d.prototype._processFeature=function(a,b){if(a){var c=a.length;if(b)for(var f=0;f<c;f++)this._processOutline(a[f]);for(var e,f=0;f<c;f++){var m=d._area(a[f]);0<m?(void 0!==e&&this._processFill(a,e),e=[f]):0>m&&void 0!==e&&e.push(f)}void 0!==e&&this._processFill(a,e)}};d.prototype._processOutline=function(a){var c=this.polygonOutlineVertexBuffer,d=this.polygonOutlineIndexBuffer,f=d.index,l,e,m,h=new b.Point(0,0),x=new b.Point(0,0),A=new b.Point(0,0),
s=-1,K=-1,L=l=-1,R=-1,M=a.length;if(!(2>M)){e=a[0];for(var E=a[M-1];M&&E.isEqual(e);)--M,E=a[M-1];if(!(2>M-0)){for(E=0;E<M;++E){0===E?(l=a[M-1],e=a[0],m=a[1],h.assignSub(e,l),h.normalize(),h.rightPerpendicular()):(e=m,m=E!==M-1?a[E+1]:a[0],h.assign(x));x.assignSub(m,e);x.normalize();x.rightPerpendicular();l=h.x*x.y-h.y*x.x;A.assignAdd(h,x);A.normalize();var F=-A.x*-h.x+-A.y*-h.y,F=Math.abs(0!==F?1/F:1);8<F&&(F=8);0<=l?(l=c.add(e.x,e.y,h.x,h.y,0,1),-1===L&&(L=l),0<=s&&(0<=K&&0<=l)&&d.add(s,K,l),K=
c.add(e.x,e.y,F*-A.x,F*-A.y,0,-1),-1===R&&(R=K),0<=s&&(0<=K&&0<=l)&&d.add(s,K,l),s=K,K=l,l=c.add(e.x,e.y,A.x,A.y,0,1),0<=s&&(0<=K&&0<=l)&&d.add(s,K,l),K=c.add(e.x,e.y,x.x,x.y,0,1)):(l=c.add(e.x,e.y,F*A.x,F*A.y,0,1),-1===L&&(L=l),0<=s&&(0<=K&&0<=l)&&d.add(s,K,l),K=c.add(e.x,e.y,-h.x,-h.y,0,-1),-1===R&&(R=K),0<=s&&(0<=K&&0<=l)&&d.add(s,K,l),s=K,K=l,l=c.add(e.x,e.y,-A.x,-A.y,0,-1),0<=s&&(0<=K&&0<=l)&&d.add(s,K,l),s=c.add(e.x,e.y,-x.x,-x.y,0,-1));0<=s&&(0<=K&&0<=l)&&d.add(s,K,l)}0<=s&&(0<=K&&0<=L)&&d.add(s,
K,L);0<=s&&(0<=L&&0<=R)&&d.add(s,R,L);this._outlineElementsNum+=3*(d.index-f)}}};d.prototype._processFill=function(a,b){var d;1<b.length&&(d=[]);for(var f=0,l=0;l<b.length;l++){var e=b[l];0!==f&&d.push(f);f+=a[e].length}for(var f=2*f,l=new Float64Array(f),m=0,h=0;h<b.length;h++)for(var e=b[h],e=a[e],x=e.length,A=0;A<x;++A)l[m++]=e[A].x,l[m++]=e[A].y;d=c(l,d,2);m=d.length;if(0<m){h=this.polygonVertexBuffer.index;for(e=0;e<f;)this.polygonVertexBuffer.add(l[e++],l[e++]);for(f=0;f<m;)this.polygonIndexBuffer.add(h+
d[f++],h+d[f++],h+d[f++]);this._triangleElementsNum+=m}};d._area=function(a){for(var b=0,c=a.length-1,d=0;d<c;d++)b+=a[d].x*a[d+1].y-a[d+1].x*a[d].y;return b};return d}(d)})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],function(){function h(d,f,n){n=n||2;s=d.length/n+(f?2*f.length:0);K=!1;var p=f&&f.length,r=p?f[0]*n:d.length,h=a(d,0,r,n,!0),z=[];if(!h)return z;var t,w,x,C;if(p)a:{var u=n,p=[],A,D,S;C=0;for(A=f.length;C<A;C++)D=f[C]*u,S=C<A-1?f[C+1]*u:d.length,D=a(d,D,S,
u,!1),D===D.next&&(D.steiner=!0),p.push(l(D));p.sort(b);for(C=0;C<p.length;C++){if(!h){h=null;break a}f=p[C];u=h;if(u=c(f,u))f=y(u,f),e(f,f.next);h=e(h,h.next)}}if(K)return z;if(d.length>80*n){t=x=d[0];w=p=d[1];for(u=n;u<r;u+=n)C=d[u],f=d[u+1],C<t&&(t=C),f<w&&(w=f),C>x&&(x=C),f>p&&(p=f);x=Math.max(x-t,p-w)}m(h,z,n,t,w,x);return z}function a(a,b,c,d,f){var l;if(f===0<A(a,b,c,d))for(f=b;f<c;f+=d)l=u(f,a[f],a[f+1],l);else for(f=c-d;f>=b;f-=d)l=u(f,a[f],a[f+1],l);l&&z(l,l.next)&&(D(l),l=l.next);return l}
function e(a,b){if(!a)return a;b||(b=a);var c=a,f,d=0,l=s*s/2;do{f=!1;if(!c.steiner&&(z(c,c.next)||0===n(c.prev,c,c.next))){D(c);c=b=c.prev;if(c===c.next)return null;f=!0}else c=c.next;if(d++>l)return K=!0,null}while(f||c!==b);return b}function m(a,b,c,l,h,G,B){if(a){if(!B&&G){var t=a,v=t;do null===v.z&&(v.z=f(v.x,v.y,l,h,G)),v.prevZ=v.prev,v=v.nextZ=v.next;while(v!==t);v.prevZ.nextZ=null;v.prevZ=null;var t=v,x,u,s,A,J,S,Q=1;do{v=t;s=t=null;for(A=0;v;){A++;u=v;for(x=J=0;x<Q&&!(J++,u=u.nextZ,!u);x++);
for(S=Q;0<J||0<S&&u;)0===J?(x=u,u=u.nextZ,S--):0===S||!u?(x=v,v=v.nextZ,J--):v.z<=u.z?(x=v,v=v.nextZ,J--):(x=u,u=u.nextZ,S--),s?s.nextZ=x:t=x,x.prevZ=s,s=x;v=u}s.nextZ=null;Q*=2}while(1<A)}for(t=a;a.prev!==a.next;){v=a.prev;u=a.next;if(G)a:{s=a;S=l;var N=h,U=G;A=s.prev;J=s;Q=s.next;if(0<=n(A,J,Q))s=!1;else{var X=A.x>J.x?A.x>Q.x?A.x:Q.x:J.x>Q.x?J.x:Q.x,V=A.y>J.y?A.y>Q.y?A.y:Q.y:J.y>Q.y?J.y:Q.y;x=f(A.x<J.x?A.x<Q.x?A.x:Q.x:J.x<Q.x?J.x:Q.x,A.y<J.y?A.y<Q.y?A.y:Q.y:J.y<Q.y?J.y:Q.y,S,N,U);S=f(X,V,S,N,U);
for(N=s.nextZ;N&&N.z<=S;){if(N!==s.prev&&N!==s.next&&p(A.x,A.y,J.x,J.y,Q.x,Q.y,N.x,N.y)&&0<=n(N.prev,N,N.next)){s=!1;break a}N=N.nextZ}for(N=s.prevZ;N&&N.z>=x;){if(N!==s.prev&&N!==s.next&&p(A.x,A.y,J.x,J.y,Q.x,Q.y,N.x,N.y)&&0<=n(N.prev,N,N.next)){s=!1;break a}N=N.prevZ}s=!0}}else s=d(a);if(s)b.push(v.i/c),b.push(a.i/c),b.push(u.i/c),D(a),t=a=u.next;else{if(K)break;a=u;if(a===t){if(B)if(1===B){B=b;t=c;v=a;do u=v.prev,s=v.next.next,!z(u,s)&&(r(u,v,v.next,s)&&w(u,s)&&w(s,u))&&(B.push(u.i/t),B.push(v.i/
t),B.push(s.i/t),D(v),D(v.next),v=a=s),v=v.next;while(v!==a);a=v;m(a,b,c,l,h,G,2)}else{if(2===B)a:{B=a;do{for(t=B.next.next;t!==B.prev;){if(v=B.i!==t.i){v=B;u=t;s=void 0;if(s=v.next.i!==u.i)if(s=void 0,s=v.prev.i!==u.i){s=s=void 0;b:{s=v;do{if(s.i!==v.i&&s.next.i!==v.i&&s.i!==u.i&&s.next.i!==u.i&&r(s,s.next,v,u)){s=!0;break b}s=s.next}while(s!==v);s=!1}if(s=!s)if(s=void 0,s=w(v,u))if(s=void 0,s=w(u,v)){s=v;A=!1;J=(v.x+u.x)/2;u=(v.y+u.y)/2;do s.y>u!==s.next.y>u&&J<(s.next.x-s.x)*(u-s.y)/(s.next.y-
s.y)+s.x&&(A=!A),s=s.next;while(s!==v);s=A}}v=s}if(v){a=y(B,t);B=e(B,B.next);a=e(a,a.next);m(B,b,c,l,h,G);m(a,b,c,l,h,G);break a}t=t.next}B=B.next}while(B!==a)}}else m(e(a),b,c,l,h,G,1);break}}}}}function d(a){var b=a.prev,c=a.next;if(0<=n(b,a,c))return!1;for(var f=a.next.next,d=0;f!==a.prev;){if(p(b.x,b.y,a.x,a.y,c.x,c.y,f.x,f.y)&&0<=n(f.prev,f,f.next))return!1;f=f.next;if(d++>s)return K=!0,!1}return!0}function b(a,b){return a.x-b.x}function c(a,b){var c=b,f=a.x,d=a.y,l=-Infinity,e;do{if(!c)return null;
if(d<=c.y&&d>=c.next.y){var n=c.x+(d-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(n<=f&&n>l){l=n;if(n===f){if(d===c.y)return c;if(d===c.next.y)return c.next}e=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!e)return null;if(f===l)return e.prev;for(var n=e,m=e.x,h=e.y,r=Infinity,z,c=e.next;c!==n;){if(f>=c.x&&c.x>=m&&p(d<h?f:l,d,m,h,d<h?l:f,d,c.x,c.y))if(z=Math.abs(d-c.y)/(f-c.x),(z<r||z===r&&c.x>e.x)&&w(c,a))e=c,r=z;c=c.next}return e}function f(a,b,c,f,d){a=32767*(a-c)/d;b=32767*(b-f)/d;a=(a|a<<8)&16711935;
a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function l(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function p(a,b,c,f,d,l,e,n){return 0<=(d-e)*(b-n)-(a-e)*(l-n)&&0<=(a-e)*(f-n)-(c-e)*(b-n)&&0<=(c-e)*(l-n)-(d-e)*(f-n)}function n(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function z(a,b){return a.x===b.x&&a.y===b.y}function r(a,b,c,f){return z(a,b)&&z(c,f)||z(a,
f)&&z(c,b)?!0:0<n(a,b,c)!==0<n(a,b,f)&&0<n(c,f,a)!==0<n(c,f,b)}function w(a,b){return 0>n(a.prev,a,a.next)?0<=n(a,b,a.next)&&0<=n(a,a.prev,b):0>n(a,b,a.prev)||0>n(a,a.next,b)}function y(a,b){var c=new x(a.i,a.x,a.y),f=new x(b.i,b.x,b.y),d=a.next,l=b.prev;a.next=b;b.prev=a;c.next=d;d.prev=c;f.next=c;c.prev=f;l.next=f;f.prev=l;return f}function u(a,b,c,f){a=new x(a,b,c);f?(a.next=f.next,a.prev=f,f.next.prev=a,f.next=a):(a.prev=a,a.next=a);return a}function D(a){a.next.prev=a.prev;a.prev.next=a.next;
a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function x(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function A(a,b,c,f){for(var d=0,l=c-f;b<c;b+=f)d+=(a[l]-a[b])*(a[b+1]+a[l+1]),l=b;return d}var s,K;h.deviation=function(a,b,c,f){var d=b&&b.length,l=Math.abs(A(a,0,d?b[0]*c:a.length,c));if(d)for(var d=0,e=b.length;d<e;d++)l-=Math.abs(A(a,b[d]*c,d<e-1?b[d+1]*c:a.length,c));for(d=b=0;d<f.length;d+=3){var e=f[d]*c,n=f[d+1]*
c,p=f[d+2]*c;b+=Math.abs((a[e]-a[p])*(a[n+1]-a[e+1])-(a[e]-a[n])*(a[p+1]-a[e+1]))}return 0===l&&0===b?0:Math.abs((b-l)/l)};h.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},f=0,d=0;d<a.length;d++){for(var l=0;l<a[d].length;l++)for(var e=0;e<b;e++)c.vertices.push(a[d][l][e]);0<d&&(f+=a[d-1].length,c.holes.push(f))}return c};return h})},"esri/layers/vectorTiles/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./style/StyleLayer".split(" "),
function(h,a,e,m,d,b){return function(a){function f(b,f,d,e,m){a.call(this,b,f);this.lineVertexBuffer=d;this.lineIndexBuffer=e;this.joinsVertexBuffer=m}e(f,a);Object.defineProperty(f.prototype,"triangleIndexStart",{get:function(){return this.triangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"triangleIndexCount",{get:function(){return this.triangleElementsCount},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"connectorStart",{get:function(){return this.pointConnectorStart},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"connectorCount",{get:function(){return this.pointConnectorCount},enumerable:!0,configurable:!0});f.prototype.assignBufferInfo=function(a){a.triangleElementsStart=this.triangleElementsStart;a.triangleElementsCount=this.triangleElementsCount;a.pointConnectorStart=this.pointConnectorStart;a.pointConnectorCount=this.pointConnectorCount};f.prototype.processFeatures=function(a,c){this.triangleElementsStart=this.lineIndexBuffer.index;this.triangleElementsCount=
0;this.pointConnectorStart=this.joinsVertexBuffer.index;this.pointConnectorCount=0;a&&a.setExtent(this.layerExtent);for(var f=new b.LineLayout(this.layer,this.zoom),d=0,e=this._features;d<e.length;d++){var m=e[d].getGeometry(a);this._processFeature(f,m)}};f.prototype._processFeature=function(a,b){if(b)for(var c=b.length,f=0;f<c;f++)this._processGeometry(b[f],a)};f.prototype._processGeometry=function(a,b){for(var c=a.length;2<=c&&a[c-1].isEqual(a[c-2]);)c--;if(!(2>c)){var f=a[c-1],d=a[0].isEqual(f);
if(!(d&&2===c)){var e=b.cap,m=b.join,h=Math.min(b.miterLimit,4),D=Math.min(b.roundLimit,1.4142),D=2/D*Math.sqrt(1-1/D/D),x,A,s,K,L,R,M,E,F,G=-1,B=-1,t=-1,v=1,H=0;d&&(x=a[c-2],E=f.x-x.x,F=f.y-x.y,L=Math.sqrt(E*E+F*F),E/=L,F/=L);for(var C=this.lineVertexBuffer,T=this.lineIndexBuffer,P=this.joinsVertexBuffer,J=T.index,S=P.index,Q=0;Q<c;Q++)if(void 0!==E&&(R=-E,M=-F),x&&(A=x,K=L),x=a[Q],f=m,A&&(H+=K),s=Q+1<c?a[Q+1]:void 0,d&&!s&&(s=a[1]),!s||!x.isEqual(s)){s?(E=s.x-x.x,F=s.y-x.y,L=Math.sqrt(E*E+F*F),
E/=L,F/=L):(E=-R,F=-M);void 0===R&&(R=-E,M=-F);var N=R+E,U=M+F,t=E*U-F*N,N=N/t,U=U/t,X=Math.sqrt(N*N+U*U);2!==f&&Math.abs(t)<D&&X<h&&(f=2);if(!A&&2===e)B=t=C.add(x.x,x.y,R+v*M,M-R*v,0,0,H),t=C.add(x.x,x.y,R-M*v,M+R*v,0,1,H),G=B,B=t;else if(!s&&2===e)t=C.add(x.x,x.y,E-F*v,F+E*v,0,0,H),0<=G&&(0<=B&&0<=t)&&T.add(G,B,t),G=B,B=t,t=C.add(x.x,x.y,E+F*v,F-E*v,0,1,H),0<=G&&(0<=B&&0<=t)&&T.add(G,B,t),G=B,B=t;else if(2===f)0.01>Math.abs(t)?(N=-F,U=E):X>h&&(N=(R-E)/t,U=(M-F)/t),X>h&&(v=-v),t=C.add(x.x,x.y,N*
v,U*v,0,0,H),0<=G&&(0<=B&&0<=t)&&T.add(G,B,t),G=B,B=t,t=C.add(x.x,x.y,-N*v,-U*v,0,1,H),0<=G&&(0<=B&&0<=t)&&T.add(G,B,t),G=B,B=t,(!A||!s)&&1===e&&P.add(x.x,x.y);else{A&&(t=C.add(x.x,x.y,M*v,-R*v,0,0,H),0<=G&&(0<=B&&0<=t)&&T.add(G,B,t),G=B,B=t,t=C.add(x.x,x.y,-M*v,R*v,0,1,H),0<=G&&(0<=B&&0<=t)&&T.add(G,B,t),G=B,B=t);if((!A||!s)&&1===e)G=C.add(x.x,x.y,M*v,-R*v,0,0,H),P.add(x.x,x.y);v=1;1===f&&(A&&(s&&(!d||0<Q))&&P.add(x.x,x.y),B=G=-1);s&&(t=C.add(x.x,x.y,-F*v,E*v,0,0,H),0<=G&&(0<=B&&0<=t)&&T.add(G,B,
t),G=B,B=t,t=C.add(x.x,x.y,F*v,-E*v,0,1,H),0<=G&&(0<=B&&0<=t)&&T.add(G,B,t),G=B,B=t)}}this.triangleElementsCount+=3*(T.index-J);this.pointConnectorCount+=P.index-S}}};return f}(d)})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(h,a,e,m,d){h=function(){function a(b,f,d){this.type=b;this.id=f.id;this.source=f.source;this.sourceLayer=f["source-layer"];this.minzoom=f.minzoom;this.maxzoom=
f.maxzoom;this.filter=f.filter;this.layout=f.layout;this.paint=f.paint;this.z=d;switch(b){case 0:this._layoutDefinition=e.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=e.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=e.StyleDefinition.fillLayoutDefinition;this._paintDefinition=e.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=e.StyleDefinition.lineLayoutDefinition;this._paintDefinition=e.StyleDefinition.linePaintDefinition;
break;case 3:this._layoutDefinition=e.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=e.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=d.createFilter(this.filter)};a.prototype.hasLayoutProperty=function(a){var b=this._layoutProperties;return b&&b[a]?!0:!1};a.prototype.hasPaintProperty=
function(a){var b=this._paintProperties;return b?void 0!==b[a]:!1};a.prototype.getLayoutValue=function(a,b){var d,e=this._layoutProperties;e&&(e=e[a])&&(d=e.getValue(b));e=this._layoutDefinition[a];void 0===d&&(d=e["default"]);"enum"===e.type&&(d=e.values.indexOf(d));return d};a.prototype.getPaintValue=function(a,b){var d,e=this._paintProperties;e&&(e=e[a])&&(d=e.getValue(b));e=this._paintDefinition[a];void 0===d&&(d=e["default"]);"enum"===e.type&&(d=e.values.indexOf(d));return d};a.prototype._parseLayout=
function(a){var b={},d;for(d in a)b[d]=new m(this._layoutDefinition[d],a[d]);return b};a.prototype._parsePaint=function(a){var b={},d;for(d in a)b[d]=new m(this._paintDefinition[d],a[d]);return b};return a}();a.StyleLayer=h;h=function(){return function(a,c){this.cap=a.getLayoutValue("line-cap",c);this.join=a.getLayoutValue("line-join",c);this.miterLimit=a.getLayoutValue("line-miter-limit",c);this.roundLimit=a.getLayoutValue("line-round-limit",c)}}();a.LineLayout=h;h=function(){return function(a,c,
d){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",c);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",c);this.optional=a.getLayoutValue("icon-optional",c);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",c);this.size=a.getLayoutValue("icon-size",c);this.rotate=a.getLayoutValue("icon-rotate",c);this.padding=a.getLayoutValue("icon-padding",c);this.keepUpright=a.getLayoutValue("icon-keep-upright",c);this.offset=a.getLayoutValue("icon-offset",c);d&&(1===this.rotationAlignment&&
!a.hasLayoutProperty("icon-rotation-alignment"))&&(this.rotationAlignment=0)}}();a.IconLayout=h;h=function(){return function(a,c,d){this.allowOverlap=a.getLayoutValue("text-allow-overlap",c);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",c);this.optional=a.getLayoutValue("text-optional",c);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",c);this.font=a.getLayoutValue("text-font",c);this.maxWidth=a.getLayoutValue("text-max-width",c);this.lineHeight=a.getLayoutValue("text-line-height",
c);this.letterSpacing=a.getLayoutValue("text-letter-spacing",c);this.justify=a.getLayoutValue("text-justify",c);this.anchor=a.getLayoutValue("text-anchor",c);this.maxAngle=a.getLayoutValue("text-max-angle",c);this.size=a.getLayoutValue("text-size",c);this.rotate=a.getLayoutValue("text-rotate",c);this.padding=a.getLayoutValue("text-padding",c);this.keepUpright=a.getLayoutValue("text-keep-upright",c);this.transform=a.getLayoutValue("text-transform",c);this.offset=a.getLayoutValue("text-offset",c);d&&
(1===this.rotationAlignment&&!a.hasLayoutProperty("text-rotation-alignment"))&&(this.rotationAlignment=0)}}();a.TextLayout=h})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(h,a){var e=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.lineLayoutDefinition={visibility:{type:"enum",
values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",
minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean",
"default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},
"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},
"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean",
"default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,
0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,
0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",
minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},
"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};a.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,
"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};return a}();a.StyleDefinition=e})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(h,a,e,m){return function(){function a(b,c){var f;switch(b.type){case "number":f=!0;break;case "color":f=!0;c=a._parseColor(c);break;case "array":f="number"===b.value;break;default:f=!1}this.getValue=f?this._interpolate(c):
this._piecewise(c)}a.prototype._piecewise=function(a){var c=a.stops;return c?function(a){var b=c.length;if(0!==b){for(var d=0,e=0;e<b;e++)if(c[e][0]<=a)d=e;else break;return c[d][1]}}:function(){return a}};a.prototype._interpolate=function(a){var c=a.stops;if(c){var d=a.base||1;return function(a){for(var b,e,h=c.length,r=0;r<h;r++){var w=c[r];if(w[0]<=a)b=w;else{e=w;break}}if(b&&e){r=e[0]-b[0];a-=b[0];a=1===d?a/r:(Math.pow(d,a)-1)/(Math.pow(d,r)-1);if(Array.isArray(b[1])){b=b[1];e=e[1];h=[];for(r=
0;r<b.length;r++)h.push(m.interpolate(b[r],e[r],a));return h}return m.interpolate(b[1],e[1],a)}if(b)return b[1];if(e)return e[1]}}return function(){return a}};a._parseColor=function(b){if(Array.isArray(b))return b;if("string"===typeof b){var c=new e(b);if(c)return[c.r/255,c.g/255,c.b/255,c.a||1]}if(b&&b.stops)return b.stops=b.stops.map(function(b){return[b[0],a._parseColor(b[1])]}),b;throw Error("Incorrect color definition "+b);};return a}()})},"esri/layers/vectorTiles/Color":function(){define(["require",
"exports","esri/Color"],function(h,a,e){return function(){return function(a){return new e(a)}}()})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(h,a,e,m){h=h([a],{declaredClass:"esri.Color"});h.toJsonColor=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)]};h.toDojoColor=function(b){return b&&new a([b[0],b[1],b[2],b[3]/255])};var d,b="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(d=0;d<b.length;d++)h[b[d]]=
a[b[d]];e("extend-esri")&&(m.Color=h);return h})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(h,a,e){function m(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function d(a,b,c){var d,f,e,l,n,p,h,r=this._inherited=this._inherited||{};"string"==typeof a&&(d=a,a=b,b=c);c=0;l=a.callee;(d=d||l.nom)||m("can't deduce a name to call inherited()",this.declaredClass);n=this.constructor._meta;e=n.bases;h=r.p;if(d!=M){if(r.c!==l&&(h=0,p=e[0],n=p._meta,n.hidden[d]!==l)){(f=
n.chains)&&"string"==typeof f[d]&&m("calling chained method with inherited: "+d,this.declaredClass);do if(n=p._meta,f=p.prototype,n&&(f[d]===l&&f.hasOwnProperty(d)||n.hidden[d]===l))break;while(p=e[++h]);h=p?h:-1}if(p=e[++h])if(f=p.prototype,p._meta&&f.hasOwnProperty(d))c=f[d];else{l=s[d];do if(f=p.prototype,(c=f[d])&&(p._meta?f.hasOwnProperty(d):c!==l))break;while(p=e[++h])}c=p&&c||s[d]}else{if(r.c!==l&&(h=0,(n=e[0]._meta)&&n.ctor!==l)){f=n.chains;for((!f||"manual"!==f.constructor)&&m("calling chained constructor with inherited",
this.declaredClass);(p=e[++h])&&!((n=p._meta)&&n.ctor===l););h=p?h:-1}for(;(p=e[++h])&&!(c=(n=p._meta)?n.ctor:p););c=p&&c}r.c=c;r.p=h;if(c)return!0===b?c:c.apply(this,b||a)}function b(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function c(a,b,c){var d=this.getInherited(a,b);if(d)return d.apply(this,c||b||a)}function f(a){for(var b=this.constructor._meta.bases,c=0,d=b.length;c<d;++c)if(b[c]===a)return!0;return this instanceof a}function l(b,c){for(var d in c)d!=M&&
c.hasOwnProperty(d)&&(b[d]=c[d]);if(a("bug-for-in-skips-shadowed"))for(var f=e._extraNames,l=f.length;l;)d=f[--l],d!=M&&c.hasOwnProperty(d)&&(b[d]=c[d])}function p(a){x.safeMixin(this.prototype,a);return this}function n(a,b){a instanceof Array||"function"==typeof a||(b=a,a=void 0);b=b||{};a=a||[];return x([this].concat(a),b)}function z(a,b){return function(){var c=arguments,d=c,f=c[0],e,l;l=a.length;var n;if(!(this instanceof c.callee))return D(c);if(b&&(f&&f.preamble||this.preamble)){n=Array(a.length);
n[0]=c;for(e=0;;){if(f=c[0])(f=f.preamble)&&(c=f.apply(this,c)||c);f=a[e].prototype;(f=f.hasOwnProperty("preamble")&&f.preamble)&&(c=f.apply(this,c)||c);if(++e==l)break;n[e]=c}}for(e=l-1;0<=e;--e)f=a[e],(f=(l=f._meta)?l.ctor:f)&&f.apply(this,n?n[e]:c);(f=this.postscript)&&f.apply(this,d)}}function r(a,b){return function(){var c=arguments,d=c,f=c[0];if(!(this instanceof c.callee))return D(c);b&&(f&&(f=f.preamble)&&(d=f.apply(this,d)||d),(f=this.preamble)&&f.apply(this,d));a&&a.apply(this,c);(f=this.postscript)&&
f.apply(this,c)}}function w(a){return function(){var b=arguments,c=0,d,f;if(!(this instanceof b.callee))return D(b);for(;d=a[c];++c)if(d=(f=d._meta)?f.ctor:d){d.apply(this,b);break}(d=this.postscript)&&d.apply(this,b)}}function y(a,b,c){return function(){var d,f,e=0,l=1;c&&(e=b.length-1,l=-1);for(;d=b[e];e+=l)f=d._meta,(d=(f?f.hidden:d.prototype)[a])&&d.apply(this,arguments)}}function u(a){L.prototype=a.prototype;a=new L;L.prototype=null;return a}function D(a){var b=a.callee,c=u(b);b.apply(c,a);return c}
function x(a,c,h){"string"!=typeof a&&(h=c,c=a,a="");h=h||{};var t,v,D,C,L,P,J,S=1,Q=c;if("[object Array]"==K.call(c)){S=a;D=[];C=[{cls:0,refs:[]}];P={};for(var N=1,U=c.length,X=0,V,ea,W,Y;X<U;++X){(V=c[X])?"[object Function]"!=K.call(V)&&m("mixin #"+X+" is not a callable constructor.",S):m("mixin #"+X+" is unknown. Did you use dojo.require to pull it in?",S);ea=V._meta?V._meta.bases:[V];W=0;for(V=ea.length-1;0<=V;--V)Y=ea[V].prototype,Y.hasOwnProperty("declaredClass")||(Y.declaredClass="uniqName_"+
R++),Y=Y.declaredClass,P.hasOwnProperty(Y)||(P[Y]={count:0,refs:[],cls:ea[V]},++N),Y=P[Y],W&&W!==Y&&(Y.refs.push(W),++W.count),W=Y;++W.count;C[0].refs.push(W)}for(;C.length;){W=C.pop();D.push(W.cls);for(--N;v=W.refs,1==v.length;){W=v[0];if(!W||--W.count){W=0;break}D.push(W.cls);--N}if(W){X=0;for(U=v.length;X<U;++X)W=v[X],--W.count||C.push(W)}}N&&m("can't build consistent linearization",S);V=c[0];D[0]=V?V._meta&&V===D[D.length-V._meta.bases.length]?V._meta.bases.length:1:0;P=D;D=P[0];S=P.length-D;
c=P[S]}else P=[0],c?"[object Function]"==K.call(c)?(D=c._meta,P=P.concat(D?D.bases:c)):m("base class is not a callable constructor.",a):null!==c&&m("unknown base class. Did you use dojo.require to pull it in?",a);if(c)for(v=S-1;;--v){t=u(c);if(!v)break;D=P[v];(D._meta?l:A)(t,D.prototype);C=new Function;C.superclass=c;C.prototype=t;c=t.constructor=C}else t={};x.safeMixin(t,h);D=h.constructor;D!==s.constructor&&(D.nom=M,t.constructor=D);for(v=S-1;v;--v)(D=P[v]._meta)&&D.chains&&(J=A(J||{},D.chains));
t["-chains-"]&&(J=A(J||{},t["-chains-"]));D=!J||!J.hasOwnProperty(M);P[0]=C=J&&"manual"===J.constructor?w(P):1==P.length?r(h.constructor,D):z(P,D);C._meta={bases:P,hidden:h,chains:J,parents:Q,ctor:h.constructor};C.superclass=c&&c.prototype;C.extend=p;C.createSubclass=n;C.prototype=t;t.constructor=C;t.getInherited=b;t.isInstanceOf=f;t.inherited=E;t.__inherited=d;a&&(t.declaredClass=a,e.setObject(a,C));if(J)for(L in J)t[L]&&("string"==typeof J[L]&&L!=M)&&(D=t[L]=y(L,P,"after"===J[L]),D.nom=L);return C}
var A=e.mixin,s=Object.prototype,K=s.toString,L,R=0,M="constructor";L=a("csp-restrictions")?function(){}:new Function;var E=h.config.isDebug?c:d;h.safeMixin=x.safeMixin=function(b,c){var d,f;for(d in c)if(f=c[d],(f!==s[d]||!(d in s))&&d!=M)"[object Function]"==K.call(f)&&(f.nom=d),b[d]=f;if(a("bug-for-in-skips-shadowed")&&c)for(var l=e._extraNames,n=l.length;n;)if(d=l[--n],f=c[d],(f!==s[d]||!(d in s))&&d!=M)"[object Function]"==K.call(f)&&(f.nom=d),b[d]=f;return b};return h.declare=x})},"dojo/_base/Color":function(){define(["./kernel",
"./lang","./array","./config"],function(h,a,e,m){var d=h.Color=function(a){a&&this.setColor(a)};d.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:m.transparentColor||[0,0,0,0]};a.extend(d,{r:255,g:255,b:255,a:1,_set:function(a,c,d,e){this.r=a;this.g=c;this.b=
d;this.a=e},setColor:function(b){a.isString(b)?d.fromString(b,this):a.isArray(b)?d.fromArray(b,this):(this._set(b.r,b.g,b.b,b.a),b instanceof d||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+e.map(["r","g","b"],function(a){a=this[a].toString(16);return 2>a.length?"0"+a:a},this).join("")},toCss:function(a){var c=this.r+", "+this.g+", "+this.b;return(a?"rgba("+
c+", "+this.a:"rgb("+c)+")"},toString:function(){return this.toCss(!0)}});d.blendColors=h.blendColors=function(a,c,f,l){var p=l||new d;e.forEach(["r","g","b","a"],function(d){p[d]=a[d]+(c[d]-a[d])*f;"a"!=d&&(p[d]=Math.round(p[d]))});return p.sanitize()};d.fromRgb=h.colorFromRgb=function(a,c){var f=a.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return f&&d.fromArray(f[1].split(/\s*,\s*/),c)};d.fromHex=h.colorFromHex=function(a,c){var f=c||new d,l=4==a.length?4:8,p=(1<<l)-1;a=Number("0x"+a.substr(1));
if(isNaN(a))return null;e.forEach(["b","g","r"],function(c){var d=a&p;a>>=l;f[c]=4==l?17*d:d});f.a=1;return f};d.fromArray=h.colorFromArray=function(a,c){var f=c||new d;f._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));isNaN(f.a)&&(f.a=1);return f.sanitize()};d.fromString=h.colorFromString=function(a,c){var f=d.named[a];return f&&d.fromArray(f,c)||d.fromRgb(a,c)||d.fromHex(a,c)};return d})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(h,a,
e){var m=function(){return this}(),d=m.location,b=d.pathname,c=d.protocol,d={version:"3.18",_appBaseUrl:c+"//"+d.host+b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]))};a.noGlobals||(m.esri=d);h.isAsync||e.add("extend-esri",1);(d.dijit=d.dijit||{})._arcgisUrl=("http:"===c||"https:"===c?c:"http:")+"//www.arcgis.com/sharing/rest";return d})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(h,a){return function(){function a(h,d,
b){this._op=h;"$type"===d?(this._val=a._types.indexOf(b),this._op+=11):(this._key=d,this._val=b)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]>=this._val;case 6:return a.values[this._key]<=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===
this._val.indexOf(a.values[this._key]);case 9:for(var d=0,b=this._val;d<b.length;d++){var c=b[d];if(c.filter(a))return!0}return!1;case 10:d=0;for(b=this._val;d<b.length;d++)if(c=b[d],!c.filter(a))return!1;return!0;case 11:d=0;for(b=this._val;d<b.length;d++)if(c=b[d],c.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==
this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(h){if(!h)return new a(0,void 0,!0);var d=h[0];if(1>=h.length)return new a(0,void 0,"any"!==d);switch(d){case "\x3d\x3d":return new a(1,h[1],h[2]);case "!\x3d":return new a(2,h[1],h[2]);case "\x3e":return new a(4,h[1],h[2]);case "\x3c":return new a(3,h[1],h[2]);case "\x3e\x3d":return new a(6,h[1],h[2]);case "\x3c\x3d":return new a(5,h[1],h[2]);case "in":return new a(7,h[1],h.slice(2));case "!in":return new a(8,
h[1],h.slice(2));case "any":return new a(9,void 0,h.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,h.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,h.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+d);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),
function(h,a,e,m,d,b,c,f,l,p,n){var z=function(){return function(){}}(),r=function(){return function(a,b,c,d){this.line=b;this.shaping=a;this.iconMosaicItem=c;this.anchor=d}}();return function(a){function d(b,c,f,l,e,n,h,p){a.call(this,b,c);this._markerRatio=1;this._markerVertexBuffer=f;this._markerIndexBuffer=l;this._textVertexBuffer=e;this._textIndexBuffer=n;this._placementEngine=h;this._workerTileHandler=p}e(d,a);Object.defineProperty(d.prototype,"markerIndexStart",{get:function(){return this._markerTriangleElementsStart},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"markerIndexCount",{get:function(){return this._markerTriangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"textIndexStart",{get:function(){return this._textTriangleElementsStart},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"textIndexCount",{get:function(){return this._textTriangleElementsNum},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"sdfMarker",{get:function(){return!1},
enumerable:!0,configurable:!0});d.prototype.copy=function(a,b,c,f,l){l=new d(this.layer,this.zoom,a,b,c,f,l,this._workerTileHandler);l.layerIndex=this.layerIndex;l.layerExtent=this.layerExtent;l._markerVertexStart=a.index;l._markerTriangleElementsStart=b.index;l._textVertexStart=c.index;l._textTriangleElementsStart=f.index;l._markerTriangleElementsNum=0;l._textTriangleElementsNum=0;l._symbolInstances=this._symbolInstances;l._glyphItems=this._glyphItems;l._textLayout=this._textLayout;l._markerLayout=
this._markerLayout;l._isLinePlacement=this._isLinePlacement;l._avoidEdges=this._avoidEdges;return l};d.prototype.getResources=function(a,b,c){var f=this.layer,l=this.zoom;a&&a.setExtent(this.layerExtent);for(var e=f.getLayoutValue("icon-image",l),n=f.getLayoutValue("text-field",l),h=f.getLayoutValue("text-font",l),f=f.getLayoutValue("text-transform",l),l=[],p=0,r=this._features;p<r.length;p++){var m=r[p],w=m.getGeometry(a);if(w&&0!==w.length){var B=void 0;e&&(B=this._replaceKeys(e,m.values))&&b.add(B);
var t=void 0,v=!1;if(n){t=this._replaceKeys(n,m.values);switch(f){case 2:t=t.toLowerCase();break;case 1:t=t.toUpperCase()}d._bidiEngine.hasBidiChar(t)&&(v=void 0,v="rtl"===d._bidiEngine.checkContextual(t)?"IDNNN":"ICNNN",t=d._bidiEngine.bidiTransform(t,v,"VLYSN"),v=!0);m=t.length;if(0<m){var H=c[h];H||(H=c[h]=new Set);for(var C=0;C<m;C++){var T=t.charCodeAt(C);H.add(T)}}}if(B||t)m=new z,m.sprite=B,m.label=t,m.rtl=v,m.geometry=w,l.push(m)}}this._symbolFeatures=l};d.prototype.processFeatures=function(a,
b){a&&a.setExtent(this.layerExtent);var l=this.layer,e=this.zoom,n=this._isLinePlacement=1===l.getLayoutValue("symbol-placement",e),h=this._avoidEdges=l.getLayoutValue("symbol-avoid-edges",e)&&!n,m=l.getLayoutValue("symbol-spacing",e),z=l.getLayoutValue("icon-image",e),w=l.getLayoutValue("text-field",e),E=this._workerTileHandler,F;z&&(this._markerLayout=new c.IconLayout(l,e,n),F=E.getSpriteItems());var G,B;if(w){var t=this._textLayout=new c.TextLayout(l,e,n);G=void 0;t.font&&t.font.length&&(G=t.font[0]);
B=0.5;switch(t.anchor){case 5:case 1:case 7:B=0;break;case 6:case 2:case 8:B=1}l=0.5;switch(t.anchor){case 5:case 3:case 6:l=0;break;case 7:case 4:case 8:l=1}e=0.5;switch(t.justify){case 0:e=0;break;case 2:e=1}var z=24*t.letterSpacing,w=n?0:24*t.maxWidth,v=24*t.lineHeight,t=[24*t.offset[0],24*t.offset[1]];G=E.getGlyphItems(G);B=new p(G,w,v,z,t,B,l,e)}this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;
this._textTriangleElementsStart=this._textIndexBuffer.index;this._textTriangleElementsNum=this._markerTriangleElementsNum=0;this._symbolInstances=E=[];this._glyphItems=G;e=this._textLayout;l=1;e&&e.size&&(l=e.size/24);e=0;for(z=this._symbolFeatures;e<z.length;e++){var H=z[e],w=void 0;H.sprite&&(w=F[H.sprite]);var v=void 0,C=H.label,t=0;if(C&&(v=B.getShaping(C,H.rtl))&&0<v.length){for(var t=1E30,C=-1E30,T=0,P=v;T<P.length;T++)var J=P[T],t=Math.min(t,J.x),C=Math.max(C,J.x);t=(C-t+48)*l}C=0;for(H=H.geometry;C<
H.length;C++){T=H[C];J=void 0;J=n?d._findAnchors(T,m,8,t):[new f.Anchor(T[0].x,T[0].y)];for(P=0;P<J.length;P++){var S=J[P],Q=0>S.x||4096<S.x||0>S.y||4096<S.y;(!h||!Q)&&E.push(new r(v,T,w,S))}}}for(n=0;n<E.length;n++)this._processFeature(E[n],G,h)};d.prototype.updateSymbols=function(){this._markerVertexStart=this._markerVertexBuffer.index;this._markerTriangleElementsStart=this._markerIndexBuffer.index;this._textVertexStart=this._textVertexBuffer.index;this._textTriangleElementsStart=this._textIndexBuffer.index;
this._textTriangleElementsNum=this._markerTriangleElementsNum=0;for(var a=this._glyphItems,b=this._avoidEdges,c=0,d=this._symbolInstances;c<d.length;c++)this._processFeature(d[c],a,b)};d.prototype._replaceKeys=function(a,b){return a.replace(/{([^{}]+)}/g,function(a,c){return c in b?b[c]:""})};d.prototype._processFeature=function(a,c,d){var f=a.line,e=a.iconMosaicItem,n=a.shaping,h=a.anchor,p=(a=this._markerLayout)&&!!e,r=!0,m=1;p&&(m=8*(a.size/(1/this._markerRatio)),r=a.optional||!e);var z=this._textLayout,
w=z&&n&&0<n.length,y;y=1;var t=!0;w&&(y=z.size/24,y*=8,t=z.optional||!n||0===n.length);var v=new b.Point(0,-17),H;if(p){H=this._placementEngine.getIconPlacement(h,e,m,f,a,d);if(H.footprint.minzoom===l.C_INFINITY&&!r)return;h.minzoom>H.footprint.minzoom&&(H.footprint.minzoom=h.minzoom)}var C;if(w&&(C=this._placementEngine.getTextPlacement(h,v,n,c,y,f,z,d))){if(C.footprint.minzoom===l.C_INFINITY&&!t)return;h.minzoom>C.footprint.minzoom&&(C.footprint.minzoom=h.minzoom)}if(!t&&!r||!r&&C&&C.footprint.minzoom!==
l.C_INFINITY||!t&&H&&H.footprint.minzoom!==l.C_INFINITY)c=Math.max(H.footprint.minzoom,C.footprint.minzoom),H.footprint.minzoom=c,C.footprint.minzoom=c;C&&C.footprint.minzoom!==l.C_INFINITY&&(z.ignorePlacement||this._placementEngine.add(C),this._addPlacedSymbols(C.shapes,C.footprint.minzoom,this.zoom,!1));H&&H.footprint.minzoom!==l.C_INFINITY&&(a.ignorePlacement||this._placementEngine.add(H),this._addPlacedSymbols(H.shapes,H.footprint.minzoom,this.zoom,!0))};d.prototype._addPlacedSymbols=function(a,
b,c,d){b=l.log2(b)+c;for(var f=0;f<a.length;f++){var e=a[f],n=Math.max(c+l.log2(e.minzoom),b),h=Math.min(c+l.log2(e.maxzoom),25);if(!(h<=n)){var p=e.tl,r=e.tr,m=e.bl,z=e.br,w=e.mosaicRect,y=-e.labelAngle,e=e.anchor,v=d?this._markerVertexBuffer:this._textVertexBuffer,H=d?this._markerIndexBuffer:this._textIndexBuffer,C=v.index,T=w.x,P=w.y,J=T+w.width,w=P+w.height;v.add(e.x,e.y,p.x,p.y,T,P,y,n,h,b);v.add(e.x,e.y,r.x,r.y,J,P,y,n,h,b);v.add(e.x,e.y,m.x,m.y,T,w,y,n,h,b);v.add(e.x,e.y,z.x,z.y,J,w,y,n,h,
b);H.add(C+0,C+1,C+2);H.add(C+1,C+2,C+3);d?this._markerTriangleElementsNum+=6:this._textTriangleElementsNum+=6}}};d._findAnchors=function(a,c,d,e){e*=d;c=c*d+e;var n=0,h=a.length-1;for(d=0;d<h;d++)n+=b.Point.distance(a[d],a[d+1]);d=e||c;d*=0.5;if(n<=d)return[];e=d/n;c=n/Math.max(Math.round(n/c),1);var n=0,h=-c/2,p=[],r=a.length-1;for(d=0;d<r;d++){for(var m=a[d],z=a[d+1],w=z.x-m.x,y=z.y-m.y,B=Math.sqrt(w*w+y*y),t=void 0;h+c<n+B;){var h=h+c,v=(h-n)/B,H=l.interpolate(m.x,z.x,v),v=l.interpolate(m.y,z.y,
v);void 0===t&&(t=Math.atan2(y,w));p.push(new f.Anchor(H,v,t,d,e))}n+=B}return p};d._bidiEngine=new n;return d}(d)})},"esri/layers/vectorTiles/views/vectorTiles/Placement":function(){define(["require","exports","./Geometry","./GeometryUtils","./Conflict"],function(h,a,e,m,d){h=function(){return function(a,b,c,d,f){void 0===c&&(c=0);void 0===d&&(d=-1);void 0===f&&(f=l);this.x=a;this.y=b;this.angle=c;this.segment=d;this.minzoom=f}}();a.Anchor=h;h=function(){return function(a,b,c){this.glyph=a;this.x=
b;this.y=c}}();a.ShapedGlyph=h;var b=function(){return function(a,b,c,d,f,e){void 0===d&&(d=!1);void 0===f&&(f=l);void 0===e&&(e=m.C_INFINITY);this.anchor=a;this.labelAngle=b;this.glyphAngle=c;this.upsideDown=d;this.minzoom=f;this.maxzoom=e}}(),c=function(){return function(a,b,c,d,f,e,l,h,m){this.tl=a;this.tr=b;this.bl=c;this.br=d;this.mosaicRect=f;this.labelAngle=e;this.anchor=l;this.minzoom=h;this.maxzoom=m}}();a.PlacedSymbol=c;var f=function(){return function(a,b){this.footprint=a;this.shapes=
b}}();a.Placement=f;var l=0.5;h=function(){function a(b){this.mapAngle=b;this._conflictEngine=new d.ConflictEngine(b)}a.prototype.getIconPlacement=function(a,b,h,p,y,u){var D=b.width/b.pixelRatio,x=b.height/b.pixelRatio;p=y.offset[0]-D/2;var A=y.offset[1]-x/2,D=p+D,x=A+x,s=b.rect,K=new e.Point(p,A),L=new e.Point(p+s.width/b.pixelRatio,A+s.height/b.pixelRatio),R=new e.Point(p,L.y),M=new e.Point(L.x,A),E=y.rotate*m.C_DEG_TO_RAD;b=1===y.rotationAlignment;0<=a.segment&&!b&&(E+=a.angle);if(0!==E){var F=
Math.cos(E),G=Math.sin(E);K.rotate(F,G);L.rotate(F,G);R.rotate(F,G);M.rotate(F,G)}F=8*y.padding;G=new e.Point(a.x,a.y);a=new d.Footprint(this.mapAngle,F,b);a.addBox(G,new d.Box(p,A,D,x),h,E,l,m.C_INFINITY);h=new c(K,M,R,L,s,0,G,l,m.C_INFINITY);h=new f(a,[h]);p=l;y.allowOverlap||(p=this._conflictEngine.getMinZoom(h.footprint,p,u,b));a.minzoom=p;return h};a.prototype.getTextPlacement=function(a,h,p,w,y,u,D,x){for(var A=new e.Point(a.x,a.y),s=Math.cos(D.maxAngle*m.C_DEG_TO_RAD),K=D.rotate*m.C_DEG_TO_RAD,
L=0===D.rotationAlignment,R=D.keepUpright,M=l,E=!L,F=E?0:a.angle,G=0<=a.segment&&L,B=new d.Footprint(this.mapAngle,8*D.padding,E),t=[],v=!G,H=Number.POSITIVE_INFINITY,C=Number.NEGATIVE_INFINITY,T=H,P=C,J=G?R:L&&R,S,Q=0;Q<p.length;Q++){var N=p[Q],U=w[N.glyph];if(U){var X=U.rect;if(X&&!(0>=X.width||0>=X.height)){var V=U.metrics;v&&(S&&S!==N.y&&(B.addBox(A,new d.Box(H,T,C,P),y,K,l,m.C_INFINITY),H=Number.POSITIVE_INFINITY,C=Number.NEGATIVE_INFINITY,T=H,P=C),S=N.y);var ea=[];if(G){if(U=(h.x+N.x+V.left-
3+0.5*U.metrics.width)*y,M=this._placeGlyph(a,M,U,u,a.segment,1,s,ea),R&&(M=this._placeGlyph(a,M,U,u,a.segment,-1,s,ea)),2<=M)break}else ea.push(new b(A,F,F)),L&&R&&ea.push(new b(A,F+m.C_PI,F+m.C_PI,!0));for(var U=N.x+h.x+V.left,N=N.y+h.y-V.top,W=U+V.width,V=N+V.height,Y=new e.Point(U-3,N-3),ba=new e.Point(Y.x+X.width,Y.y+X.height),fa=new e.Point(Y.x,ba.y),$=new e.Point(ba.x,Y.y),ga=0;ga<ea.length;ga++){var da=ea[ga],ha=Y.clone(),ia=fa.clone(),ja=$.clone(),ka=ba.clone(),la=N,aa=V;if(da.upsideDown){var I=
-48*D.offset[1],la=la+I,aa=aa+I;ha.y+=I;ia.y+=I;ja.y+=I;ka.y+=I}I=da.glyphAngle+K;if(0!==I){var Z=Math.cos(I),k=Math.sin(I);ha.rotate(Z,k);ka.rotate(Z,k);ia.rotate(Z,k);ja.rotate(Z,k)}t.push(new c(ha,ja,ia,ka,X,da.labelAngle,da.anchor,da.minzoom,da.maxzoom));if(!J||this._legible(da.labelAngle))v?(U<H&&(H=U),la<T&&(T=la),W>C&&(C=W),aa>P&&(P=aa)):2>da.minzoom&&B.addBox(da.anchor,new d.Box(U,la,W,aa),y,I,da.minzoom,da.maxzoom)}}}}if(2<=M)return null;v&&B.addBox(A,new d.Box(H,T,C,P),y,K,l,m.C_INFINITY);
a=new f(B,t);D.allowOverlap||(M=this._conflictEngine.getMinZoom(a.footprint,M,x,E));B.minzoom=M;return a};a.prototype.add=function(a){this._conflictEngine.add(a.footprint)};a.prototype._legible=function(a){a=m.radToByte(a);return 65>a||193<=a};a.prototype._placeGlyph=function(a,c,d,f,l,h,p,x){var A=0>h?m.positiveMod(a.angle+m.C_PI,m.C_2PI):a.angle,s=this._legible(A),K=0;0>d&&(h*=-1,d*=-1,K=m.C_PI);0<h&&++l;a=new e.Point(a.x,a.y);var L=f[l],R=m.C_INFINITY,M,E;if(f.length<=l)return R;for(;;){var F=
L.x-a.x,G=L.y-a.y,B=Math.sqrt(F*F+G*G),t=Math.max(d/B,c),F=F/B,G=G/B,v=m.positiveMod(Math.atan2(G,F)+K,m.C_2PI);if(void 0!==M&&F*M+G*E<p)return R;M=F;E=G;x.push(new b(a,A,v,s,t,R));if(t<=c)return t;a=L.clone();do{l+=h;if(f.length<=l||0>l)return t;L=f[l]}while(a.isEqual(L));R=L.x-a.x;F=L.y-a.y;G=Math.sqrt(R*R+F*F);R*=B/G;F*=B/G;a.x-=R;a.y-=F;R=t}};return a}();a.PlacementEngine=h})},"esri/layers/vectorTiles/views/vectorTiles/Conflict":function(){define(["require","exports","./Geometry","./GeometryUtils"],
function(h,a,e,m){h=function(){function a(b,c,d,e){this.left=b;this.top=c;this.right=d;this.bottom=e}a.prototype.clone=function(){return new a(this.left,this.top,this.right,this.bottom)};a.prototype.move=function(a,b){this.left+=a;this.top+=b;this.right+=a;this.bottom+=b};a.prototype.rotate=function(a,b){var c=this.left,d=this.right,e=this.top,h=this.bottom,m=c*a-e*b,y=c*b+e*a,u=d*a-e*b,e=d*b+e*a,D=c*a-h*b,c=c*b+h*a,x=d*a-h*b,d=d*b+h*a;this.left=Math.min(m,u,D,x);this.top=Math.min(y,e,c,d);this.right=
Math.max(m,u,D,x);this.bottom=Math.max(y,e,c,d)};a.overlaps=function(a,b){return a.right>b.left&&a.left<b.right&&a.bottom>b.top&&a.top<b.bottom};return a}();a.Box=h;var d=function(){function a(b,c,d,e){this.anchor=b;this.corners=c;this.minzoom=d;this.maxzoom=e}a.prototype.left=function(){return this.corners[0].x};a.prototype.right=function(){return this.corners[2].x};a.prototype.top=function(){return this.corners[1].y};a.prototype.bottom=function(){return this.corners[3].y};return a}();a.Obstacle=
d;h=function(){function a(c,d,e){this.obstacles=[];this.mapAngle=c;this.padding=d;this.isScreenAligned=e;this.minzoom=b}a.prototype.addBox=function(a,b,c,n,h,m){var w=b.left*c-this.padding,y=b.top*c-this.padding,u=b.right*c+this.padding;b=b.bottom*c+this.padding;w=[new e.Point(w,y),new e.Point(u,y),new e.Point(u,b),new e.Point(w,b)];0!==this.mapAngle&&(y=Math.cos(this.mapAngle),u=Math.sin(this.mapAngle),a=a.clone(),a.rotate(y,u));this.isScreenAligned||(n+=this.mapAngle);if(0!==n){y=Math.cos(n);u=
Math.sin(n);w[0].rotate(y,u);w[1].rotate(y,u);w[2].rotate(y,u);w[3].rotate(y,u);n=0;for(y=1;4>y;y++)w[y].x<w[n].x?n=y:w[y].x===w[n].x&&w[y].y<w[n].y&&(n=y);if(n){u=[];for(y=0;4>y;y++)u.push(w[(y+n)%4]);w=u}}this.obstacles.push(new d(a,w,h,m))};return a}();a.Footprint=h;var b=0.5;h=function(){function a(b){this._grid=[];this._angle=b;this._c=Math.cos(b);this._s=Math.sin(b)}a.prototype.add=function(b){var d=this._grid,e=0;for(b=b.obstacles;e<b.length;e++)for(var n=b[e],h=n.anchor,m=a._gridClamp(Math.min(n.left()+
h.x,h.x)),w=a._gridClamp(Math.max(n.right()+h.x,h.x)),y=a._gridClamp(Math.min(n.top()+h.y,h.y)),h=a._gridClamp(Math.max(n.bottom()+h.y,h.y));y<=h;y++)for(var u=m;u<=w;u++){var D=d[16*y+u];D||(D=d[16*y+u]=[]);D.push(n)}};a.prototype.getMinZoom=function(b,d,e,n){if(0===b.obstacles.length)return m.C_INFINITY;e=this._grid;n=0;for(b=b.obstacles;n<b.length;n++)for(var h=b[n],r=h.anchor,w=a._gridClamp(Math.min(h.left()+r.x,r.x)),y=a._gridClamp(Math.max(h.right()+r.x,r.x)),u=a._gridClamp(Math.min(h.top()+
r.y,r.y)),r=a._gridClamp(Math.max(h.bottom()+r.y,r.y));u<=r;u++)for(var D=w;D<=y;D++){var x=e[16*u+D];if(x)for(var A=0;A<x.length;A++){var s=x[A];if(!(h.minzoom>=s.maxzoom||s.minzoom>=h.maxzoom))if(d=a._calcPlacementZoom(h,s,d),2<=d)return m.C_INFINITY}}return 2>d?d:m.C_INFINITY};a._gridClamp=function(a){return m.clamp(a>>9,-7,8)};a._calcPlacementZoom=function(b,d,e){var n=d.anchor.x-b.anchor.x;if(0===n&&(b.right()<d.left()||d.right()<b.left()))return e;var h=d.anchor.y-b.anchor.y;if(0===h&&(b.bottom()<
d.top()||d.bottom()<b.top()))return e;var r=m.C_INFINITY;if(0!==n){var w=(0<n?b.right()-d.left():b.left()-d.right())/n;w<r&&(r=w);n=0<n?a._calcExtZoomX(b,d,w):a._calcExtZoomX(d,b,w);n<r&&(r=n)}0!==h&&(n=(0<h?b.bottom()-d.top():b.top()-d.bottom())/h,n<r&&(r=n),h=0<h?a._calcExtZoomY(b,d,n):a._calcExtZoomY(d,b,n),h<r&&(r=h));if(r<b.minzoom||r<d.minzoom)return e;r=Math.min(r,b.maxzoom,d.maxzoom);r<e&&(r=e);return r};a._calcExtZoomX=function(a,b,d){var c,e,h;if(a.anchor.y+a.corners[2].y/d<b.anchor.y+b.corners[0].y/
d){c=a.corners[2].x-a.corners[3].x;h=a.corners[2].y-a.corners[3].y;var m=b.corners[1].x-b.corners[0].x;e=b.corners[1].y-b.corners[0].y;0<=c*e-h*m?a.anchor.y+a.corners[3].y/d<b.anchor.y+b.corners[0].y/d?(d=a.corners[3],c=b.corners[0],e=b.corners[1],h=1):(d=b.corners[0],c=a.corners[3],e=a.corners[2],h=-1):a.anchor.y+a.corners[2].y/d>b.anchor.y+b.corners[1].y/d?(d=a.corners[2],c=b.corners[0],e=b.corners[1],h=1):(d=b.corners[1],c=a.corners[3],e=a.corners[2],h=-1)}else c=a.corners[2].x-a.corners[1].x,
h=a.corners[2].y-a.corners[1].y,m=b.corners[3].x-b.corners[0].x,e=b.corners[3].y-b.corners[0].y,0>c*e-h*m?a.anchor.y+a.corners[1].y/d>b.anchor.y+b.corners[0].y/d?(d=a.corners[1],c=b.corners[0],e=b.corners[3],h=1):(d=b.corners[0],c=a.corners[1],e=a.corners[2],h=-1):a.anchor.y+a.corners[2].y/d<b.anchor.y+b.corners[3].y/d?(d=a.corners[2],c=b.corners[0],e=b.corners[3],h=1):(d=b.corners[3],c=a.corners[1],e=a.corners[2],h=-1);m=e.x-c.x;e=e.y-c.y;return h*((d.y-c.y)*m-(d.x-c.x)*e)/((a.anchor.x-b.anchor.x)*
e-(a.anchor.y-b.anchor.y)*m)};a._calcExtZoomY=function(a,b,d){var c,e,h;if(a.anchor.x+a.corners[3].x/d<b.anchor.x+b.corners[1].x/d){c=a.corners[3].x-a.corners[2].x;h=a.corners[3].y-a.corners[2].y;var m=b.corners[0].x-b.corners[1].x;e=b.corners[0].y-b.corners[1].y;0>c*e-h*m?a.anchor.x+a.corners[2].x/d<b.anchor.x+b.corners[1].x/d?(d=a.corners[2],c=b.corners[1],e=b.corners[0],h=1):(d=b.corners[1],c=a.corners[2],e=a.corners[3],h=-1):a.anchor.x+a.corners[3].x/d>b.anchor.x+b.corners[0].x/d?(d=a.corners[3],
c=b.corners[1],e=b.corners[0],h=1):(d=b.corners[0],c=a.corners[2],e=a.corners[3],h=-1)}else c=a.corners[3].x-a.corners[0].x,h=a.corners[3].y-a.corners[0].y,m=b.corners[2].x-b.corners[1].x,e=b.corners[2].y-b.corners[1].y,0<c*e-h*m?a.anchor.x+a.corners[0].x/d>b.anchor.x+b.corners[1].x/d?(d=a.corners[0],c=b.corners[1],e=b.corners[2],h=1):(d=b.corners[1],c=a.corners[0],e=a.corners[3],h=-1):a.anchor.x+a.corners[3].x/d<b.anchor.x+b.corners[2].x/d?(d=a.corners[3],c=b.corners[1],e=b.corners[2],h=1):(d=b.corners[2],
c=a.corners[0],e=a.corners[3],h=-1);m=e.x-c.x;e=e.y-c.y;return h*((d.y-c.y)*m-(d.x-c.x)*e)/((a.anchor.x-b.anchor.x)*e-(a.anchor.y-b.anchor.y)*m)};return a}();a.ConflictEngine=h})},"esri/layers/vectorTiles/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(h,a,e){return function(){function a(d,b,c,e,l,h,n,m){this._glyphItems=d;this._maxWidth=b;this._lineHeight=c;this._letterSpacing=e;this._offset=l;this._hAnchor=h;this._vAnchor=n;this._justify=m}a.prototype.getShaping=
function(a,b){for(var c=this._glyphItems,f=this._letterSpacing,l=this._offset[0],h=this._offset[1],n=[],m=0,r=a.length;m<r;m++){var w=a.charCodeAt(m),y=c[w];y&&(n.push(new e.ShapedGlyph(w,l,h)),l+=y.metrics.advance+f)}if(0<n.length){y=this._maxWidth;c=this._lineHeight;l=this._justify;r=n.length;w=h=f=0;if(0!==y)for(var u=0,D=0,m=0;m<r;m++){var x=n[m];x.x-=D;x.y=b?x.y-c*f:x.y+c*f;if(x.x>y&&0<u){for(var A=n[u+1].x,w=Math.max(A,w),s=u+1;s<=m;s++)n[s].y=b?n[s].y-c:n[s].y+c,n[s].x-=A;l&&this._applyJustification(n,
h,u-1);h=u+1;u=0;D+=A;f++}32===x.glyph&&(u=m)}m=n[r-1];w=Math.max(w,m.x+this._glyphItems[m.glyph].metrics.advance);l&&this._applyJustification(n,h,r-1);r=(l-this._hAnchor)*w;m=(-this._vAnchor*(f+1)+0.5)*c;b&&f&&(m+=f*c);for(c=0;c<n.length;c++)f=n[c],f.x+=r,f.y+=m}return n};a.prototype._applyJustification=function(a,b,c){for(var e=a[c],e=(e.x+this._glyphItems[e.glyph].metrics.advance)*this._justify;b<=c;b++)a[b].x-=e};return a}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare",
"dojo/Stateful"],function(h,a,e){function m(a,c,e,k,g){var l=a;void 0===c&&(c=g.defInFormat);void 0===e&&(e=g.defOutFormat);void 0===k&&(k=g.defSwap);if(c!==e){var h,n=c.substring(0,1);h=c.substring(1,4);var p=e.substring(0,1),r=e.substring(1,4);"C"===h.charAt(0)&&(h=d(l),h="ltr"===h||"rtl"===h?h.toUpperCase():"L"===c.charAt(2)?"LTR":"RTL",c=n+h);"C"===r.charAt(0)&&(h=d(l),"rtl"===h?r="RTL":"ltr"===h?(l=l.split(""),l.reverse(),h=d(l.join("")),r=h.toUpperCase()):r="L"===e.charAt(2)?"LTR":"RTL",e=p+
r)}if(c===e)return a;p=c.substring(0,1);l=c.substring(1,4);n=e.substring(0,1);r=e.substring(1,4);g.inFormat=c;g.outFormat=e;g.swap=k;if("L"===p&&"VLTR"===e){if("LTR"===l)return g.dir=M,b(a,g);if("RTL"===l)return g.dir=E,b(a,g)}if("V"===p&&"V"===n)return g.dir="RTL"===l?E:M,f(a,g);if("L"===p&&"VRTL"===e)return g.dir="LTR"===l?M:E,a=b(a,g),f(a);if("VLTR"===c&&"LLTR"===e)return g.dir=M,b(a,g);if("V"===p&&"L"===n&&l!==r)return a=f(a),"RTL"===l?m(a,"LLTR","VLTR",k,g):m(a,"LRTL","VRTL",k,g);if("VRTL"===
c&&"LRTL"===e)return m(a,"LRTL","VRTL",k,g);if("L"===p&&"L"===n)return c=g.swap,g.swap=c.substr(0,1)+"N","RTL"===l?(g.dir=E,a=b(a,g),g.swap="N"+c.substr(1,2),g.dir=M,a=b(a,g)):(g.dir=M,a=b(a,g),g.swap="N"+c.substr(1,2),a=m(a,"VLTR","LRTL",g.swap,g)),a}function d(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?"ltr":"rtl":""}function b(a,b){var d=a.split(""),e=[];c(d,e,b);if(!(0===b.hiLevel||b.swap.substr(0,1)===b.swap.substr(1,2)))for(var f=
0;f<d.length;f++)if(1===e[f]){var g=d,k=f,l;b:{l=d[f];for(var h=void 0,m=0,p=B.length-1;m<=p;)if(h=Math.floor((m+p)/2),l<B[h][0])p=h-1;else if(l>B[h][0])m=h+1;else{l=B[h][1];break b}}g[k]=l}n(2,d,e,b);n(1,d,e,b);s=e;return d.join("")}function c(a,b,d){var c=a.length,e=d.dir?ea:V,f=null,g=null,k=null,f=0,g=g=null,l=-1,h=g=null,n=[],m=[];d.hiLevel=d.dir;d.lastArabic=!1;d.hasUbatAl=!1;d.hasUbatB=!1;d.hasUbatS=!1;for(g=0;g<c;g++){var h=n,k=g,p=a[g].charCodeAt(0),r=oa[p>>8];h[k]=r<aa?r:pa[r-aa][p&255]}for(h=
0;h<c;h++){m[h]=g=z(a,n,m,h,d);f=e[f][g];g=f&240;f&=15;b[h]=k=e[f][L];if(0<g){if(16===g)for(g=l;g<h;g++)b[g]=1;l=-1}if(g=e[f][R])-1===l&&(l=h);else if(-1<l){for(g=l;g<h;g++)b[g]=k;l=-1}n[h]===ga&&(b[h]=0);d.hiLevel|=k}if(d.hasUbatS)for(a=0;a<c;a++)if(n[a]===da){b[a]=d.dir;for(e=a-1;0<=e;e--)if(n[e]===ia)b[e]=d.dir;else break}}function f(a,b){var d=a.split("");if(b){var e=[];c(d,e,b);s=e}d.reverse();x.reverse();return d.join("")}function l(a){for(var b=0;b<U.length;b++)if(a>=U[b]&&a<=X[b])return!0;
return!1}function p(a,b,d,c){for(;b*d<c&&w(a[b]);)b+=d;return b*d<c&&l(a[b])?!0:!1}function n(a,b,d,c){if(!(c.hiLevel<a))if(1===a&&c.dir===E&&!c.hasUbatB)b.reverse(),x.reverse();else{c=b.length;for(var e=0,f,g,k;e<c;){if(d[e]>=a){for(f=e+1;f<c&&d[f]>=a;)f++;for(g=f-1;e<g;e++,g--)k=b[e],b[e]=b[g],b[g]=k,k=x[e],x[e]=x[g],x[g]=k;e=f}e++}}}function z(a,b,d,c,e){return{UBAT_L:function(){e.lastArabic=!1;return W},UBAT_R:function(){e.lastArabic=!1;return Y},UBAT_ON:function(){return $},UBAT_AN:function(){return fa},
UBAT_EN:function(){return e.lastArabic?fa:ba},UBAT_AL:function(){e.lastArabic=!0;e.hasUbatAl=!0;return Y},UBAT_WS:function(){return $},UBAT_CS:function(){var a,f;if(1>c||c+1>=b.length||(a=d[c-1])!==ba&&a!==fa||(f=b[c+1])!==ba&&f!==fa)return $;e.lastArabic&&(f=fa);return f===a?f:$},UBAT_ES:function(){return(0<c?d[c-1]:ga)===ba&&c+1<b.length&&b[c+1]===ba?ba:$},UBAT_ET:function(){if(0<c&&d[c-1]===ba)return ba;if(e.lastArabic)return $;for(var a=c+1,f=b.length;a<f&&b[a]===ja;)a++;return a<f&&b[a]===ba?
ba:$},UBAT_NSM:function(){if("VLTR"===e.inFormat){for(var f=b.length,g=c+1;g<f&&b[g]===ka;)g++;if(g<f&&(f=a[c],g=b[g],(1425<=f&&2303>=f||64286===f)&&(g===Y||g===ha)))return Y}return 1>c||b[c-1]===ga?$:d[c-1]},UBAT_B:function(){e.lastArabic=!0;e.hasUbatB=!0;return e.dir},UBAT_S:function(){e.hasUbatS=!0;return $},UBAT_LRE:function(){e.lastArabic=!1;return $},UBAT_RLE:function(){e.lastArabic=!1;return $},UBAT_LRO:function(){e.lastArabic=!1;return $},UBAT_RLO:function(){e.lastArabic=!1;return $},UBAT_PDF:function(){e.lastArabic=
!1;return $},UBAT_BN:function(){return $}}[la[b[c]]]()}function r(a,b){for(var d=0;d<C.length;d++)if(a===C[d])return b[d];return a}function w(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function y(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function u(a,b){for(var d=0;d<t.length;d++)if(a===t[d])return b[d];return a}function D(a,b,d,c){for(var e=0;e<a.length;e++)if(a[e]>b||!d&&a[e]===b)a[e]+=c}h.getObject("string",!0,dojox);h=a("dojox.string.BidiEngine",
e,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,b,d){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var c=this.sourceToTarget,e=this.targetToSource,f=a.length;x=[];s=[];for(var g=0;g<f;g++)c[g]=g,e[g]=g,x[g]=g;if(!this.checkParameters(b,d))return a;b=this.inputFormat;d=this.outputFormat;var c=a,c=K,g=y(b.charAt(1)),e=y(d.charAt(1)),k="I"===b.charAt(0)?"L":b.charAt(0),f="I"===d.charAt(0)?"L":d.charAt(0),g=k+g,e=f+e,f=
b.charAt(2)+d.charAt(2);c.defInFormat=g;c.defOutFormat=e;c.defSwap=f;a=m(a,g,e,f,c);c=!1;if("R"===d.charAt(1))c=!0;else if("C"===d.charAt(1)||"D"===d.charAt(1))c=this.checkContextual(a);e=this.sourceToTarget=x;f=Array(e.length);for(g=0;g<e.length;g++)f[e[g]]=g;A=this.targetToSource=f;if(b.charAt(3)===d.charAt(3))c=a;else if("S"===d.charAt(3))if(b=c,d=!0,0===a.length)c=void 0;else{void 0===b&&(b=!0);void 0===d&&(d=!0);a=String(a);a=a.split("");var h=0,e=1,c=a.length;b||(h=a.length-1,e=-1,c=1);for(var f=
c,g=d,n=0,c=[],k=0;h*e<f;h+=e)if(l(a[h])||w(a[h])){var q;if(q="\u0644"===a[h])b:{for(var z=a,E=h+e,B=e,F=f;E*B<F&&w(z[E]);)E+=B;q=" ";if(E*B<F){q=z[E];for(z=0;z<t.length;z++)if(t[z]===q){q=!0;break b}}q=!1}if(q){a[h]=0===n?u(a[h+e],v):u(a[h+e],H);h+=e;n=a;q=h;z=e;for(E=f;q*z<E&&w(n[q]);)q+=z;q*z<E&&(n[q]=" ");g&&(c[k]=h,k++);n=0}else{q=a[h];if(1===n){z=a;E=h;if(p(a,h+e,e,f))b:{B=a[h];for(F=0;F<C.length;F++)if(B===C[F]){B=J[F];break b}}else B=r(a[h],P);z[E]=B}else!0===p(a,h+e,e,f)?a[h]=r(a[h],S):a[h]=
r(a[h],T);w(q)||(n=1);b:{for(z=0;z<Q.length;z++)if(Q[z]===q){q=!0;break b}q=!1}!0===q&&(n=0)}}else n=0;e="";for(f=0;f<a.length;f++){if(g=d){b:{for(g=0;g<c.length;g++)if(c[g]===f)break b;g=-1}g=-1<g}g?(D(A,f,!b,-1),x.splice(f,1)):e+=a[f]}c=e}else if(b=a,d=c,a=!0,0===b.length)c=void 0;else{void 0===a&&(a=!0);void 0===d&&(d=!0);b=String(b);c="";e=[];e=b.split("");for(f=0;f<b.length;f++)g=!1,"\ufe70"<=e[f]&&"\ufeff">e[f]?(k=b.charCodeAt(f),"\ufef5"<=e[f]&&"\ufefc">=e[f]?(d?(0<f&&a&&" "===e[f-1]?c=c.substring(0,
c.length-1)+"\u0644":(c+="\u0644",g=!0),c+=t[(k-65269)/2]):(c+=t[(k-65269)/2],c+="\u0644",f+1<b.length&&a&&" "===e[f+1]?f++:g=!0),g&&(D(A,f,!0,1),x.splice(f,0,x[f]))):c+=N[k-65136]):c+=e[f]}this.sourceToTarget=x;this.targetToSource=A;this.levels=s;return c},_inputFormatSetter:function(a){if(!F.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=a},_outputFormatSetter:function(a){if(!F.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");
this.outputFormat=a},checkParameters:function(a,b){a?this.set("inputFormat",a):a=this.inputFormat;b?this.set("outputFormat",b):b=this.outputFormat;return a===b?!1:!0},checkContextual:function(a){a=d(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(b){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return G.test(a)}});var x=[],A=[],s=[],K={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,
hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},L=5,R=6,M=0,E=1,F=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,G=/[\u0591-\u06ff\ufb1d-\ufefc]/,B=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],
["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],t=["\u0622","\u0623","\u0625","\u0627"],v=["\ufef5","\ufef7","\ufef9","\ufefb"],H=["\ufef6","\ufef8","\ufefa","\ufefc"],C="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),
T="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),P="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),
J="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),S="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),
Q="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),N="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
U=["\u0621","\u0641"],X=["\u063a","\u064a"],V=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ea=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],W=0,Y=1,ba=2,fa=3,$=4,ga=5,da=6,ha=7,ia=8,ja=11,ka=12,la="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),aa=100;a=W;e=Y;var I=ba,Z=fa,k=$,ma=ga,na=da,g=ha,ca=ia,O=ja,
q=ka,oa=[aa+0,a,a,a,a,aa+1,aa+2,aa+3,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,aa+4,k,k,k,a,k,a,k,a,k,k,k,a,a,k,k,a,a,a,a,a,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,a,a,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,a,a,a,a,a,a,a,a,a,a,a,a,a,a,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,a,a,k,k,a,a,k,k,a,a,k,k,k,k,k,k,k,k,k,k,k,k,k,k,
k,k,k,k,k,k,k,k,k,a,a,a,aa+5,g,g,aa+6,aa+7],pa=[[18,18,18,18,18,18,18,18,18,na,ma,na,ca,ma,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ma,ma,ma,na,ca,k,k,O,O,O,k,k,k,k,k,10,9,10,9,9,I,I,I,I,I,I,I,I,I,I,9,k,k,k,k,k,k,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,k,k,k,k,k,k,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,k,k,k,k,18,18,18,18,18,18,ma,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,k,O,O,O,O,k,k,k,k,a,k,k,18,k,k,O,O,I,I,k,a,k,k,k,I,a,k,k,k,k,k,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,k,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,k,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,k,k,k,k,k,k,k,k,k,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,k,k,a,a,a,a,a,a,a,k,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,k,a,k,k,k,k,k,k,k,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,
q,q,q,q,e,q,e,q,q,e,q,q,e,q,k,k,k,k,k,k,k,k,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,k,k,k,k,k,e,e,e,e,e,k,k,k,k,k,k,k,k,k,k,k],[Z,Z,Z,Z,k,k,k,k,g,O,O,g,9,g,k,k,q,q,q,q,q,q,q,q,q,q,q,g,k,k,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,O,Z,Z,g,g,g,q,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,
g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,q,q,q,q,q,q,q,Z,k,q,q,q,q,q,q,g,g,q,q,k,q,q,q,q,g,g,I,I,I,I,I,I,I,I,I,I,g,g,g,g,g,g],[g,g,g,g,g,g,g,g,g,g,g,g,g,g,k,g,g,q,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,k,k,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,q,q,q,q,q,q,q,q,
q,q,q,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,q,q,q,q,q,q,q,q,q,e,e,k,k,k,k,e,k,k,k,k,k],[ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,ca,18,18,18,a,e,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,ca,ma,13,14,15,16,17,9,O,O,O,O,O,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,9,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,ca,18,18,18,18,18,k,k,k,k,k,18,18,18,18,18,18,I,a,k,k,I,I,I,I,I,I,10,10,k,k,k,a,I,I,I,I,I,I,I,I,I,I,10,10,k,k,k,k,a,a,a,a,a,
a,a,a,a,a,a,a,a,k,k,k,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k],[a,a,a,a,a,a,a,k,k,k,k,k,k,k,k,k,k,k,k,a,a,a,a,a,k,k,k,k,k,e,q,e,e,e,e,e,e,e,e,e,e,10,e,e,e,e,e,e,e,e,e,e,e,e,e,k,e,e,e,e,e,k,e,k,e,e,k,e,e,k,e,e,e,e,e,e,e,e,e,e,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,
g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g],[q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,q,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,q,q,q,q,q,q,q,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,9,k,9,k,k,9,k,k,k,k,k,k,k,k,k,O,k,k,10,10,k,k,k,k,k,O,O,k,k,k,k,k,g,g,g,g,g,k,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,
g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,k,k,18],[k,k,k,O,O,O,k,k,k,k,k,10,9,10,9,9,I,I,I,I,I,I,I,I,I,I,9,k,k,k,k,k,k,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,k,k,k,k,k,k,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,k,k,k,k,k,k,k,k,k,k,k,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,k,k,k,a,a,a,a,a,a,k,k,a,a,a,a,a,a,k,k,a,a,a,a,a,a,k,k,a,a,a,k,k,k,O,O,k,k,k,O,O,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k]];return h})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(h,a,e,m){return h("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;return b[a]?b[a]:
b[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,b){return"function"===typeof this[b.g]?this[b.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,b){if("object"===typeof a){for(var c in a)a.hasOwnProperty(c)&&"_watchCallbacks"!=c&&this.set(c,a[c]);return this}c=this._getAttrNames(a);var e=this._get(a,c);c=this[c.s];var l;"function"===typeof c?l=c.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=b;if(this._watchCallbacks){var h=
this;m(l,function(){h._watchCallbacks(a,e,b)})}return this},_changeAttrValue:function(a,b){var c=this.get(a);this[a]=b;this._watchCallbacks&&this._watchCallbacks(a,c,b);return this},watch:function(a,b){var c=this._watchCallbacks;if(!c)var f=this,c=this._watchCallbacks=function(a,b,d,e){var h=function(c){if(c){c=c.slice();for(var e=0,h=c.length;e<h;e++)c[e].call(f,a,b,d)}};h(c["_"+a]);e||h(c["*"])};!b&&"function"===typeof a?(b=a,a="*"):a="_"+a;var l=c[a];"object"!==typeof l&&(l=c[a]=[]);l.push(b);
var h={};h.unwatch=h.remove=function(){var a=e.indexOf(l,b);-1<a&&l.splice(a,1)};return h}})})},"esri/layers/vectorTiles/views/vectorTiles/TileClipper":function(){define(["require","exports","./Geometry"],function(h,a,e){var m=function(){return function(a,b,c){this.ratio=a;this.x=b;this.y=c}}();h=function(){function a(b,c,d){this.dz=b;this.yPos=c;this.xPos=d}a.prototype.setExtent=function(a){this.finalRatio=4096/a*(1<<this.dz);var c;c=64/this.finalRatio;a>>=this.dz;c>a&&(c=a);this.margin=c;this.xmin=
a*this.xPos-c;this.ymin=a*this.yPos-c;this.xmax=this.xmin+a+2*c;this.ymax=this.ymin+a+2*c};a.prototype.reset=function(a){this.type=a;this._prevIsIn=!1;this.lines=[];this.line=null};a.prototype.moveTo=function(a,c){this._push_line();this._prevIsIn=this._isIn(a,c);this._moveTo(a,c,this._prevIsIn);this._prevPt=new e.Point(a,c);this._firstPt=new e.Point(a,c)};a.prototype.lineTo=function(a,c){var d=this._isIn(a,c),h,p,n,z,r,w;if(d)this._prevIsIn?this._lineTo(a,c,!0):(h=this._prevPt,p=new e.Point(a,c),
n=this._intersect(p,h),this._lineTo(n.x,n.y,!0),this._lineTo(p.x,p.y,!0));else{if(this._prevIsIn)p=this._prevPt,h=new e.Point(a,c),n=this._intersect(p,h),this._lineTo(n.x,n.y,!0);else{var y=this._prevPt;h=new e.Point(a,c);if(!(y.x<=this.xmin&&h.x<=this.xmin||y.x>=this.xmax&&h.x>=this.xmax||y.y<=this.ymin&&h.y<=this.ymin||y.y>=this.ymax&&h.y>=this.ymax)){p=[];if(y.x<this.xmin&&h.x>this.xmin||y.x>this.xmin&&h.x<this.xmin)n=(this.xmin-y.x)/(h.x-y.x),w=y.y+n*(h.y-y.y),w<=this.ymin?r=!1:w>=this.ymax?r=
!0:p.push(new m(n,this.xmin,w));if(y.x<this.xmax&&h.x>this.xmax||y.x>this.xmax&&h.x<this.xmax)n=(this.xmax-y.x)/(h.x-y.x),w=y.y+n*(h.y-y.y),w<=this.ymin?r=!1:w>=this.ymax?r=!0:p.push(new m(n,this.xmax,w));if(y.y<this.ymin&&h.y>this.ymin||y.y>this.ymin&&h.y<this.ymin)n=(this.ymin-y.y)/(h.y-y.y),w=y.x+n*(h.x-y.x),w<=this.xmin?z=!1:w>=this.xmax?z=!0:p.push(new m(n,w,this.ymin));if(y.y<this.ymax&&h.y>this.ymax||y.y>this.ymax&&h.y<this.ymax)n=(this.ymax-y.y)/(h.y-y.y),w=y.x+n*(h.x-y.x),w<=this.xmin?z=
!1:w>=this.xmax?z=!0:p.push(new m(n,w,this.ymax));if(0===p.length)z?r?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):r?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<p.length&&p[0].ratio>p[1].ratio)this._lineTo(p[1].x,p[1].y,!0),this._lineTo(p[0].x,p[0].y,!0);else for(n=0;n<p.length;n++)this._lineTo(p[n].x,p[n].y,!0)}}this._lineTo(h.x,h.y,!1)}this._prevIsIn=d;this._prevPt=new e.Point(a,c)};a.prototype.close=function(){var a,c;if(0<this.line.length&&
(a=this._firstPt,c=this._prevPt,(a.x!==c.x||a.y!==c.y)&&this.lineTo(a.x,a.y),a=this.line,c=a.length,4<=c&&(a[0].x===a[1].x&&a[0].x===a[c-2].x||a[0].y===a[1].y&&a[0].y===a[c-2].y)))a.pop(),a[0].x=a[c-2].x,a[0].y=a[c-2].y};a.prototype.result=function(){this._push_line();return 0===this.lines.length?null:this.lines};a.prototype._isIn=function(a,c){return a>=this.xmin&&a<=this.xmax&&c>=this.ymin&&c<=this.ymax};a.prototype._intersect=function(a,c){var d,h;if(c.x>=this.xmin&&c.x<=this.xmax)h=c.y<=this.ymin?
this.ymin:this.ymax,d=a.x+(h-a.y)/(c.y-a.y)*(c.x-a.x);else if(c.y>=this.ymin&&c.y<=this.ymax)d=c.x<=this.xmin?this.xmin:this.xmax,h=a.y+(d-a.x)/(c.x-a.x)*(c.y-a.y);else{h=c.y<=this.ymin?this.ymin:this.ymax;d=c.x<=this.xmin?this.xmin:this.xmax;var m=(d-a.x)/(c.x-a.x),n=(h-a.y)/(c.y-a.y);m<n?h=a.y+m*(c.y-a.y):d=a.x+n*(c.x-a.x)}return new e.Point(d,h)};a.prototype._push_line=function(){this.line&&(1===this.type?0<this.line.length&&this.lines.push(this.line):2===this.type?1<this.line.length&&this.lines.push(this.line):
3===this.type&&3<this.line.length&&this.lines.push(this.line));this.line=[]};a.prototype._moveTo=function(a,c,d){3!==this.type?d&&(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new e.Point(a,c))):(d||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),c<this.ymin&&(c=this.ymin),c>this.ymax&&(c=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),
this.line.push(new e.Point(a,c)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,c,d){if(3!==this.type)if(d){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);c=Math.round((c-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(d=this.line[this.line.length-1],d.equals(a,c)))return;this.line.push(new e.Point(a,c))}else this.line&&0<this.line.length&&this._push_line();else if(d||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),c<this.ymin&&(c=this.ymin),c>this.ymax&&
(c=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){d=this.line[this.line.length-1];var h=d.x===a,m=d.y===c;if(!h||!m)this._is_h&&h?(d.x=a,d.y=c,d=this.line[this.line.length-2],this._is_h=d.x===a,this._is_v=d.y===c):this._is_v&&m?(d.x=a,d.y=c,d=this.line[this.line.length-2],this._is_h=d.x===a,this._is_v=d.y===c):(this.line.push(new e.Point(a,c)),this._is_h=h,this._is_v=m)}else this.line.push(new e.Point(a,
c))};return a}();a.TileClipper=h;h=function(){function a(){}a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.lines=[];this.line=null};a.prototype.moveTo=function(a,c){this.line&&this.lines.push(this.line);this.line=[];var d=this._ratio;this.line.push(new e.Point(Math.round(a*d),Math.round(c*d)))};a.prototype.lineTo=function(a,c){var d=this._ratio;this.line.push(new e.Point(Math.round(a*d),Math.round(c*d)))};a.prototype.close=function(){var a=this.line;
a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=function(){this.line&&this.lines.push(this.line);return 0===this.lines.length?null:this.lines};return a}();a.SimpleBuilder=h})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","../../../core/urlUtils","./StyleLayer"],function(h,a,e,m){return function(){function a(b,c){void 0===c&&(c="");this.styleJSON=b;this.version=parseFloat(b.version);this.sprite=b.sprite;e.isAbsolute(this.sprite)||
(this.sprite=e.join(c,this.sprite));this.glyphs=b.glyphs;e.isAbsolute(this.glyphs)||(this.glyphs=e.join(c,this.glyphs));this.layers=(b.layers||[]).map(a._create);this._identifyRefLayers()}a.prototype._identifyRefLayers=function(){for(var a=[],c=[],d=0,e=this.layers;d<e.length;d++){var h=e[d];if(1===h.type){var n=h.sourceLayer,n=n+("|"+JSON.stringify(h.minzoom)),n=n+("|"+JSON.stringify(h.maxzoom)),n=n+("|"+JSON.stringify(h.filter));a.push({key:n,layer:h})}2===h.type&&(n=h.sourceLayer,n+="|"+JSON.stringify(h.minzoom),
n+="|"+JSON.stringify(h.maxzoom),n+="|"+JSON.stringify(h.filter),n+="|"+JSON.stringify(h.layout["line-cap"]),n+="|"+JSON.stringify(h.layout["line-join"]),c.push({key:n,layer:h}))}this._assignRefLayers(a);this._assignRefLayers(c)};a.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var c,d,e=a.length,h=0;h<e;h++){var n=a[h];if(n.key===c)n.layer.refLayerId=d;else if(c=n.key,d=n.layer.id,1===n.layer.type&&!n.layer.hasPaintProperty("fill-outline-color"))for(var m=
h+1;m<e;m++){var r=a[m];if(r.key===c){if(r.layer.hasPaintProperty("fill-outline-color")){a[h]=r;a[m]=n;d=r.layer.id;break}}else break}}};a._create=function(a,c,d){c=1-(1+c)*(1/(d.length+1));switch(a.type){case "background":return new m.StyleLayer(0,a,c);case "fill":return new m.StyleLayer(1,a,c);case "line":return new m.StyleLayer(2,a,c);case "symbol":return new m.StyleLayer(3,a,c);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");
}throw Error("Unknown vector tile layer");};return a}()})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(h,a,e,m){function d(a){return a&&"/"===a[0]&&"/"===a[1]||p.test(a)}function b(b){if("string"===typeof b)return new m(c(b));b.scheme||(b.scheme=a.appUrl.scheme);return b}function c(b,c){void 0===c&&(c=a.appBaseUrl);if(b&&"/"===b[0]&&"/"===b[1])return"file"===a.appUrl.scheme?"https:"+b:a.appUrl.scheme+":"+b;if(p.test(b))return b;
var d=f,e;if("/"===b[0]){e=c;var h=e.indexOf("//"),h=e.indexOf("/",h+2);e=-1===h?e:e.slice(0,h)}else e=c;return d(e,b)}function f(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(a&&a.length){b=[];if(d(a[0])){var c=a[0],e=c.indexOf("//");b.push(c.slice(0,e+1));l.test(a[0])&&(b[0]+="/");a[0]=c.slice(e+2)}else"/"===a[0][0]&&b.push("");a=a.reduce(function(a,b){return a.concat(b.split("/"))},[]);for(c=0;c<a.length;c++)e=a[c],".."===e&&0<b.length?b.pop():e&&("."!==e||0===b.length)&&b.push(e);
return b.join("/")}}a.normalize=function(a){return e.normalize(a)};h=Function("return this")();a.appUrl=new m(h.location);a.appBaseUrl=function(){var b=a.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(a.appUrl.scheme+"://"+a.appUrl.host+(null!=a.appUrl.port?":"+a.appUrl.port:""))+b}();var l=/^\s*file:/i,p=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;a.isAbsolute=d;a.urlToObject=function(a){return e.urlToObject(a)};a.makeAbsolute=c;a.hasSameOrigin=function(a,c,d){void 0===
d&&(d=!1);a=b(a);c=b(c);return!d&&a.scheme!==c.scheme?!1:a.host.toLowerCase()===c.host.toLowerCase()&&a.port===c.port};a.join=f})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/io-query ./kernel ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(h,a,e,m,d,b,c,f){var l=function(){return this}(),p={},n=b.defaults.io,z=/^[a-z][a-z0-9\+\-\.]*:/i;p.isHTTP=function(a){var b=l.location.protocol;return null==a?"http:"===b||"https:"===b:a?"https:"===b:"http:"===
b};p.getProtocolForWebResource=function(a){return p.isHTTP()?l.location.protocol:a?"https:":"http:"};p.urlToObject=function(a){var b={},c=new e(a),d=a.indexOf("?");null===c.query?b={path:a,query:null}:(b.path=a.substring(0,d),b.query=m.queryToObject(c.query));c.fragment&&(b.hash=c.fragment,null===c.query&&(b.path=b.path.substring(0,b.path.length-(c.fragment.length+1))));return b};p.getProxyUrl=function(a,b){var c=h.isString(a)?0===h.trim(a).toLowerCase().indexOf("https:"):a,d=n.proxyUrl,e,m,A=f.io.proxyNotSet;
if(h.isString(a)&&(m=p.getProxyRule(a)))d=m.proxyUrl;if(!d)throw console.log(A),Error(A);c&&(!1!==b&&0!==l.location.href.toLowerCase().indexOf("https:"))&&(c=d,0!==c.toLowerCase().indexOf("http")&&(c=p.getAbsoluteUrl(c)),c=c.replace(/^http:/i,"https:"),p.canUseXhr(c)&&(d=c,e=1));d=p.urlToObject(d);d._xo=e;return d};p.addProxy=function(a){var b=p.getProxyRule(a),c;b?c=p.urlToObject(b.proxyUrl):n.alwaysUseProxy&&(c=p.getProxyUrl());c&&(b=p.urlToObject(a),a=c.path+"?"+b.path,(c=m.objectToQuery(h.mixin(c.query||
{},b.query)))&&(a+="?"+c));return a};p.addProxyRule=function(a){var b=a.urlPrefix=p.urlToObject(a.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),c=n.proxyRules,d,e=c.length,f,h=e;for(d=0;d<e;d++)if(f=c[d].urlPrefix,0===b.indexOf(f)){if(b.length===f)return-1;h=d;break}else 0===f.indexOf(b)&&(h=d+1);c.splice(h,0,a);return h};p.getProxyRule=function(a){var b=n.proxyRules,c=b.length,d=p.urlToObject(a).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),
e;for(a=0;a<c;a++)if(0===d.indexOf(b[a].urlPrefix)){e=b[a];break}return e};p.hasSameOrigin=function(a,b,c){a=a.toLowerCase();b=b.toLowerCase();var d=l.location.href.toLowerCase();a=0===a.indexOf("http")?new e(a):d=new e(d);b=0===b.indexOf("http")?new e(b):h.isString(d)?new e(d):d;return(c||a.scheme===b.scheme)&&a.host===b.host&&a.port===b.port};p.canUseXhr=function(b,d){var e=c("esri-phonegap")?!0:!1,f=p.hasSameOrigin,l=n.corsEnabledServers,m,z=-1;!e&&(c("esri-cors")&&l&&l.length)&&(e=a.some(l,function(a,
c){var d=a&&"object"===typeof a?a.host:a;return d&&(m=0!==h.trim(d).toLowerCase().indexOf("http"),f(b,m?"http://"+d:d)||m&&f(b,"https://"+d))?(z=c,!0):!1}));return d?z:e};p.getAbsoluteUrl=function(a){var b=p.getProtocolForWebResource();return h.isString(a)&&!z.test(a)?0===a.indexOf("//")?b+a:0===a.indexOf("/")?b+"//"+l.location.host+a:d._appBaseUrl+a:a};p.fixUrl=function(a){/^\/\//i.test(a)&&(a=p.getProtocolForWebResource()+a);return a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")};p.normalize=
function(a){a=p._ensureProtocol(a);return a=p._ensureProperProtocolForAGOResource(a)};p._ensureProtocol=function(a){if(!a)return a;/^\/\//i.test(a)&&(a=p.getProtocolForWebResource(!0)+a);return a};p._ensureProperProtocolForAGOResource=function(a){return!p.isHTTP(!1)&&(/^http\:\/\/server\.arcgisonline\.com(?!:)/i.test(a)||/^http\:\/\/services\.arcgisonline\.com(?!:)/i.test(a)||/^http\:\/\/.+\.arcgis\.com(?!:)/i.test(a))?a.replace(/http:/i,"https:"):a};c("extend-esri")&&(h.mixin(d,p),d._getProxyUrl=
p.getProxyUrl,d._getProxiedUrl=p.addProxy,d._hasSameOrigin=p.hasSameOrigin,d._canDoXOXHR=p.canUseXhr,d._getAbsoluteUrl=p.getAbsoluteUrl,d.fixUrl=p.fixUrl);return p})},"dojo/_base/url":function(){define(["./kernel"],function(h){var a=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,e=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,m=function(){for(var d=arguments,b=[d[0]],c=1;c<d.length;c++)if(d[c]){var f=new m(d[c]+""),b=new m(b[0]+"");if(""==f.path&&!f.scheme&&!f.authority&&
!f.query)null!=f.fragment&&(b.fragment=f.fragment),f=b;else if(!f.scheme&&(f.scheme=b.scheme,!f.authority&&(f.authority=b.authority,"/"!=f.path.charAt(0)))){for(var b=(b.path.substring(0,b.path.lastIndexOf("/")+1)+f.path).split("/"),h=0;h<b.length;h++)"."==b[h]?h==b.length-1?b[h]="":(b.splice(h,1),h--):0<h&&(!(1==h&&""==b[0])&&".."==b[h]&&".."!=b[h-1])&&(h==b.length-1?(b.splice(h,1),b[h-1]=""):(b.splice(h-1,2),h-=2));f.path=b.join("/")}b=[];f.scheme&&b.push(f.scheme,":");f.authority&&b.push("//",
f.authority);b.push(f.path);f.query&&b.push("?",f.query);f.fragment&&b.push("#",f.fragment)}this.uri=b.join("");d=this.uri.match(a);this.scheme=d[2]||(d[1]?"":null);this.authority=d[4]||(d[3]?"":null);this.path=d[5];this.query=d[7]||(d[6]?"":null);this.fragment=d[9]||(d[8]?"":null);null!=this.authority&&(d=this.authority.match(e),this.user=d[3]||null,this.password=d[4]||null,this.host=d[6]||d[7],this.port=d[9]||null)};m.prototype.toString=function(){return this.uri};return h._Url=m})},"dojo/io-query":function(){define(["./_base/lang"],
function(h){var a={};return{objectToQuery:function(e){var m=encodeURIComponent,d=[],b;for(b in e){var c=e[b];if(c!=a[b]){var f=m(b)+"\x3d";if(h.isArray(c))for(var l=0,p=c.length;l<p;++l)d.push(f+m(c[l]));else d.push(f+m(c))}}return d.join("\x26")},queryToObject:function(a){var m=decodeURIComponent;a=a.split("\x26");for(var d={},b,c,f=0,l=a.length;f<l;++f)if(c=a[f],c.length){var p=c.indexOf("\x3d");0>p?(b=m(c),c=""):(b=m(c.slice(0,p)),c=m(c.slice(p+1)));"string"==typeof d[b]&&(d[b]=[d[b]]);h.isArray(d[b])?
d[b].push(c):d[b]=c}return d}}})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(h,a,e,m){var d=function(){return this}(),b={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,
0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:d.Worker&&!1,io:{errorHandler:function(b,d){a.publish("esri.Error",[b])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:"server.arcgisonline.com services.arcgisonline.com www.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com basemaps.arcgis.com elevation3d.arcgis.com services.arcgis.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com static.arcgis.com utility.arcgisonline.com geocode.arcgis.com geoenrich.arcgis.com qaext.arcgis.com tilesqa.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com geocodeqa.arcgis.com geoenrichqa.arcgis.com dev.arcgis.com devext.arcgis.com staticdev.arcgis.com tilesdevext.arcgis.com elevation3ddev.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com geocodedev.arcgis.com geoenrichdev.arcgis.com basemapsdev.arcgis.com".split(" "),
corsDetection:d.cordova?!1:!0,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5}}};e("extend-esri")&&(m.config=b);h.noGlobals||(d.esriConfig=b);return b})},"dojo/topic":function(){define(["./Evented"],function(h){var a=new h;return{publish:function(e,h){return a.emit.apply(a,arguments)},subscribe:function(e,h){return a.on.apply(a,arguments)}}})},"esri/sniff":function(){define(["dojo/_base/sniff","./kernel"],function(h,a){var e=
function(){return this}(),m=h("ff"),d=h("ie"),b=void 0===d&&7<=h("trident"),c=h("edge"),f=h("webkit"),l=h("opera"),p=h("chrome"),n=h("safari"),z=navigator.userAgent,r;(r=z.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&h.add("esri-iphone",parseFloat(r[2].replace("_",".")));(r=z.match(/Android\s+(\d+\.\d+)/i))&&h.add("esri-android",parseFloat(r[1]));(r=z.match(/Fennec\/(\d+\.\d+)/i))&&h.add("esri-fennec",parseFloat(r[1]));0<=z.indexOf("BlackBerry")&&0<=z.indexOf("WebKit")&&h.add("esri-blackberry",
1);h.add("esri-touch",h("esri-iphone")||h("esri-android")||h("esri-blackberry")||6<=h("esri-fennec")||(m||f)&&document.createTouch?!0:!1);(r=z.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&h.add("esri-mobile",r);h.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled);a._getDOMAccessor=function(a){var b="";m?b="Moz":f?b="Webkit":d?b="ms":l&&(b="O");return b+a.charAt(0).toUpperCase()+a.substr(1)};h.add("esri-phonegap",!!e.cordova);h.add("esri-cors",h("esri-phonegap")||
e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);h.add("esri-file-upload",e.FormData&&e.FileList?!0:!1);h.add("esri-workers",e.Worker?!0:!1);h.add("esri-transforms",b||c||9<=d||3.5<=m||4<=p||3.1<=n||10.5<=l||3.2<=h("esri-iphone")||2.1<=h("esri-android"));h.add("esri-transitions",b||c||10<=d||4<=m||4<=p||3.1<=n||10.5<=l||3.2<=h("esri-iphone")||2.1<=h("esri-android"));h.add("esri-transforms3d",b||c||10<=m||12<=p||4<=n||3.2<=h("esri-iphone")||3<=h("esri-android"));h.add("esri-url-encodes-apostrophe",
function(){if(e.document)return!1;var a=e.document.createElement("a");a.href="?'";return-1<a.href.indexOf("?%27")});3>h("esri-android")&&(h.add("esri-transforms",!1,!1,!0),h.add("esri-transitions",!1,!1,!0),h.add("esri-transforms3d",!1,!1,!0));a._css=function(a){var b=h("esri-transforms3d");if(void 0!==a&&null!==a)b=a;else if(b&&(p||n&&!h("esri-iphone")))b=!1;var c=b?"translate3d(":"translate(",e=b?p?",-1px)":",0px)":")",r=b?"scale3d(":"scale(",z=b?",1)":")",s=b?"rotate3d(0,0,1,":"rotate(",K=b?"matrix3d(":
"matrix(",L=b?",0,0,":",",R=b?",0,0,0,0,1,0,":",",M=b?",0,1)":")";return{names:{transition:f&&"-webkit-transition"||m&&"MozTransition"||l&&"OTransition"||d&&"msTransition"||"transition",transform:f&&"-webkit-transform"||m&&"MozTransform"||l&&"OTransform"||d&&"msTransform"||"transform",transformName:f&&"-webkit-transform"||m&&"-moz-transform"||l&&"-o-transform"||d&&"-ms-transform"||"transform",origin:f&&"-webkit-transform-origin"||m&&"MozTransformOrigin"||l&&"OTransformOrigin"||d&&"msTransformOrigin"||
"transformOrigin",endEvent:f&&"webkitTransitionEnd"||m&&"transitionend"||l&&"oTransitionEnd"||d&&"MSTransitionEnd"||"transitionend"},translate:function(a,b){return c+a+"px,"+b+"px"+e},scale:function(a){return r+a+","+a+z},rotate:function(a){return s+a+"deg)"},matrix:function(a){return K+a.xx+","+a.xy+L+a.yx+","+a.yy+R+a.dx.toFixed(10)+(m?"px,":",")+a.dy.toFixed(10)+(m?"px":"")+M},getScaleFromMatrix:function(a){if(!a)return 1;a=a.toLowerCase();var b=-1<a.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(a.substring(b.length,
a.indexOf(",")))}}};h("extend-esri")&&(a.isiPhone=h("esri-iphone"),a.isAndroid=h("esri-android"),a.isFennec=h("esri-fennec"),a.isBlackBerry=h("esri-blackberry"),a.isTouchEnabled=h("esri-touch"),a.isPointerEnabled=h("esri-pointer"),a._hasCors=h("esri-cors"),a._hasFileUpload=h("esri-file-upload"),a._hasTransforms=h("esri-transforms"),a._hasTransitions=h("esri-transitions"),a._has3DTransforms=h("esri-transforms3d"));return h})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(h,
a,e){return e})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang require ./json module".split(" "),function(h,a,e,m,d,b,c,f,l){e.add("dojo-preload-i18n-Api",1);c=h.i18n={};var p=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,n=function(a,b,c,d){var e=[c+d];b=b.split("-");for(var f="",h=0;h<b.length;h++)if(f+=(f?"-":"")+b[h],!a||a[f])e.push(c+f+"/"+d),e.specificity=f;return e},z={},r=function(a,b,c){c=c?c.toLowerCase():h.locale;a=a.replace(/\./g,"/");
b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b},w=h.getL10nName=function(a,b,c){return l.id+"!"+r(a,b,c)},y=function(a,c,d,e,f,h){a([c],function(l){var m=b.clone(l.root||l.ROOT),p=n(!l._v1x&&l,f,d,e);a(p,function(){for(var a=1;a<p.length;a++)m=b.mixin(b.clone(m),arguments[a]);z[c+"/"+f]=m;m.$locale=p.specificity;h()})})},u=function(a){var c=d.extraLocale||[],c=b.isArray(c)?c:[c];c.push(a);return c},D=function(a,c,d){if(e("dojo-preload-i18n-Api")){var l=a.split("*"),n="preload"==
l[1];n&&(z[a]||(z[a]=1,K(l[2],f.parse(l[3]),1,c)),d(1));if(!(l=n))A&&s.push([a,c,d]),l=A;if(l)return}a=p.exec(a);var r=a[1]+"/",t=a[5]||a[4],v=r+t,l=(a=a[5]&&a[4])||h.locale||"",x=v+"/"+l;a=a?[l]:u(l);var w=a.length,D=function(){--w||d(b.delegate(z[x]))};m.forEach(a,function(a){var b=v+"/"+a;e("dojo-preload-i18n-Api")&&L(b);z[b]?D():y(c,v,r,t,a,D)})};e("dojo-preload-i18n-Api");var x=c.normalizeLocale=function(a){a=a?a.toLowerCase():h.locale;return"root"==a?"ROOT":a},A=0,s=[],K=c._preloadLocalizations=
function(c,d,e,f){function l(a,b){f([a],b)}function n(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;c.pop()}b("ROOT")}function p(){for(--A;!A&&s.length;)D.apply(null,s.shift())}function r(e){e=x(e);n(e,function(h){if(0<=m.indexOf(d,h)){var r=c.replace(/\./g,"/")+"_"+h;A++;l(r,function(c){for(var d in c){var l=c[d],m=d.match(/(.+)\/([^\/]+)$/),r;if(m&&(r=m[2],m=m[1]+"/",l._localized)){var s;if("ROOT"===h){var u=s=l._localized;delete l._localized;u.root=l;z[a.toAbsMid(d)]=u}else s=
l._localized,z[a.toAbsMid(m+r+"/"+h)]=l;h!==e&&function(c,d,h,l){var m=[],r=[];n(e,function(b){l[b]&&(m.push(a.toAbsMid(c+b+"/"+d)),r.push(a.toAbsMid(c+d+"/"+b)))});m.length?(A++,f(m,function(){for(var f=m.length-1;0<=f;f--)h=b.mixin(b.clone(h),arguments[f]),z[r[f]]=h;z[a.toAbsMid(c+d+"/"+e)]=b.clone(h);p()})):z[a.toAbsMid(c+d+"/"+e)]=h}(m,r,l,s)}}p()});return!0}return!1})}f=f||a;r();m.forEach(h.config.extraLocale,r)},L=function(){};new Function("__bundle","__checkForLegacyModules","__mid","__amdValue",
"var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}");L=function(a){for(var b,c=a.split("/"),d=h.global[c[0]],e=1;d&&e<c.length-1;d=d[c[e++]]);d&&((b=d[c[e]])||
(b=d[c[e].replace(/-/g,"_")]),b&&(z[a]=b));return b};c.getLocalization=function(b,c,d){var e;b=r(b,c,d);D(b,a,function(a){e=a});return e};return b.mixin(c,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:D,cache:z,getL10nName:w})})},"dojo/json":function(){define(["./has"],function(h){var a="undefined"!=typeof JSON;h.add("json-parse",a);h.add("json-stringify",a&&'{"a":1}'==JSON.stringify({a:0},function(a,d){return d||1}));if(h("json-stringify"))return JSON;var e=function(a){return('"'+
a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:h("json-parse")?JSON.parse:function(a,d){if(d&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(a))throw new SyntaxError("Invalid characters in JSON");return eval("("+a+")")},stringify:function(a,d,b){function c(a,h,n){d&&(a=d(n,a));var m;m=typeof a;if("number"==m)return isFinite(a)?
a+"":"null";if("boolean"==m)return a+"";if(null===a)return"null";if("string"==typeof a)return e(a);if("function"==m||"undefined"==m)return f;if("function"==typeof a.toJSON)return c(a.toJSON(n),h,n);if(a instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,c,d){b=a["getUTC"+c]()+(d?1:0);return 10>b?"0"+b:b});if(a.valueOf()!==a)return c(a.valueOf(),h,n);var r=b?h+b:"",w=b?" ":"",y=b?"\n":"";if(a instanceof Array){var w=a.length,u=[];
for(n=0;n<w;n++)m=c(a[n],r,n),"string"!=typeof m&&(m="null"),u.push(y+r+m);return"["+u.join(",")+y+h+"]"}u=[];for(n in a){var D;if(a.hasOwnProperty(n)){if("number"==typeof n)D='"'+n+'"';else if("string"==typeof n)D=e(n);else continue;m=c(a[n],r,n);"string"==typeof m&&u.push(y+r+D+":"+w+m)}}return"{"+u.join(",")+y+h+"}"}var f;"string"==typeof d&&(b=d,d=null);return c(a,"","")}}})},"*now":function(h){h(['dojo/i18n!*preload*esri/layers/vectorTiles/core/workers/nls/worker-init*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});
define("esri/layers/vectorTiles/core/workers/worker-init",[],1);